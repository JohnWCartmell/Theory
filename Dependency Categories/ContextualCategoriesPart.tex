\documentclass[10pt,a4paper]{scrartcl}
\usepackage[margin=3cm]{geometry}
\usepackage{pstricks}
\usepackage{pst-node}
\usepackage{pst-tree}
\usepackage{stmaryrd}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{verbatim}
\usepackage{enumerate}
\usepackage{calc}
\usepackage{url}
\usepackage{hyperref}
\usepackage{environ}
\NewEnviron{shrunkdisplay}{%
\begin{equation*}
\scalebox{0.9}{$\BODY$}
\end{equation*}
}

\input{../SharedMacros/theorems.macros}
\input{../SharedMacros/ccategories.macros}
\input{../SharedMacros/gats.macros}
\input{../SharedMacros/metagat.macros}
\input{../SharedMacros/ermacros}
\input{../SharedMacros/erdiagram}
\input{../SharedMacros/indexedsets.macros}

\renewcommand{\erpictureFolder}[0]{../SharedPictures}

\newcommand{\ccatc}{contextual category \ccat}

\setcounter{equation}{0}
\bibliographystyle{plain} % was hplain

\title{Notes on Contextual Categories - Work in Progress}
\author{John Cartmell\footnote{john.w.cartmell gmail.com}\\ \normalsize{\textit{Ad Otium}}}
\begin{document}
\maketitle


\section{Work in Progress}



\section{Drilldown Lemmas}
\begin{definition}
If $A$ is a non-prime object of a contextual category \ccat then let the prime base of $A$, denoted $\pbase{A}$,  be the 
prime object of \ccat greatest height such that $\pbase{A} \leq A$.
\end{definition}

\begin{lemma}
\vlabel{conepass}
If 
\begin{center}
\begin{displaymath}
\begin{array}{c p{1cm} r  }
\Rnode{D}{D} \\[0.5cm]
&&\Rnode{Y}{Y}\\[1.0cm]
&&\Rnode{X}{X}\\[1.0cm]
&&\begin{array}{c p{0.2cm} c p{0.1cm}c p{0.2cm} c}
\Rnode{A1}{A_1}& & \Rnode{A2}{A_2}&   & ... & & \Rnode{An}{A_n}
\end{array}                             
\end{array} 
\end{displaymath}
\ncarr{Y}{X}
\blabel{x}
\ncarr[-5]{X}{A1}
\blabel{a_1}[0.3]
\ncarr[-5]{X}{A2}
\alabel{a_2}[0.4]
\ncarr[-5]{X}{An}
\alabel{a_n}
\ncarr[-5]{D}{A1}
\blabel{a'_1}
\ncarr[-5]{D}{A2}
\alabel{a'_2}
\ncarr[-5]{D}{An}
\alabel{a'_n}
\end{center}
in a contextual category \ccat then if $\tuple{a'_1,...a'_n}$ is a cone to the characteristic diagram 
of $\tuple{x \circ a_1,... x \circ a_n}$ then it is a cone to the characteristic diagram
of $\tuple{a_1,... a_n}$.
\end{lemma}
\begin{proof}
Follows because any cospan that is coincident with the span $\tuple{a_i,a_j}$
is coincident with the span $\tuple{x \circ a_i, x \circ a_j}$.
\end{proof}

\begin{lemma}
\vlabel{pbselflimit}
If 
%\begin{center}
\begin{displaymath}
\begin{array}{cp{0.3cm}c    p{0.3cm}  c }
               & & \Rnode{Z}{Z} & &                                  \\ [1.3cm]
\Rnode{Y}{Y}   &&                               & & \Rnode{Yp}{Y'}   \\ [1.4cm]
               & & \Rnode{X}{X} & &   
\end{array}
\end{displaymath}
\ncarr{Z}{Y}
\blabel{f}
\ncarr{Z}{Yp}
\alabel{f'}
\ncbcdar{\pc{Y}{X}}{Y}{X}
\ncacdar{\pc{Y'}{X}}{Yp}{X}

%\end{center}
\noindent
is a pullback in a \ccatc 
then 
\begin{center}
\begin{equation}
\label{pbselflimitcone}
\begin{array}{cp{0.3cm}c    p{0.3cm}  c }
               & & \Rnode{Z}{Z} & &                                  \\ [1.0cm]
\Rnode{Y}{Y}   &&                               & & \Rnode{Yp}{Y'}  
\end{array}
\end{equation}
\ncarr{Z}{Y}
\blabel{f}
\ncarr{Z}{Yp}
\alabel{f'}
\end{center}
is a limit cone to its characteristic diagram in \ccat.
\end{lemma}
\begin{proof}
Suppose the characteristic diagram is 
\begin{center}
\begin{displaymath}
\begin{array}{cp{0.3cm}c    p{0.3cm}  c }
\Rnode{Y}{Y}   &&                               & & \Rnode{Yp}{Y'}   \\ [1.4cm]
               & & \Rnode{Xp}{X'} & &   
\end{array}
\end{displaymath}
\ncbcdar{\pc{Y}{X'}}{Y}{Xp}
\ncacdar{\pc{Y'}{X'}}{Yp}{Xp}
\end{center}
for some $X \leq X'$. Consider object H and morphisms $h$, $h'$ such that $h \circ \pc{Y}{X} = h' \circ \pc{Y}{X'}$. In this diagram:

\begin{center}
\begin{displaymath}
\begin{array}{cp{0.3cm}c    p{0.3cm}  c }
               & & \Rnode{Z}{Z}   & &                  \\ [1.4cm]
\Rnode{Y}{Y}   &&                 & & \Rnode{Yp}{Y'}   \\ [1.4cm]
               & & \Rnode{Xp}{X'} & &                  \\ [1.2cm]
							 & & \Rnode{X}{X}   & &   
\end{array}
\end{displaymath}
\ncarr{Z}{Y}
\blabel{f}
\ncarr{Z}{Yp}
\alabel{f'}
\nccdar{Y}{Xp}
\nccdar{Yp}{Xp}
\nccdar{Xp}{X}
\ncbcdar[-15]{\pc{Y}{X}}{Y}{X}
\ncacdar[15]{\pc{Y'}{X}}{Yp}{X}
\end{center}
the outer square is a pullback diagram and the triangles commute therefore the inner square is  a pullback diagram. Therefore (\ref{pbselflimitcone}) is a limit to its characteristic diagram as required.

\end{proof}
\begin{lemma}
\vlabel{pbdrilldown}
If 

\begin{center}
\begin{equation}
\label{pbdrilldownpullback}
\begin{array}{cp{0.3cm}c    p{0.3cm}  c }
               & & \Rnode{Z}{Z} & &                                  \\ [1.3cm]
\Rnode{Y}{Y}   &&                               & & \Rnode{Yp}{Y'}   \\ [1.4cm]
               & & \Rnode{W}{W} & &   
\end{array}
\end{equation}
\ncarr{Z}{Y}
\blabel{f}
\ncarr{Z}{Yp}
\alabel{f'}
\ncbcdar{\pc{Y}{W}}{Y}{W}
\ncacdar{\pc{Y'}{W}}{Yp}{W}
\end{center}

is a pullback in a \ccatc,
and if 
\begin{center}
\begin{displaymath}
\begin{array}{c p{0.4cm} c  }
\Rnode{Y}{Y} &&   \\ [1.4cm]
\begin{array}{cp{0cm}c   p{0.1cm}     c  }					
                             \Rnode{B1}{B_1}&   & ... & & \Rnode{Bm}{B_m}
	                      \end{array} 
	 && \Rnode{X}{X}                                              
\end{array} 
\end{displaymath}

\ncarr[5]{Y}{B1}
\blabel{ b_1}[.60][-2]
\ncarr[5]{Y}{Bm}
\blabel{b_m}[.60][-3]
\nccdar{Y}{X}
\alabel{\pc{Y}{X}}[.60][2]
\end{center}
is a limit cone to its characteristic diagram in \ccat  for some $X$, $W \leq X \leq Y$, then  
\begin{center}
\begin{equation}
\label{pbdrilldowncone}
\begin{array}{c p{0.4cm} c p{0.4cm} c }
\Rnode{Z}{Z} && &&      \\ [2.6cm]
\Rnode{X}{X}&& \begin{array}{cp{0cm}c   p{0.1cm}     c  }					
                             \Rnode{B1}{B_1}&   & ... & & \Rnode{Bm}{B_m}
	                      \end{array} 
	 && \Rnode{Yp}{Y'}                                              
\end{array} 
\end{equation}
\ncarr{Z}{X}
\blabel{f \circ\pc{Y}{X}}[.60]
\ncarr[5]{Z}{B1}
\blabel{f\circ b_1}[.60][-2]
\ncarr[5]{Z}{Bm}
\blabel{f\circ b_m}[.60][-3]
\ncarr[5]{Z}{Yp}
\alabel{f'}[.60]
\end{center}
is a limit cone to its characteristic diagram in \ccat.
\end{lemma}

\begin{proof}
We have this situation

\begin{center}
\begin{displaymath}
\begin{array}{c c p{1.0cm} c p{0.2cm}c}
  \Rnode{Z}{Z} & &                       & &  &                  \\ [1.6cm]
  \Rnode{Y}{Y} & &                       & &  & \Rnode{Yp}{Y'}   \\ [0.7cm]
	             &  \Rnode{X}{X} & &  &                  \\ [0.7cm]
	             & &                       & \Rnode{W}{W} & &      \\
	 \begin{array}{cp{0cm}c   p{0cm}     c  }					
   \Rnode{B1}{B_1}&   & ... & & \Rnode{Bm}{B_m}
	 \end{array} 
	 & & & &                                                
\end{array} 
\end{displaymath}
\ncarr{Z}{Y}
\blabel{f}
\ncaarr{f'}{Z}{Yp}
\nccdar{Y}{X}
\nccdar{X}{W}
\jcbarr{b_1}{Y}{B1}
\jcbarr{b_m}{Y}{Bm}
\nccdar{Yp}{W}
\end{center}


Suppose there is an object $D$ and a cone 
\begin{center}
\begin{displaymath}
\begin{array}{c c p{0.4cm} c p{0.4cm} c }
\Rnode{D}{D}&  && &&      \\ [2.6cm]
      & \Rnode{X}{X}&& \begin{array}{cp{0cm}c   p{0.1cm}     c  }					
                             \Rnode{B1}{B_1}&   & ... & & \Rnode{Bm}{B_m}
	                      \end{array} 
	 && \Rnode{Yp}{Y'}                                              
\end{array} 
\end{displaymath}
\ncarr{D}{X}
\blabel{g_0}
\ncarr[5]{D}{B1}
\blabel{g_1}
\ncarr[5]{D}{Bm}
\blabel{g_m}
\ncarr[5]{D}{Yp}
\alabel{g_{m+1}}
\end{center}
to the characteristic diagram of  (\ref{pbdrilldowncone}).

From this it follows that $\tuple{g_0,...g_m}$ is a cone to the characteristic diagram of
$\tuple{f \circ \pc{Y}{X}, f \circ b_1, ... f \circ b_m}$.
Therefore by lemma \ref{conepass} $\tuple{g_0,...g_m}$ is also a cone to the characteristic
diagram of $\tuple{\pc{Y}{X}, b_1, ... b_m}$. Since $\tuple{\pc{Y}{X}, b_1, ... b_m}$ is a limit cone it follows that there exists a unique $g:D \morph Y$ such that $g \circ \pc{Y}{X}=g_0$ and , for each $j$, $1 \leq j \leq m$, $g \circ b_j=g_j$.

\noindent Since (\ref{pbdrilldownpullback})
is a pullback diagram then, in particular, it commutes.Therefore cospan 


\begin{center}
\begin{equation}
\label{pbdrilldowncospan}
\begin{array}{cp{0.1cm}cp{0.1cm} c}
\Rnode{X}{X}& &                & & \Rnode{Yp}{Y'} \\ [0.4cm]
            & &\Rnode{W}{W}
\end{array}
\end{equation}
\nccdar{X}{W}
\nccdar{Yp}{W}
\end{center}
is a coincident  to span 
\begin{center}
\begin{equation}
\begin{array}{cp{0.1cm}cp{0.1cm} c}
            & &\Rnode{Z}{Z}                  \\ [0.4cm]
\Rnode{X}{X}& &                & & \Rnode{Yp}{Y'} 
\end{array}
\end{equation}
\jcbarr{f \circ \pc{Y}{X}}{Z}{X}
\ncaarr{f'}{Z}{Yp}
\end{center}

Therefore (\ref{pbdrilldowncospan}) is in the characteristic diagram of
$\tuple{f \circ \pc{Y}{X}, f \circ b_1, ... f \circ b_m,f'}$ and therefore from the initial assumption that $\tuple{g_0,...g_m, g_{m+1}}$ is a cone to this characteristic diagram it follows that diagram 
\begin{center}
\begin{displaymath}
\begin{array}{c c p{1.0cm} c p{0.2cm}c}
  \Rnode{D}{D} & &                       & &  &                  \\ [1.6cm]
               & &                       & &  & \Rnode{Yp}{Y'}   \\ [0.7cm]
	             &  \Rnode{X}{X} & &  &                  \\ [0.7cm]
	             & &                       & \Rnode{W}{W} & & 
\end{array} 
\end{displaymath}
\ncaarr{g_{m+1}}{D}{Yp}
\ncaarr{g_0}{D}{X}
\nccdar{X}{W}
\nccdar{Yp}{W}
\end{center}
commutes. But $g_0 = g \circ \pc{Y}{X}$ and therefore diagram

\begin{center}
\begin{displaymath}
\begin{array}{c c p{1.0cm} c p{0.2cm}c}
  \Rnode{D}{D} & &                       & &  &                  \\ [1.6cm]
  \Rnode{Y}{Y} & &                       & &  & \Rnode{Yp}{Y'}   \\ [0.7cm]
	             &  \Rnode{X}{X} & &  &                  \\ [0.7cm]
	             & &                       & \Rnode{W}{W} & & 
\end{array} 
\end{displaymath}
\ncaarr{g_{m+1}}{D}{Yp}
\ncarr{D}{Y}
\blabel{g}
\nccdar{Y}{X}
\nccdar{X}{W}
\nccdar{Yp}{W}
\end{center}

commutes.

Because (\ref{pbdrilldownpullback}) is a pullback diagram  it follows that there is a unique $h:D \morph Z$
such that $h \circ f=g$ and $h \circ f'=g_{m+1}$.
\noindent
Now we have $h \circ f \circ \pc{Y}{X}= g \circ \pc{Y}{X}=g_0$
and $h \circ f \circ b_j = g \circ b_j = g_j$ as required.

\noindent
Suppose also there is a $h' :D \morph Z$ such that
$h' \circ f' =g_{m+1}$
and
$h' \circ f\circ \pc{Y}{X}=g_0$
and 
$h' \circ f \circ b_j=g_j$.
then it follows first that $h' \circ f=g$ and then from this that $h'=h$. 
\end{proof}


\begin{lemma}
\vlabel{drilldowntwo}
If 
\begin{center}
\begin{equation}
\label{ddtwopb}
\begin{array}{cp{0.3cm}c    p{0.3cm}  c }
               & & \Rnode{Z}{Z} & &                                  \\ [1.3cm]
\Rnode{Y}{Y}   &&                               & & \Rnode{Yp}{Y'}   \\ [1.4cm]
               & & \Rnode{W}{W} & &   
\end{array}
\end{equation}
\ncarr{Z}{Y}
\blabel{f}
\ncarr{Z}{Yp}
\alabel{f'}
\ncbcdar{\pc{Y}{W}}{Y}{W}
\ncacdar{\pc{Y'}{W}}{Yp}{W}
\end{center}

\noindent
is a pullback in a \ccatc,
and if 
\begin{center}
\begin{equation}
\label{ddtwoYlimit}
\begin{array}{c p{0.4cm} l  }
 && \Rnode{Y}{Y}  \\ [1.4cm]
\Rnode{X}{X} &&
\begin{array}{cp{0cm}c   p{0.1cm}     c  }					
                             \Rnode{B1}{B_1}&   & ... & & \Rnode{Bm}{B_{m}}
	                      \end{array}           
\end{array} 
\end{equation}
\nccdar{Y}{X}
\blabel{\pc{Y}{X}}[.70][-2]
\ncarr[5]{Y}{B1}
\alabel{b_1}[.70][1]
\ncarr[5]{Y}{Bm}
\alabel{b_{m}}[.60][0]
\end{center}

\noindent
and
\begin{center}
\begin{equation}
\label{ddtwoWlimit}
\begin{array}{c p{0.4cm} l  }
 && \Rnode{W}{W}  \\ [1.4cm]
\Rnode{V}{V} &&
\begin{array}{cp{0cm}c   p{0.1cm}     c  }					
                             \Rnode{A1}{A_1}&   & ... & & \Rnode{An}{A_n}
	                      \end{array}         
\end{array} 
\end{equation}
\nccdar{W}{V}
\blabel{\pc{W}{V}}[.70][-2]
\ncarr[5]{W}{A1}
\alabel{a_1}[.70][1]
\ncarr[5]{W}{An}
\alabel{a_n}[.60][0]
\end{center}

\noindent
and 
\begin{center}
\begin{equation}
\label{ddtwoYprimelimit}
\begin{array}{c p{0.4cm} l  }
 && \Rnode{Yp}{Y'}  \\ [1.4cm]
\Rnode{V}{V} &&
\begin{array}{cp{0cm}c   p{0.1cm}     c  }					
                             \Rnode{Bp1}{B'_1}&   & ... & & \Rnode{Bpm}{B'_{m'}}
	                      \end{array}           
\end{array} 
\end{equation}
\nccdar{Yp}{V}
\blabel{\pc{Y'}{V}}[.70][-2]
\ncarr[5]{Yp}{Bp1}
\alabel{b'_1}[.70][1]
\ncarr[5]{Yp}{Bpm}
\alabel{b'_{m'}}[.60][0]
\end{center}

\noindent
are all limit cones to their characteristic diagrams in \ccat  
for some objects $X$ and $W$, $W < X < Y$ and $W < Y'$ and some $V$, $V < W$, 
and such that for all $i$, $1 \leq i \leq n$, there exists $j'_i$, $1 \leq j'_i \leq m'$, such that $A_i \leq B'_{j'_i}$ and such that

\begin{equation}
\label {ddtwobpjpai}
b'_{j'_i} \circ \pc{B'_{j'_i}}{A_i} = \pc{Y'}{W} \circ a_i
\end{equation}


 then  
\begin{center}
\begin{equation}
\label{ddtwolimitcone}
\begin{array}{c p{0.6cm} c p{0.75cm} l p{0.4cm} c }
&& &&  \Rnode{Z}{Z}  && \\ [2.6cm]
\Rnode{X}{X}&& \begin{array}{cp{0cm}c   p{0.5cm}     c  }					
                             \Rnode{B1}{B_1}&   & ... & & \Rnode{Bm}{B_m}
	                      \end{array} 
	 && \begin{array}{cp{0cm}c   p{0.5cm}     c  }					
                             \Rnode{A1}{A_1}&   & ... & & \Rnode{An}{A_n}
	                      \end{array}
	 && \begin{array}{cp{0cm}c   p{0.1cm}     c  }					
                             \Rnode{Bp1}{B'_1}&   & ... & & \Rnode{Bpm}{B'_{m'}}
	                      \end{array}												
\end{array} 
\end{equation}
\ncarr[-10]{Z}{X}
\blabel{f \circ\pc{Y}{X}}[.55]
\ncarr[-5]{Z}{B1}
\blabel{f\circ b_1}[.60][0]
\ncarr[-5]{Z}{Bm}
\blabel{f\circ b_m}[.75][0]
\ncarr[5]{Z}{A1}
\blabel{f \circ \pc{Y}{W} \circ a_1}[.85][-1]
\ncarr[5]{Z}{An}
\blabel{f \circ \pc{Y}{W} \circ a_n}[.75][-2]
\ncarr[5]{Z}{Bp1}
\alabel{f' \circ b'_1}[.75][3]
\ncarr[10]{Z}{Bpm}
\alabel{f' \circ b'_{m'}}[.65][3]
\end{center}
is a limit cone to its characteristic diagram in \ccat.

\end{lemma}
\newpage
\begin{proof} % of lemma drilldown two i.e ddtwo
Suppose
\begin{equation}
\label{ddtwoDcone}
\begin{array}{c p{0.6cm} c p{0.75cm} l p{0.4cm} c }
&& &&  \Rnode{D}{D}  && \\ [2.6cm]
\Rnode{X}{X}&& \begin{array}{cp{0cm}c   p{0.5cm}     c  }					
                             \Rnode{B1}{B_1}&   & ... & & \Rnode{Bm}{B_m}
	                      \end{array} 
	 && \begin{array}{cp{0cm}c   p{0.5cm}     c  }					
                             \Rnode{A1}{A_1}&   & ... & & \Rnode{An}{A_n}
	                      \end{array}
	 && \begin{array}{cp{0cm}c   p{0.1cm}     c  }					
                             \Rnode{Bp1}{B'_1}&   & ... & & \Rnode{Bpm}{B'_{m'}}
	                      \end{array}												
\end{array} 
\end{equation}
\ncarr[-10]{D}{X}
\blabel{g_0}[.55]
\ncarr[-5]{D}{B1}
\blabel{g_1}[.60][0]
\ncarr[-5]{D}{Bm}
\blabel{g_m'}[.75][0]
\ncarr[5]{D}{A1}
\blabel{g''_1}[.85][-1]
\ncarr[5]{D}{An}
\blabel{g''_n}[.75][-2]
\ncarr[5]{D}{Bp1}
\alabel{g'_1}[.75][3]
\ncarr[10]{D}{Bpm}
\alabel{g'_{m'}}[.65][3]

\noindent
is a cone to the characteristic diagram of (\ref{ddtwolimitcone}).
We need show that there is a unique $h:D \morph Z$ such that

\begin{equation}
\label{ddtwohfactorg0}
h \circ f \circ \pc{Y}{X} = g_0
\end{equation}
and for each $j$, $1 \leq j \leq m$,
\begin{equation}
\label{ddtwohfactorgj}
h \circ f \circ b_j = g_j
\end{equation}
and for each $i$, $1 \leq i \leq n$,
\begin{equation}
\label{ddtwohfactorgppi}
h \circ f \circ \pc{Y}{W} \circ a_i = g''_i
\end{equation}
and for each $j'$, $1 \leq j' \leq m'$,
\begin{equation}
\label{ddtwohfactorgpj}
h \circ f' \circ b'_{j'} = g'_{j'}
\end{equation}

\noindent
By lemma \ref{conepass}, $\tuple {g_1,...g_m}$ is a cone to the characteristic diagram of 
diagram (\ref{ddtwoYprimelimit}). Therefore there exists a unique morphism $g: D \morph Y$, such that:
\begin{equation}
\label{ddtwogfactorg0}
g \circ \pc{Y}{X} = g_0
\end{equation}
and for each $j$, $1 \leq j \leq m$,
\begin{equation}
\label{ddtwofactorgj}
g \circ b_j = g_j
\end{equation}

\noindent
Next we show that $\tuple{g_0 \circ \pc{X}{V},g'_1,...g'_{m'}}$ is a cone to the characteristic diagram of cone (\ref{ddtwoYprimelimit}). The only non-trivial part of this is to show that if for some $j'$ and for some object $U$, the diagram
\begin{center}
\begin{equation}
\label{ddtwoYpdiamond}
\begin{array}{cp{0.3cm}c    p{0.3cm}  c }
               & & \Rnode{Yp}{Y'} & &                                  \\ [1.3cm]
\Rnode{V}{V}   &&                               & & \Rnode{Bpj}{B'_{j'}}   \\ [1.4cm]
               & & \Rnode{U}{U} & &   
\end{array}
\end{equation}
\ncarr{Yp}{V}
\blabel{\pc{Y'}{V}}
\ncarr{Yp}{Bpj}
\alabel{b'_{j'}}
\ncbcdar{\pc{V}{U}}{V}{U}
\ncacdar{\pc{B'_{j'}}{U}}{Bpj}{U}
\end{center}

commutes
then the diagram

\begin{center}
\begin{equation}
\label{ddtwoDdiamond}
\begin{array}{cp{0.3cm}c    p{0.3cm}  c }
               & & \Rnode{D}{D} & &                                  \\ [1.3cm]
\Rnode{V}{V}   &&                               & & \Rnode{Bpj}{B'_{j'}}   \\ [1.4cm]
               & & \Rnode{U}{U} & &   
\end{array}
\end{equation}
\ncarr{D}{V}
\blabel{g_0 \circ \pc{X}{V}}
\ncarr{D}{Bpj}
\alabel{g'_{j'}}
\ncbcdar{\pc{V}{U}}{V}{U}
\ncacdar{\pc{B'_{j'}}{U}}{Bpj}{U}
\end{center}

commutes. So assume  diagram (\ref{ddtwoYpdiamond}) commutes, then
\begin{align*}
f' \circ b'_j \circ \pc{B'_{j'}}{U}
            &= f' \circ \pc{Y'}{V} \circ \pc{V}{U} & & \mbox{by }(\ref{ddtwoYpdiamond}) \\
            &= f' \circ \pc{Y'}{W} \circ \pc{W}{U} & & \mbox{by associativity}         \\
						&= f \circ \pc{Y}{W} \circ \pc{W}{U} & & \mbox{since (\ref{ddtwopb}) commutes} \\
						&= f \circ \pc{Y}{X} \circ \pc{X}{U} & & \mbox{by associativity} 
\end{align*}
Therefore
\begin{center}
\begin{equation}
%\label{pbdrilldowncospan}
\begin{array}{cp{0.1cm}cp{0.1cm} c}
\Rnode{X}{X}& &                & & \Rnode{Bpj}{B'_{j'}} \\ [0.4cm]
            & &\Rnode{U}{U}
\end{array}
\end{equation}
\nccdar{X}{U}
\blabel{\pc{X}{U}}
\nccdar{Bpj}{U}
\alabel{\pc{B'_{j'}}{U}}
\end{center}
is a coincident  to span 
\begin{center}
\begin{equation}
\begin{array}{cp{0.1cm}cp{0.1cm} c}
            & &\Rnode{Z}{Z}                  \\ [0.4cm]
\Rnode{X}{X}& &                & & \Rnode{Bpj}{b'_{j'}} 
\end{array}
\end{equation}
\nccdar{Z}{X}
\blabel{f \circ \pc{Y}{X}}
\nccdar{Z}{Bpj}
\alabel{f' \circ b'_{j'}}
\end{center}

\noindent
Now it follows that diagram (\ref{ddtwoDdiamond}) commutes from the initial assumption that (\ref{ddtwoDcone}) is a cone to the characteristic diagram of (\ref{ddtwolimitcone}).
We have established
that $\tuple{g_0 \circ \pc{X}{V},g'_1,...g'_{m'}}$ is a cone to the characteristic diagram of cone (\ref{ddtwoYprimelimit}) and so  it follows from this 
that there exists a unique morphism $g': D \morph Y'$ such that 
\begin{equation}
\label{ddtwogpfactorg0}
g' \circ \pc{Y'}{V} = g_0 \circ \pc{X}{V}
\end{equation}
and such that for each $j'$, $1 \leq j' \leq m'$,
\begin{equation}
\label{ddtwofactorgpj}
g' \circ b'_{j'} = g'_{j'}
\end{equation}

\noindent Now we show that
\begin{equation}
\label{ddtwoggpcone}
g \circ \pc{Y}{W} = g' \circ \pc{Y'}{W}
\end{equation}
Because (\ref{ddtwoWlimit}) is a limit cone
it suffices to show that
\begin{equation}
\label{ddtwoggpp}
g \circ \pc{Y}{W} \circ \pc{W}{V} = g' \circ \pc{Y'}{W} \circ \pc{W}{V}
\end{equation}
and for each $i$, $1 \leq i \leq n$,
\begin{equation}
\label{ddtwoggpa}
g \circ \pc{Y}{W} \circ a_i = g' \circ \pc{Y'}{W} \circ a_i
\end{equation}

\noindent
(\ref{ddtwoggpp})  is proved as follows:

\begin{align*}
g \circ \pc{Y}{W} \circ \pc{W}{V} 
      &= g \circ \pc{Y}{X} \circ \pc{X}{V}   && \mbox{by associativity} \\
      &= g_0 \circ \pc{X}{V}                 && \mbox{by (\ref{ddtwogfactorg0})} \\
		  &= g' \circ \pc{Y'}{V}                 && \mbox{by (\ref{ddtwogpfactorg0})} \\
			&= g' \circ \pc{Y'}{W} \circ \pc{W}{V} && \mbox{by associativity} \\
\end{align*}

\noindent
Condition (\ref{ddtwobpjpai}) implies that, for each $i$, $1 \leq i \leq n$,
\begin{center}
\begin{equation}
%\label{pbdrilldowncospan}
\begin{array}{cp{0.1cm}cp{0.1cm} c}
\Rnode{Bpjpi}{B'_{j'_i}}& &                & & \Rnode{Ai}{A_i} \\ [0.4cm]
            & &\Rnode{AiBottom}{A_i}
\end{array}
\end{equation}
\nccdar{Bpjpi}{AiBottom}
\blabel{\pc{B;_{j'_i}}{A_i}}
\nccdar{Ai}{AiBottom}
\alabel{id_{A_i}}
\end{center}
is a coincident  to span 
\begin{center}
\begin{equation}
\begin{array}{cp{0.1cm}cp{0.1cm} c}
            & &\Rnode{Z}{Z}                  \\ [0.4cm]
\Rnode{Bpjpi}{B'_{j'_i}}& &                & & \Rnode{Ai}{A_i} 
\end{array}
\end{equation}
\nccdar{Z}{Bpjpi}
\blabel{f \circ b'_{j'_i}}
\nccdar{Z}{Ai}
\alabel{f \circ \pc{Y}{W} \circ a_i}
\end{center}
Since (\ref{ddtwoDcone}) is a cone to the characteristic diagram
of (\ref{ddtwolimitcone}) it follows that

\iffalse
\begin{center}
\begin{equation}
\label{ddtwogjigppi}
\begin{array}{cp{0.3cm}c    p{0.3cm}  c }
               & & \Rnode{D}{D} & &                                  \\ [1.3cm]
\Rnode{Bji}{B_{j_i}}   &&                          & & \Rnode{Ai}{A_i}   \\ [1.4cm]
               & & \Rnode{AiBottom}{A_i} & &   
\end{array}
\end{equation}
\ncarr{D}{Bji}
\blabel{g_{j_i}}
\ncarr{D}{Ai}
\alabel{g''_i}
\nccdar{Bji}{AiBottom}
\blabel{\pc{B_{j_i}}{A_i}}
\nccdar{Ai}{AiBottom}
\alabel{id_{A_i}}
\end{center}
commutes. By a similar argument it also follows that
\fi

\begin{center}
\begin{equation}
\label{ddtwogpjpigppi}
\begin{array}{cp{0.3cm}c    p{0.3cm}  c }
               & & \Rnode{D}{D} & &                                  \\ [1.3cm]
\Rnode{Bpji}{B'_{j'_i}}   &&                   & & \Rnode{Ai}{A_i}   \\ [1.4cm]
               & & \Rnode{AiBottom}{A_i} & &   
\end{array}
\end{equation}
\ncarr{D}{Bpji}
\blabel{g'_{j'_i}}
\ncarr{D}{Ai}
\alabel{g''_i}
\nccdar{Bpji}{AiBottom}
\blabel{\pc{B'_{j'_i}}{A_i}}
\nccdar{Ai}{AiBottom}
\alabel{id_{A_i}}
\end{center}
 commutes.

\noindent
Now we prove (\ref{ddtwoggpa})  by showing that both lhs and rhs of (\ref{ddtwoggpa}) 
simplify to $g''_i$. 
First note that this diagram

\begin{center}
\begin{equation*}
\begin{array}{cp{0.3cm}c    p{0.3cm}  c }
               & & \Rnode{Z}{Z} & &                                  \\ [1.3cm]
\Rnode{X}{X}   &&                   & & \Rnode{Ai}{A_i}   \\ [1.4cm]
               & & \Rnode{AiBottom}{A_i} & &   
\end{array}
\end{equation*}
\ncarr{Z}{X}
\blabel{f \circ a_i}
\ncarr{Z}{Ai}
\alabel{f \circ \pc{Y}{W} \circ a_i}
\nccdar{X}{AiBottom}
\blabel{\pc{W}{X} \circ a_i}
\nccdar{Ai}{AiBottom}
\alabel{id_{A_i}}
\end{center}
 commutes, trivially, and therefore that
\begin{center}
\begin{equation*}
\begin{array}{cp{0.1cm}cp{0.1cm} c}
\Rnode{X}{X}& &                & & \Rnode{Ai}{A_i} \\ [0.4cm]
            & &\Rnode{AiBottom}{A_i}
\end{array}
\end{equation*}
\nccdar{X}{AiBottom}
\blabel{\pc{X}{W} \circ a_i}
\nccdar{Ai}{AiBottom}
\alabel{id_{A_i}}
\end{center}

is in the characteristic diagram of (\ref{ddtwolimitcone}) and therefore
\begin{center}
\begin{equation}
\label{ddtwogzeroaigppi}
\begin{array}{cp{0.3cm}c    p{0.3cm}  c }
               & & \Rnode{D}{D} & &                                  \\ [1.3cm]
\Rnode{X}{X}   &&                   & & \Rnode{Ai}{A_i}   \\ [1.4cm]
               & & \Rnode{AiBottom}{A_i} & &   
\end{array}
\end{equation}
\ncarr{D}{X}
\blabel{g_0}
\ncarr{D}{Ai}
\alabel{g''_i}
\nccdar{X}{AiBottom}
\blabel{\pc{X}{W} \circ a_i}
\nccdar{Ai}{AiBottom}
\alabel{id_{A_i}}
\end{center}
 commutes.

\noindent
Now we show that
\begin{equation}
\label{ddtwogaigpp}
g \circ \pc{Y}{W} \circ a_i=g''_i
\end{equation}
as follows
\begin{align*}
g \circ \pc{Y}{W} \circ a_i                      
     &= g \circ \pc{Y}{X} \circ \pc{X}{W} \circ a_i  && \mbox{by transitivity}  \\
     &= g_0 \circ \pc{X}{W} \circ a_i          && \mbox{by (\ref{ddtwogfactorg0})}  \\
		&=g''_i                                      && \mbox{by (\ref{ddtwogzeroaigppi})}  \\
\end{align*}

\noindent
whereas
\begin{equation}
\label{ddtwogpaigpp}
g \circ \pc{Y}{W} \circ a_i=g''_i
\end{equation}
is shown as follows:

\begin{align*}
g' \circ \pc{Y}{W} \circ a_i                      
     &= g' \circ b'_{j'_i} \circ \pc{B'_{j'_i}}{A_i} && \mbox{by (\ref{ddtwobpjpai})}  \\
     &= g'_{j'_i} \circ \pc{B'_{j'_i}}{A_i}          && \mbox{by (\ref{ddtwofactorgpj})}  \\
		&=g''_i                                          && \mbox{by (\ref{ddtwogpjpigppi})}  \\
\end{align*}


\noindent
Now, using (\ref{ddtwoggpp}) and (\ref{ddtwoggpa}), we can define a unique $h:D \morph Z$ such that

\begin{equation}
  \label{ddtwohfEQg}
	h \circ f =g
\end{equation}

and

\begin{equation}
  \label{ddtwohfpEQgp}
	h \circ f' =g'
\end{equation}


\noindent
We show that, as required, equations (\ref{ddtwohfactorg0}) - (\ref{ddtwohfactorgpj}) hold of such an $h$.

\noindent
Equation (\ref{ddtwohfactorg0}) follows because
\begin{align*}
h \circ f \circ \pc{Y}{X} & = g \circ \pc{Y}{X} && \mbox{by (\ref{ddtwohfEQg})} \\
                          & = g_0               && \mbox{by (\ref{ddtwogfactorg0})}  
\end{align*}

\noindent
and equation (\ref{ddtwohfactorgj}) since
\begin{align*}
h \circ f \circ b_j       &= g \circ b_j        && \mbox{by (\ref{ddtwohfEQg})} \\
                          &= g_j                && \mbox{by (\ref{ddtwofactorgj})} 
\end{align*}

\noindent
Equation (\ref{ddtwohfactorgppi}) follows since
\begin{align*}
h \circ f \circ \pc{Y}{W} \circ a_i
            &= g \circ \pc{Y}{W} \circ a_i      && \mbox{by (\ref{ddtwohfEQg})} \\
						&= g''_i                            && \mbox{by (\ref{ddtwogaigpp})}
\end{align*}

\noindent
and equation (\ref{ddtwohfactorgpj}) since
\begin{align*}
h \circ f' \circ b'_{j'}       &= g' \circ b'_{j'}  && \mbox{by (\ref{ddtwohfpEQgp})} \\
                          &= g'_{j'}                && \mbox{by (\ref{ddtwofactorgpj})} 
\end{align*}


\noindent
Finally we need to show the uniqueness of $h$. Suppose the that $h': D \morph Z$ such that

\begin{equation}
\label{ddtwohpfactorg0}
h' \circ f \circ \pc{Y}{X} = g_0
\end{equation}
and for each $j$, $1 \leq j \leq m$,
\begin{equation}
\label{ddtwohpfactorgj}
h' \circ f \circ b_j = g_j
\end{equation}
and for each $i$, $1 \leq i \leq n$,
\begin{equation}
\label{ddtwohpfactorgppi}
h' \circ f \circ \pc{Y}{W} \circ a_i = g''_i
\end{equation}
 and for each $j'$, $1 \leq j' \leq m'$,
\begin{equation}
\label{ddtwohpfactorgpj}
h' \circ f' \circ b'_{j'} = g'_{j'}
\end{equation}

\noindent
First we establish that
\begin{equation}
\label{ddtwohpfppcg}
h' \circ f' \circ \pc{Y'}{V}  =  g_0 \circ \pc{X}{V}
\end{equation}
\noindent
This follows because
\begin{align*}
h' \circ f' \circ \pc{Y'}{V} 
&= h' \circ f' \circ \pc{Y'}{W} \circ \pc{W}{V} && \mbox{by associativity} \\
&= h' \circ f \circ \pc{Y}{W} \circ \pc{W}{V} && \mbox{because (\ref{ddtwopb}) commutes} \\
&= h' \circ f \circ \pc{Y}{X} \circ \pc{X}{V} && \mbox{by associativity} \\
&= g_0 \circ \pc{X}{V}                        && \mbox{by (\ref{ddtwohpfactorg0})}
\end{align*}

\noindent
Now we can show that
\begin{equation}
\label{ddtwohpfg}
h' \circ f  =  g
\end{equation}
because $g$ is the unique morphism such that (\ref{ddtwogfactorg0}) and
(\ref{ddtwofactorgj}) and these hold of $h' \circ f$ 
by (\ref{ddtwohpfactorg0}) and (\ref{ddtwohpfactorgj}).
\noindent
Similarly we can show that
\begin{equation}
\label{ddtwohpfpgp}
h' \circ f'  =  g'
\end{equation}
because $g'$ is the unique morphism such that (\ref{ddtwogpfactorg0}) and (\ref{ddtwofactorgpj}) and these hold of $h' \circ f'$ by (\ref{ddtwohpfppcg}) and (\ref{ddtwohpfactorgpj}).
\noindent
Finally, because we have shown that (\ref{ddtwohpfg}) and (\ref{ddtwohpfpgp}), because $h$ is the unique morphism 
such that (\ref{ddtwohfEQg}) and (\ref{ddtwohfpEQgp}) then
it follows that $h=h'$, as required.
\end{proof} % end of drilldown 2 lemma labelled ddtwo

\section{The representation theorem for non-prime objects of contextual categories.}
\begin{lemma}
\vlabel{taketwo}
if $Z$ is an object of a contextual category \ccat then either $Z$ is prime or else 
there exists prime objects $B_1,...B_m$, for some $m > 1$, and morphisms $b_j : Z \morph B_j$ such that

\begin{center}
\begin{displaymath}
\begin{array}{cp{0.3cm}c         p{0.3cm}  c p{0.2cm} c}
               & & \Rnode{Z}{Z} & &     & &  \\ [1.4cm]
\Rnode{tildeZ}{\pbase{Z}}& &\Rnode{B1}{B_1}& & ... & &\Rnode{Bm}{B_m}
\end{array}
\end{displaymath}
\ncbcdar{\pc{Z}{\pbase{Z}}}{Z}{tildeZ}
\ncaarr{b_1}{Z}{B1}
\ncaarr{b_m}{Z}{Bm}
\end{center}
\noindent
is a limit cone to its characteristic diagram within the subcategory of dependencies of \ccat and such that if for some $X$,
 $\pbase{Z} \leq X < Z$, and for some prime objects $A_1,...A_n$ and morphisms $a_1,...a_n$, such that the diagram
\begin{center}
\begin{displaymath}
\begin{array}{cp{0.3cm}c         p{0.3cm}  c p{0.2cm} c}
               & & \Rnode{X}{X} & &     & &  \\ [1.4cm]
\Rnode{tildeZ}{\pbase{Z}}& &\Rnode{A1}{A_1}& & ... & &\Rnode{An}{A_n}
\end{array}
\end{displaymath}
\ncbcdar{\pc{X}{\pbase{Z}}}{X}{tildeZ}
\ncaarr{a_1}{X}{A1}
\ncaarr{a_n}{X}{An}
\end{center}
is a limit cone to its characteristic diagram then for each $i$, $1 \leq i \leq n$, there exists $j_i$, $1 \leq j_i \leq m$, such that
$A_i \leq B_{j_i}$ and
\begin{center}
\begin{displaymath}
\begin{array}{cp{0.3cm}c         p{0.3cm}  c p{0.2cm} c}
\Rnode{Z}{Z} & &     & & & &  \\ [1.4cm]
\Rnode{X}{X}& &\Rnode{Bji}{B_{j_i}}& &    & & \\[1.4cm]
            & &\Rnode{Ai}{A_i}     & &    & &
\end{array}
\end{displaymath}
\ncbcdar{\pc{Z}{X}}{Z}{X}
\ncaarr{b_{j_i}}{Z}{Bji}
\ncacdar{\pc{B_{j_i}}{A_i}}{Bji}{Ai}
\jcbarr{a_i}{X}{Ai}
\end{center}

commutes.
\end{lemma}
\begin{proof}
Inductive step. Assume  that the lemma holds of all objects with a height less than the height of $Z$. Suppose $Z=\crossx{Y}{Y'}{W}$. First note that in this situation 
$\pbase{Z}=\pbase{Y}$. We show by cases that required limit cone exists.
\begin{enumerate}[(i)]
\item{Y, Y' and W are all prime objects}
Because $W$ is prime it follows that $W \leq  \pbase{Y}$. 
This is lemma \ref{pbselflimit}.


\item {Y is decomposable and W and Y' are prime}
Suppose as the inductive hypothesis that the following is a limit cone to its characteristic diagram 
\begin{center}
\begin{displaymath}
\begin{array}{c p{0.4cm} c  }
\Rnode{Y}{Y} &&   \\ [1.4cm]
\begin{array}{cp{0cm}c   p{0.1cm}     c  }					
                             \Rnode{B1}{B_1}&   & ... & & \Rnode{Bm}{B_m}
	                      \end{array} 
	 && \Rnode{tY}{\pbase{Y}}                                              
\end{array} 
\end{displaymath}

\ncarr[5]{Y}{B1}
\blabel{ b_1}[.60][-2]
\ncarr[5]{Y}{Bm}
\blabel{b_m}[.60][-3]
\nccdar{Y}{tY}
\alabel{\pc{Y}{\pbase{Y}}}[.60][2]
\end{center}


It follows from  lemma \ref{pbdrilldown}and since $\pbase{Z}=\pbase{Y}$  that

\begin{center}
\begin{displaymath}
\begin{array}{c p{0.4cm} c  }
\Rnode{Z}{Z} &&   \\ [1.6cm]
\begin{array}{c  p{0.1cm}c   p{0.1cm}c  p{1.2cm}c }					
                             \Rnode{B1}{B_1}&& ... & & \Rnode{Bm}{B_m} && \Rnode{Yp}{Y'}
	                      \end{array} 
	 && \Rnode{tZ}{\pbase{Z}}                                              
\end{array} 
\end{displaymath}

\ncarr[5]{Z}{B1}
\blabel{ \pc{Z}{Y} \circ b_1}[.70][0]
\ncarr[5]{Z}{Bm}
\blabel{\pc{Z}{Y} \circ b_m}[.70][0]
\ncarr[5]{Z}{Yp}
\blabel{q(\pc{Y}{W},Y')}[.70][-1]
\nccdar{Z}{tZ}
\alabel{\pc{Z}{\pbase{Z}}}[.70][1]
\end{center}

is a limit cone to its characteristic diagram in \ccat, 
as required.

\item{Y, Y' and W are decomposable}

\begin{enumerate} [(a)]
\item $W < \pbase{Y}$ and $W < \pbase{Y'}$
\begin{center}
\begin{displaymath}
\begin{array}{c c c c c}
  \Rnode{Z}{Z} & &              &                               &              \\ [1.4cm]
  \Rnode{Y}{Y} & &              &                               &\Rnode{Yp}{Y'}\\ [1.4cm]
	\hspace{2.8cm}\Rnode{tY}{\pbase{Y}}&&&&\Rnode{tYp}{\pbase{Y'}}\hspace{2.6cm}\Rnode{dummy}{}\\ [1.0cm]
	             & & \Rnode{W}{W} &                               &              \\ [1.0cm]
               & & \Rnode{tW}{\pbase{W}} &                      &              \\ [0.2cm]
	 \begin{array}{cp{0.3cm}c         p{0.3cm}  c}					
   \Rnode{B1}{B_1}&  ... & \Rnode{Bji}{B_{j_i}} & ... & \Rnode{Bm}{B_m}
	 \end{array} 
	 & & & &
	\begin{array}{c c c c c}					
   \Rnode{Bp1}{B'_1}& ... & \Rnode{Bpji}{B'_{j'_i}}&  ... & \Rnode{Bpm}{B'_m}
	 \end{array}                                                
\end{array} 
\end{displaymath}
\vspace{1.0cm}
\begin{displaymath}
\begin{array}{c c c c c}
 & &               &  & \Rnode{Ai}{A_i}    \\
\end{array}
\end{displaymath}
\ncbcdar{\pc{Z}{Y}}{Z}{Y}
\ncaarr{q(\pc{Z}{Y},Y')}{Z}{Yp}
\nccdar{Y}{tY}
\nccdar{tY}{W}
\nccdar{W}{tW}
\ncarr{Y}{B1}
\blabel{b_1}[.80]
\ncarr{Y}{Bji}
\blabel{b_{j_i}}[.80]
\ncarr{Y}{Bm}
\blabel{b_m}[.80]
\nccdar{Yp}{tYp}
\nccdar{tYp}{W}
\ncarr{Yp}{Bp1}
\alabel{b'_1}[.80]
\ncarr{Yp}{Bpji}
\alabel{b'_{j_i}}[.80]
\ncarr{Yp}{Bpm}
\alabel{b'_m}[.80]
\ncarr[10]{W}{Ai}
\alabel{a_i}[.40]
\nccdar[10]{Bji}{Ai}
\nccdar[10]{Bpji}{Ai}
\end{center}
\noindent
Latest thinking: We definitely need to remove the $B_{j_i}$ from this diagram -- they are not implied bu the inductive hypothesis. 
\noindent Questions: Should we remove $A_i$ from the above diagram? Do we use the $a_i$  at all? Do we need to? Are they there as harmless implied dependencies.
\noindent
Define $g: D \morph Y$ and $g': D \morph Y'$. Then we can easily show that
\begin{equation}
g \circ \pbase{D}{Y}{W} = g \circ \pbase{D}{Y}{W}
\end{equation}
    
\item $W < \pbase{Y}$ and $\pbase{Y'} < W$
In this case $\pbase{W} = \pbase{Y'}$.
This case follows from lemma \ref{drilldowntwo}.


\begin{minipage}{\textwidth}
\begin{center}
\begin{displaymath}
\begin{array}{c c c c c}
  \Rnode{Z}{Z} & &              &                               &              \\ [1.4cm]
  \Rnode{Y}{Y} & &              &                               &\Rnode{Yp}{Y'}\\ [1.4cm]
	&&&&\Rnode{tYp}{\pbase{Y'}}\hspace{2.6cm}\Rnode{dummy}{}\\ [1.0cm]
	             & & \Rnode{W}{W} &                               &              \\ [1.0cm]
               & & \Rnode{tW}{\pbase{W}} &                      &              \\ [0.2cm]
	 \begin{array}{cp{0.3cm}c         p{0.3cm}  c}					
   \Rnode{B1}{B_1}&  ... & \Rnode{Bji}{B_{j_i}} & ... & \Rnode{Bm}{B_m}
	 \end{array} 
	 & & & &
	\begin{array}{c c c c c}					
   \Rnode{Bp1}{B'_1}& ... & \Rnode{Bpji}{B'_{j'_i}}&  ... & \Rnode{Bpm}{B'_m}
	 \end{array}                                                
\end{array} 
\end{displaymath}
\vspace{1.0cm}
\begin{displaymath}
\begin{array}{c c c c c}
 & &               &  & \Rnode{Ai}{A_i}    \\
\end{array}
\end{displaymath}
\ncbcdar{\pc{Z}{Y}}{Z}{Y}
\ncaarr{q(\pc{Z}{Y},Y')}{Z}{Yp}
\nccdar{Y}{W}
%\nccdar{tY}{W}
\nccdar{W}{tW}
\ncarr{Y}{B1}
\blabel{b_1}[.80]
\ncarr{Y}{Bji}
\blabel{b_{j_i}}[.80]
\ncarr{Y}{Bm}
\blabel{b_m}[.80]
\nccdar{Yp}{tYp}
\nccdar{tYp}{W}
\ncarr{Yp}{Bp1}
\alabel{b'_1}[.80]
\ncarr{Yp}{Bpji}
\alabel{b'_{j_i}}[.80]
\ncarr{Yp}{Bpm}
\alabel{b'_m}[.80]
\ncarr[10]{W}{Ai}
\alabel{a_i}[.40]
\nccdar[10]{Bji}{Ai}
\nccdar[10]{Bpji}{Ai}
\end{center}
\end{minipage}
\noindent
Latest Thinking: Remove $B_{j_i}$ from this diagram. It is not implied by the inductive hypothesis and
as at today Wednesday 19th December it is not used in the proof. 

\item  $\pbase{Y} < W $ and $W < \pbase{Y'}$
In this case $\pbase{W} = \pbase{Y}$.
This case follows from lemma \ref{drilldowntwo}.

\item  $\pbase{Y} < W $ and $\pbase{Y'} < W$
In this case $\pbase{W} = \pbase{Y} =\pbase{Y'}$.
\begin{center}
\begin{displaymath}
\begin{array}{c c c c c}
  \Rnode{Z}{Z} & &              & &                   \\ [1.4cm]
  \Rnode{Y}{Y} & &              & &  \Rnode{Yp}{Y'}    \\ [1.4cm]
	             & & \Rnode{W}{W} & &                    \\ [1.0cm]
               & & \Rnode{tW}{\pbase{W}} & &                    \\ [1.0cm]
	 \begin{array}{cp{0.3cm}c         p{0.3cm}  c}					
   \Rnode{B1}{B_1}&  ... & \Rnode{Bji}{B_{j_i}} & ... & \Rnode{Bm}{B_m}
	 \end{array} 
	 & & & &
	\begin{array}{c c c c c}					
   \Rnode{Bp1}{B'_1}& ... & \Rnode{Bpji}{B'_{j'_i}}&  ... & \Rnode{Bpm}{B'_m}
	 \end{array}                                                
\end{array} 
\end{displaymath}
\vspace{1.0cm}
\begin{displaymath}
\begin{array}{c c c c c}
 & &               &  & \Rnode{Ai}{A_i}    \\
\end{array}
\end{displaymath}
\ncbcdar{\pc{Z}{Y}}{Z}{Y}
\ncaarr{q(\pc{Z}{Y},Y')}{Z}{Yp}
\nccdar{Y}{W}
\nccdar{tY}{W}
\nccdar{W}{tW}
\ncarr{Y}{B1}
\blabel{b_1}[.80]
\ncarr{Y}{Bji}
\blabel{b_{j_i}}[.80]
\ncarr{Y}{Bm}
\blabel{b_m}[.80]
\nccdar{Yp}{W}
\ncarr{Yp}{Bp1}
\alabel{b'_1}[.80]
\ncarr{Yp}{Bpji}
\alabel{b'_{j_i}}[.80]
\ncarr{Yp}{Bpm}
\alabel{b'_m}[.80]
\ncarr[10]{W}{Ai}
\alabel{a_i}[.40]
\nccdar[10]{Bji}{Ai}
\nccdar[10]{Bpji}{Ai}
\end{center}

\end{enumerate}

\end{enumerate}
\end{proof}

\newpage


\section{Notation for composed pullbacks}
In \cite{Cartmell86}, the structure of contextual categories is introduced and subsequently
the basic notation is extended so that 
\begin{itemize}
\item{if $A \leq B$ in a contextual category then the composed dependency of
$B$ on $A$ is 
denoted $\pc{B}{A}$ and depicted in diagrams as $\pc{B}{A}:B \raisebox{1pt}{---}\!\!\!\!\!\!\geqslant A$,}
\item{if $f: A \morph B_0$ in a contextual category \cat{C} and if 
$B_0 \base B_1 ... \base B_m$ there is a  pullback of $\pc{B_m}{B_0}$ along $f$
is described by diagram:

\begin{displaymath}
\begin{array}{cp{2cm}c}
\Rnode{fBm} {f \sub B_m}    &            &  \Rnode{Bm}{B_m}   \\ [0.8cm]
\Rnode{A}{A}                &            &  \Rnode{B0}{B_0}   
\end{array}
\end{displaymath}
\ncbcdar{\pc{f \sub B_m}{A}}{fBm}{A}
\ncacdar{\pc{B_m}{B_0}}{Bm}{B0}
\ncaarr{q(f,B_m)}{fBm}{Bm}
\jcbarr{f}{A}{B0}
}
\end{itemize}


We extend the notation further. If $X \base A_1 ... A_{n-1} \base A_n$ in \cat{C} and
if $X \base B$ then we will write $\crossx{A_n}{B}{X}$ in place of $\pc{A_n}{X}\,\sub B$ so that 
we have a pullback diagram as follows:
\begin{displaymath}
\begin{array}{c p{0.45cm} c c}
\Rnode{AnxB}{\crossx{A_n}{B}{X}}&&            &              \\ [1.1cm]
\Rnode{An}{A_n}                 &&            &               \\ [0.3cm]
                                &&            & \Rnode{B}{B}  \\ [0.8cm]
                                &&\Rnode{X}{X}&                
\end{array}
\end{displaymath}
\ncsar{AnxB}{An}
\ncbcdar{\pc{A_n}{X}}{An}{X}
\ncsar{B}{X}
\ncaarr{q(\pc{A_n}{X},B)}{AnxB}{B}.

similarly, if $X \base B_1 \base ... B_{m-1} \base B_m$ then we have a series of pullback diagrams that fit together so:


\begin{minipage}{\textwidth}
\begin{displaymath}
\begin{array}{cccp{2cm}c}
\begin{array} {c}
\Rnode{AnxBm}{\crossx{A_n}{B_m}{X}}      \\ [1.0cm]
\Rnode{AnxBm1}{\crossx{A_n}{B_{m-1}}{X}} \\ [0.5cm]
\raisebox{1.0cm}{$\Rnode{Rvdots}{\vdots}$}\\ [-0.5cm]
\Rnode{AnxB2}{\crossx{A_n}{B_2}{X}}       \\ [1.0cm]
\Rnode{AnxB1}{\crossx{A_n}{B_1}{X}}\\ [1.0cm]
\Rnode{An}{A_n}                    \\ [1.0cm]
         
\end{array} 
& & & &
\begin{array}{c}
                                    \\ [1.0cm]
              \Rnode{Bm}{B_m}       \\ [1.0cm]
              \Rnode{Bm1}{B_{m-1}}  \\ [0.5cm]
							\Rnode{Rvdots}{\vdots}\\ [0.5cm]
              \Rnode{B2}{B_2}       \\ [1.0cm]
              \Rnode{B1}{B_1}          
\end{array} \\
&\begin{array}{ccccc}
\Rnode{An1}{A_{n-1}}  \\ [0.25cm]
     &\Rnode{Rddots}{\ddots} \\ [0.25cm]
              &&&\Rnode{A1}{A_1}  \\ [1.0cm]
                 &&&&\hspace{1cm}\Rnode{X}{X} \\
\end{array} & & &
\end{array}
\end{displaymath}
 
\ncsar{AnxBm}{AnxBm1}
\ncsar{AnxB2}{AnxB1}
\ncsar{AnxB1}{An}
\ncsar{An}{An1}
\ncsar{A1}{X}
\ncsar{Bm}{Bm1}
\ncsar{B2}{B1}
\ncsar{B1}{X}
\ncaarr{q(\pc{A_n}{X},B_m)}{AnxBm}{Bm}
\ncaarr{q(\pc{A_n}{X},B_{m-1})}{AnxBm1}{Bm1}
\ncaarr{q(\pc{A_n}{X},B_2)}{AnxB2}{B2}
\ncaarr{q(\pc{A_n}{X},B_1)}{AnxB1}{B1}
\end{minipage}


\section{Equivalent Contexts -- Example}

In a g.a.t. \gat which includes the following type definitions:
\begin{displaymath}
\begin{array}{l}
\tstyle \isT{A_1} \\
\tstyle \isT{A_2} \\
\ofT{x}{A_1}\tstyle \isT{B_1(x)} \\
\ofT{x}{A_2}\tstyle \isT{B_2(x)} \\
\end{array}
\end{displaymath}

The context 
\begin{equation}
\ofT{x_1}{A_1},\ofT{x_2}{A_2},\ofT{y_1}{B_1(x_1)},\ofT{y_2}{B_2(x_2)}
\end{equation}
can be rearranged in five different ways to give, all in all, six different ways of expressing
what is much the same context:
\begin{equation}
\ofT{x_1}{A_1}, \ofT{x_2}{A_2}, \ofT{y_1}{B_1(x_1)}, \ofT{y_2}{B_2(x_2)}
\end{equation}
\begin{equation}
\ofT{x_1}{A_1}, \ofT{x_2}{A_2}, \ofT{y_2}{B_2(x_2)}, \ofT{y_1}{B_1(x_1)}
\end{equation}
\begin{equation}
\ofT{x_1}{A_1}, \ofT{y_1}{B_1(x_1)}, \ofT{x_2}{A_2}, \ofT{y_2}{B_2(x_2)}
\end{equation}
\begin{equation}
\ofT{x_2}{A_2}, \ofT{x_1}{A_1}, \ofT{y_1}{B_1(x_1)}, \ofT{y_2}{B_2(x_2)}
\end{equation}
\begin{equation}
\ofT{x_2}{A_2}, \ofT{x_1}{A_1}, \ofT{y_2}{B_2(x_2)}, \ofT{y_1}{B_1(x_1)}
\end{equation}
\begin{equation}
\ofT{x_2}{A_2}, \ofT{y_2}{B_2(x_2)}, \ofT{x_1}{A_1}, \ofT{y_1}{B_1(x_1)}
\end{equation}


Each one of these contexts and each subcontext is represented by an object
in the contextual category  \cat{C(\gat)} that corresponds to the theory. This is
shown in this diagram:

%\scalebox{0.9}{
\begin{shrunkdisplay}
%\scalebox{0.9}{
\begin{array}{cccccc}
\Rnode{c1}{\crossx
              {(\crossx
							     {(\crossx{A_1}{A_2}{1})}
									 {B_1}
									 {A_1}
								) 
								\hspace{-0.2cm}
							}
							{\hspace{-0.2cm}(\crossx{A_1}{B_2}{1})}
							{\crossx{A_1}{A_2}{1}} 
				  } 
&
\Rnode {c2}{\crossx
              {(\crossx{A_1}{B_2}{1})}
							{B_1}
							{A_1}
           }
&
\Rnode{c3}{
           \crossx{B_1}{B_2}{1}
					}
&
\Rnode{c4}{
           \crossx{B_2}{B_1}{1}
					}
&
\Rnode{c5}{\crossx
           {(\crossx{A_2}{B_1}{1})}
					 {B_2}
					 {A_2}
					}
&
\Rnode{c6}{\crossx
              {(\crossx
							     {(\crossx{A_2}{A_1}{1})}
									 {B_2}
									 {A_2}
								) 
								\hspace{-0.2cm}
							}
							{\hspace{-0.2cm}(\crossx{A_2}{B_1}{1})}
							{\crossx{A_2}{A_1}{1}} 
				  } \\ [1.2cm]
\Rnode{sc1}{\crossx
							     {(\crossx{A_1}{A_2}{1})}
									 {B_1}
									 {A_1}				
				   } 
&
\Rnode {sc2}{
             \crossx{A_1}{B_2}{1}
           }
&
\Rnode{sc3}{
           \crossx{B_1}{A_2}{1}
					}   
&
\Rnode{sc4}{
           \crossx{B_2}{A_1}{1}
					}   
&
\Rnode{sc5}{
           \crossx{A_2}{B_1}{1}
					}   
&
\Rnode{sc6}{
           \crossx
					         {(\crossx{A_2}{A_1}{1})}
					         {B_2}
									 {A_2}
					}  \\ [1.2cm]
\multicolumn{2}{c}{
         \ \ \ \ \ \ \ \Rnode{A1xA2}{\crossx{A_1}{A_2}{1}}   
} 
& \Rnode{B1}{B_1} 
& \Rnode{B2}{B_2}
& \multicolumn{2}{c}{\Rnode{A2xA1}{\crossx{A_2}{A_1}{1}}}
\\ [1.2cm] 
  \multicolumn{3}{c}{ \hspace{3cm}\Rnode{A1}{A_1}}
& \multicolumn{3}{c}{             \Rnode{A2}{A_2}} \hspace{3cm} \\ [1.2cm]
\multicolumn{6}{c}{
         \Rnode{abs}{1}
					        }
\end{array}
\end{shrunkdisplay}
%}
 
\ncsar{c1}{sc1}
\ncsar{c2}{sc2}
\ncsar{c3}{sc3}
\ncsar{c4}{sc4}
\ncsar{c5}{sc5}
\ncsar{c6}{sc6}
\ncsar{sc1}{A1xA2}
\ncsar{sc2}{A1xA2}
\ncsar{sc3}{B1}
\ncsar{sc4}{B2}
\ncsar{sc5}{A2xA1}
\ncsar{sc6}{A2xA1}
\ncsar{A1xA2}{A1}
\ncsar{B1}{A1}
\ncsar{A1}{abs}
\ncsar{B2}{A2}
\ncsar{A2xA1}{A2}
\ncsar{A2}{abs}

Each of the six contexts are equivalents. This is reflected by the facts that there are cannonical 
isomorphisms in the contextual catgory between the six objects: \\
\begin{displaymath}
\def\arraystretch{2.2}
\begin{array} {l}
      \crossx
          {(\crossx
			       {(\crossx{A_1}{A_2}{1})}
						 {B_1}
						 {A_1}
			     ) 
			     \hspace{-0.2cm}
					}
					{\hspace{-0.2cm}(\crossx{A_1}{B_2}{1})}
					{\crossx{A_1}{A_2}{1}}
\\
    \crossx
       {(\crossx{A_1}{B_2}{1})}
							{B_1}
							{A_1}
\\

     \crossx{B_1}{B_2}{1}
\\
     \crossx{B_2}{B_1}{1}
\\
     \crossx
           {(\crossx{A_2}{B_1}{1})}
					 {B_2}
					 {A_2}
\\
     \crossx
              {(\crossx
							     {(\crossx{A_2}{A_1}{1})}
									 {B_2}
									 {A_2}
								) 
								\hspace{-0.2cm}
							}
							{\hspace{-0.2cm}(\crossx{A_2}{B_1}{1})}
							{\crossx{A_2}{A_1}{1}} 

\end{array}
\end{displaymath}
\section{Cancellative Property}
\noindent 
\begin{definition}
A contextual category \ccat is said to be cancellative iff for all objects $X$, $A$, $B$ and $B'$ such that
$X < A$, $X < B$ and $X < B'$ in \ccat, 
if $\crossx{A}{B}{X} = \crossx{A}{B'}{X}$ then $B=B'$. \footnote{What about requiring q's to b equal?}.
\end{definition} 


\section{Decompositions and Projections of Objects}
For any given object $Y$ of a contextual category there may or may not be objects $A$, $B$ and $X$ so that
$Y = \crossx{A}{B}{X}$. If there are we say the object is decomposable. If an object $Y$ is decomposable into objects that
are themselves decomposable then there may be a number of decompositions implied by coherence conditions of contextual
categories but if we assume the cancellative property upto these equivalent decompositions given by coherence
the decomposition is unique. 
\noindent
For example if $X < A$, $X < B$, $X < C$ in a \ccat then from coherence of pullbacks in \ccat we have:
$\crossx{A}{(\crossx{B}{C}{X})}{X} = \crossx{(\crossx{A}{B}{X})}{C}{X}$ as shown here:
 
\begin{displaymath}
\begin{array}{cp{1.0cm}cp{1.0cm}c}
\Rnode{J1}{}\Rnode{D1} {\crossx{(\crossx{A}{B}{X})}{C}{X}}\Rnode{J2}{} \ \ \ \ \   &&  &&  \\ 
= && && \\
\Rnode{D2} {\crossx{A}{(\crossx{B}{C}{X})}{X}}    &&  &&                        \\ [1.3cm]
\Rnode{AB}{\crossx{A}{B}{X}}&& \Rnode{BC}{\crossx{B}{C}{X}} &&                      \\[1.3cm]
\Rnode{A}{A}&& \Rnode{B}{B} && \ \ \ \ \ \ \ \ \ \ \ \ \ \Rnode{C}{C}                                        \\[1.3cm]
             && \Rnode{X}{X} &&                                                     
\end{array}
\end{displaymath}

\ncaarr[50]{q(\pc{\crossx{A}{B}{X}}{X},C)}{J2}{C}
%\ncsar[-30]{J1}{AB}
\ncsar{D2}{AB}
\ncsar{AB}{A}
\ncsar{BC}{B}
\ncsar{A}{X}
\ncsar{B}{X} 
\ncsar{C}{X}
\ncaarr{q(\pc{A}{X},B)}{AB}{B}
\ncaarr{q(\pc{B}{X},C)}{BC}{C}
\ncaarr{q(\pc{A}{X},\crossx{B}{C}{X})}{D2}{BC}

\noindent Say that an object is \textit{prime} if it cannot be decomposed.
\noindent Anyway we look at it we can decompose an object into an n-tuple of prime objects. 
\noindent Any object $Y$ of a contextual category \ccat is either prime or else there is an $n > 1$ and a tuple of morphisms $f_i: Y \morph A_i$, $1 \leq i \leq n$, such that for each $i$, $1 \leq i \leq n$,  $A_i$ is primitive, 
and the diagram
\begin{center}
\psset{arrowsize=5pt,arrowinset=0.7}
\psset{nodesep=7pt}
\setlength{\arraycolsep}{0.3cm}
\begin{displaymath}
\begin{array}{ccp{0.2cm}p{0.075cm}c}
&&\Rnode{top}{$Y$}& & \\[1.5cm]
\Rnode{A}{A_1}&\Rnode{B2}{A_2}&& ... & \Rnode{Bm}{A_n}\\
\end{array}
\end{displaymath}
\psset{nodesepA=4pt,nodesepB=7pt}
\ncline{-}{top}{A}
\tlput{\footnotesize $f_1$}
\ncput[nrot=:R,npos=1]{\pstriangle(0,0)(.2,.2)}
\ncline{-}{top}{B2}
\trput{\footnotesize $f_2$}
\ncput[nrot=:R,npos=1]{\pstriangle(0,0)(.2,.2)}
\ncline{-}{top}{Bm}
\trput{\footnotesize $f_n$}
\ncput[nrot=:R,npos=1]{\pstriangle(0,0)(.2,.2)}
\end{center}
 is a limit cone to its own characteristic diagram.

\noindent The object $\crossx{A}{B}{X}$ has projections $\pc{\crossx{A}{B}{X}}{A}: \crossx{A}{B}{X} \smorph A$ and
$q(\pc{A}{X},B): \crossx{A}{B}{X} \morph B$. Given that  $A$ and $B$ are maybe themselves decomposable then we  can define a tree of morphisms which we shall call the projection tree. Whereas the projection tree is not unique the leaves of the tree are and the composed morphisms to the leaves of the tree are too. The composed morphisms to the leaves of the tree we
will call the \textit{key} of the object $Y$. This is made formal in the following lemma.


\bibliography{../SharedBibliography/temp/bibliography}

\end{document}
