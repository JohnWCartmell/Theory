\documentclass[10pt,a4paper]{scrartcl}
\usepackage[margin=3cm]{geometry}
\usepackage{pstricks}
\usepackage{pst-node}
\usepackage{pst-tree}
\usepackage{stmaryrd}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{verbatim}
\usepackage{enumerate}
\usepackage{calc}
\usepackage{url}
\usepackage{hyperref}
\usepackage{environ}
\NewEnviron{shrunkdisplay}{%
\begin{equation*}
\scalebox{0.9}{$\BODY$}
\end{equation*}
}


\input{../SharedMacros/theorems.macros}
\input{../SharedMacros/ccategories.macros}
\input{../SharedMacros/gats.macros}
\input{../SharedMacros/metagat.macros}
\input{../SharedMacros/ermacros}
\input{../SharedMacros/erdiagram}
\input{../SharedMacros/indexedsets.macros}

\renewcommand{\erpictureFolder}[0]{../SharedPictures}

\setcounter{equation}{0}
\bibliographystyle{plain} % was hplain

\title{Dependency Categories - Part Two - Work in Progress}
\author{John Cartmell\footnote{john.w.cartmell gmail.com}\\ \normalsize{\textit{Ad Otium}}}
\subtitle{Status: \normalsize{DRAFT --TREAT WITH CAUTION}}
\begin{document}
\maketitle

\section{Notation for composed pullbacks}
In \cite{Cartmell86}, the structure of contextual categories is introduced and subsequently
the basic notation is extended so that 
\begin{itemize}
\item{if $A \leq B$ in a contextual category then the composed dependency of
$B$ on $A$ is 
denoted $\pc{B}{A}$ and depicted in diagrams as $\pc{B}{A}:B \raisebox{1pt}{---}\!\!\!\!\!\!\geqslant A$,}
\item{if $f: A \morph B_0$ in a contextual category \cat{C} and if 
$B_0 \base B_1 ... \base B_m$ there is a  pullback of $\pc{B_m}{B_0}$ along $f$
is described by diagram:

\begin{displaymath}
\begin{array}{cp{2cm}c}
\Rnode{fBm} {f \sub B_m}    &            &  \Rnode{Bm}{B_m}   \\ [0.8cm]
\Rnode{A}{A}                &            &  \Rnode{B0}{B_0}   
\end{array}
\end{displaymath}
\ncbpar{\pc{f \sub B_m}{A}}{fBm}{A}
\ncapar{\pc{B_m}{B_0}}{Bm}{B0}
\ncaarr{q(f,B_m)}{fBm}{Bm}
\jcbarr{f}{A}{B0}
}
\end{itemize}


We extend the notation further. If $X \base A_1 ... A_{n-1} \base A_n$ in \cat{C} and
if $X \base B$ then we will write $\crossx{A_n}{B}{X}$ in place of $\pc{A_n}{X}\,\sub B$ so that 
we have a pullback diagram as follows:
\begin{displaymath}
\begin{array}{c p{0.45cm} c c}
\Rnode{AnxB}{\crossx{A_n}{B}{X}}&&            &              \\ [1.1cm]
\Rnode{An}{A_n}                 &&            &               \\ [0.3cm]
                                &&            & \Rnode{B}{B}  \\ [0.8cm]
                                &&\Rnode{X}{X}&                
\end{array}
\end{displaymath}
\ncsar{AnxB}{An}
\ncbpar{\pc{A_n}{X}}{An}{X}
\ncsar{B}{X}
\ncaarr{q(\pc{A_n}{X},B)}{AnxB}{B}.

similarly, if $X \base B_1 \base ... B_{m-1} \base B_m$ then we have a series of pullback diagrams that fit together so:

\begin{displaymath}
\begin{array}{cccp{2cm}c}
\begin{array} {c}
\Rnode{AnxBm}{\crossx{A_n}{B_m}{X}}      \\ [1.0cm]
\Rnode{AnxBm1}{\crossx{A_n}{B_{m-1}}{X}} \\ [0.5cm]
\raisebox{1.0cm}{$\Rnode{Rvdots}{\vdots}$}\\ [-0.5cm]
\Rnode{AnxB2}{\crossx{A_n}{B_2}{X}}       \\ [1.0cm]
\Rnode{AnxB1}{\crossx{A_n}{B_1}{X}}\\ [1.0cm]
\Rnode{An}{A_n}                    \\ [1.0cm]
         
\end{array} 
& & & &
\begin{array}{c}
                                    \\ [1.0cm]
              \Rnode{Bm}{B_m}       \\ [1.0cm]
              \Rnode{Bm1}{B_{m-1}}  \\ [0.5cm]
							\Rnode{Rvdots}{\vdots}\\ [0.5cm]
              \Rnode{B2}{B_2}       \\ [1.0cm]
              \Rnode{B1}{B_1}          
\end{array} \\
&\begin{array}{ccccc}
\Rnode{An1}{A_{n-1}}  \\ [0.25cm]
     &\Rnode{Rddots}{\ddots} \\ [0.25cm]
              &&&\Rnode{A1}{A_1}  \\ [1.0cm]
                 &&&&\hspace{1cm}\Rnode{X}{X} \\
\end{array} & & &
\end{array}
\end{displaymath}
 
\ncsar{AnxBm}{AnxBm1}
\ncsar{AnxB2}{AnxB1}
\ncsar{AnxB1}{An}
\ncsar{An}{An1}
\ncsar{A1}{X}
\ncsar{Bm}{Bm1}
\ncsar{B2}{B1}
\ncsar{B1}{X}
\ncaarr{q(\pc{A_n}{X},B_m)}{AnxBm}{Bm}
\ncaarr{q(\pc{A_n}{X},B_{m-1})}{AnxBm1}{Bm1}
\ncaarr{q(\pc{A_n}{X},B_2)}{AnxB2}{B2}
\ncaarr{q(\pc{A_n}{X},B_1)}{AnxB1}{B1}


\section{Equivalent Contexts -- Example}

In a g.a.t. \gat which includes the following type definitions:
\begin{displaymath}
\begin{array}{l}
\tstyle \isT{A_1} \\
\tstyle \isT{A_2} \\
\ofT{x}{A_1}\tstyle \isT{B_1(x)} \\
\ofT{x}{A_2}\tstyle \isT{B_2(x)} \\
\end{array}
\end{displaymath}

The context 
\begin{equation}
\ofT{x_1}{A_1},\ofT{x_2}{A_2},\ofT{y_1}{B_1(x_1)},\ofT{y_2}{B_2(x_2)}
\end{equation}
can be rearranged in five different ways to give, all in all, six different ways of expressing
what is much the same context:
\begin{equation}
\ofT{x_1}{A_1}, \ofT{x_2}{A_2}, \ofT{y_1}{B_1(x_1)}, \ofT{y_2}{B_2(x_2)}
\end{equation}
\begin{equation}
\ofT{x_1}{A_1}, \ofT{x_2}{A_2}, \ofT{y_2}{B_2(x_2)}, \ofT{y_1}{B_1(x_1)}
\end{equation}
\begin{equation}
\ofT{x_1}{A_1}, \ofT{y_1}{B_1(x_1)}, \ofT{x_2}{A_2}, \ofT{y_2}{B_2(x_2)}
\end{equation}
\begin{equation}
\ofT{x_2}{A_2}, \ofT{x_1}{A_1}, \ofT{y_1}{B_1(x_1)}, \ofT{y_2}{B_2(x_2)}
\end{equation}
\begin{equation}
\ofT{x_2}{A_2}, \ofT{x_1}{A_1}, \ofT{y_2}{B_2(x_2)}, \ofT{y_1}{B_1(x_1)}
\end{equation}
\begin{equation}
\ofT{x_2}{A_2}, \ofT{y_2}{B_2(x_2)}, \ofT{x_1}{A_1}, \ofT{y_1}{B_1(x_1)}
\end{equation}


Each one of these contexts and each subcontext is represented by an object
in the contextual category  \cat{C(\gat)} that corresponds to the theory. This is
shown in this diagram:

%\scalebox{0.9}{
\begin{shrunkdisplay}
%\scalebox{0.9}{
\begin{array}{cccccc}
\Rnode{c1}{\crossx
              {(\crossx
							     {(\crossx{A_1}{A_2}{1})}
									 {B_1}
									 {A_1}
								) 
								\hspace{-0.2cm}
							}
							{\hspace{-0.2cm}(\crossx{A_1}{B_2}{1})}
							{\crossx{A_1}{A_2}{1}} 
				  } 
&
\Rnode {c2}{\crossx
              {(\crossx{A_1}{B_2}{1})}
							{B_1}
							{A_1}
           }
&
\Rnode{c3}{
           \crossx{B_1}{B_2}{1}
					}
&
\Rnode{c4}{
           \crossx{B_2}{B_1}{1}
					}
&
\Rnode{c5}{\crossx
           {(\crossx{A_2}{B_1}{1})}
					 {B_2}
					 {A_2}
					}
&
\Rnode{c6}{\crossx
              {(\crossx
							     {(\crossx{A_2}{A_1}{1})}
									 {B_2}
									 {A_2}
								) 
								\hspace{-0.2cm}
							}
							{\hspace{-0.2cm}(\crossx{A_2}{B_1}{1})}
							{\crossx{A_2}{A_1}{1}} 
				  } \\ [1.2cm]
\Rnode{sc1}{\crossx
							     {(\crossx{A_1}{A_2}{1})}
									 {B_1}
									 {A_1}				
				   } 
&
\Rnode {sc2}{
             \crossx{A_1}{B_2}{1}
           }
&
\Rnode{sc3}{
           \crossx{B_1}{A_2}{1}
					}   
&
\Rnode{sc4}{
           \crossx{B_2}{A_1}{1}
					}   
&
\Rnode{sc5}{
           \crossx{A_2}{B_1}{1}
					}   
&
\Rnode{sc6}{
           \crossx
					         {(\crossx{A_2}{A_1}{1})}
					         {B_2}
									 {A_2}
					}  \\ [1.2cm]
\multicolumn{2}{c}{
         \ \ \ \ \ \ \ \Rnode{A1xA2}{\crossx{A_1}{A_2}{1}}   
} 
& \Rnode{B1}{B_1} 
& \Rnode{B2}{B_2}
& \multicolumn{2}{c}{\Rnode{A2xA1}{\crossx{A_2}{A_1}{1}}}
\\ [1.2cm] 
  \multicolumn{3}{c}{ \hspace{3cm}\Rnode{A1}{A_1}}
& \multicolumn{3}{c}{             \Rnode{A2}{A_2}} \hspace{3cm} \\ [1.2cm]
\multicolumn{6}{c}{
         \Rnode{abs}{1}
					        }
\end{array}
\end{shrunkdisplay}
%}
 
\ncsar{c1}{sc1}
\ncsar{c2}{sc2}
\ncsar{c3}{sc3}
\ncsar{c4}{sc4}
\ncsar{c5}{sc5}
\ncsar{c6}{sc6}
\ncsar{sc1}{A1xA2}
\ncsar{sc2}{A1xA2}
\ncsar{sc3}{B1}
\ncsar{sc4}{B2}
\ncsar{sc5}{A2xA1}
\ncsar{sc6}{A2xA1}
\ncsar{A1xA2}{A1}
\ncsar{B1}{A1}
\ncsar{A1}{abs}
\ncsar{B2}{A2}
\ncsar{A2xA1}{A2}
\ncsar{A2}{abs}

Each of the six contexts are equivalents. This is reflected by the facts that there are cannonical 
isomorphisms in the contextual catgory between the six objects: \\
\begin{displaymath}
\def\arraystretch{2.2}
\begin{array} {l}
      \crossx
          {(\crossx
			       {(\crossx{A_1}{A_2}{1})}
						 {B_1}
						 {A_1}
			     ) 
			     \hspace{-0.2cm}
					}
					{\hspace{-0.2cm}(\crossx{A_1}{B_2}{1})}
					{\crossx{A_1}{A_2}{1}}
\\
    \crossx
       {(\crossx{A_1}{B_2}{1})}
							{B_1}
							{A_1}
\\

     \crossx{B_1}{B_2}{1}
\\
     \crossx{B_2}{B_1}{1}
\\
     \crossx
           {(\crossx{A_2}{B_1}{1})}
					 {B_2}
					 {A_2}
\\
     \crossx
              {(\crossx
							     {(\crossx{A_2}{A_1}{1})}
									 {B_2}
									 {A_2}
								) 
								\hspace{-0.2cm}
							}
							{\hspace{-0.2cm}(\crossx{A_2}{B_1}{1})}
							{\crossx{A_2}{A_1}{1}} 

\end{array}
\end{displaymath}
\section{Cancellative Property}
\noindent 
\begin{definition}
A contextual category \con is said to be cancellative iff for all objects $X$, $A$, $B$ and $B'$ such that
$X < A$, $X < B$ and $X < B'$ in \con, 
if $\crossx{A}{B}{X} = \crossx{A}{B'}{X}$ then $B=B'$. \footnote{What about requiring q's to b equal?}.
\end{definition} 
\textbf{Assume from now on that we always mean contextual categories to be cancellative.}

\section{Decompositions and Projections of Objects}
For any given object $Y$ of a contextual category there may or may not be objects $A$, $B$ and $X$ so that
$Y = \crossx{A}{B}{X}$. If there are we say the object is decomposable. If an object $Y$ is decomposable into objects that
are themselves decomposable then there may be a number of decompositions implied by coherence conditions of contextual
categories but since we we assume the cancellative property upto these equivalent decompositions given by coherence
the decomposition is unique. 
\noindent
For example if $X < A$, $X < B$, $X < C$ in a \con then from coherence of pullbacks in \con we have:
$\crossx{A}{(\crossx{B}{C}{X})}{X} = \crossx{(\crossx{A}{B}{X})}{C}{X}$ as shown here:
 
\begin{displaymath}
\begin{array}{cp{1.0cm}cp{1.0cm}c}
\Rnode{J1}{}\Rnode{D1} {\crossx{(\crossx{A}{B}{X})}{C}{X}}\Rnode{J2}{} \ \ \ \ \   &&  &&  \\ 
= && && \\
\Rnode{D2} {\crossx{A}{(\crossx{B}{C}{X})}{X}}    &&  &&                        \\ [1.3cm]
\Rnode{AB}{\crossx{A}{B}{X}}&& \Rnode{BC}{\crossx{B}{C}{X}} &&                      \\[1.3cm]
\Rnode{A}{A}&& \Rnode{B}{B} && \ \ \ \ \ \ \ \ \ \ \ \ \ \Rnode{C}{C}                                        \\[1.3cm]
             && \Rnode{X}{X} &&                                                     
\end{array}
\end{displaymath}

\ncaarr[50]{q(\pc{\crossx{A}{B}{X}}{X},C)}{J2}{C}
%\ncsar[-30]{J1}{AB}
\ncsar{D2}{AB}
\ncsar{AB}{A}
\ncsar{BC}{B}
\ncsar{A}{X}
\ncsar{B}{X} 
\ncsar{C}{X}
\ncaarr{q(\pc{A}{X},B)}{AB}{B}
\ncaarr{q(\pc{B}{X},C)}{BC}{C}
\ncaarr{q(\pc{A}{X},\crossx{B}{C}{X})}{D2}{BC}

\noindent Say that an object is primitive if it cannot be decomposed.
\noindent Anyway we look at it we can decompose an object into an n-tuple of simple objects. 
\noindent Any object $Y$ of a contextual category \con is either primitive or else there is an $n > 1$ and a tuple of morphisms $f_i: Y \morph A_i$, $1 \leq i \leq n$, such that for each $i$, $1 \leq i \leq n$,  $A_i$ is primitive, 
and the diagram
\begin{center}
\psset{arrowsize=5pt,arrowinset=0.7}
\psset{nodesep=7pt}
\setlength{\arraycolsep}{0.3cm}
\begin{displaymath}
\begin{array}{ccp{0.2cm}p{0.075cm}c}
&&\Rnode{top}{$Y$}& & \\[1.5cm]
\Rnode{A}{A_1}&\Rnode{B2}{A_2}&& ... & \Rnode{Bm}{A_n}\\
\end{array}
\end{displaymath}
\psset{nodesepA=4pt,nodesepB=7pt}
\ncline{-}{top}{A}
\tlput{\footnotesize $f_1$}
\ncput[nrot=:R,npos=1]{\pstriangle(0,0)(.2,.2)}
\ncline{-}{top}{B2}
\trput{\footnotesize $f_2$}
\ncput[nrot=:R,npos=1]{\pstriangle(0,0)(.2,.2)}
\ncline{-}{top}{Bm}
\trput{\footnotesize $f_n$}
\ncput[nrot=:R,npos=1]{\pstriangle(0,0)(.2,.2)}
\end{center}
 is a limit cone to its own characteristic diagram.

\noindent The object $\crossx{A}{B}{X}$ has projections $\pc{\crossx{A}{B}{X}}{A}: \crossx{A}{B}{X} \dmorph A$ and
$q(\pc{A}{X},B): \crossx{A}{B}{X} \morph B$. Given that  $A$ and $B$ are maybe themselves decomposable then we  can define a tree of morphisms which we shall call the projection tree. Whereas the projection tree is not unique the leaves of the tree are and the composed morphisms to the leaves of the tree are too. The composed morphisms to the leaves of the tree we
will call the \textit{basis} of the object $Y$. 

\newpage
\noindent If $X < Y$ in a contextual category \con then we define the projection tree of $Y$ beyond $X$, which we denote
$\proj{Y}{X}$, recursively as follows:
\begin{enumerate}
\item if $Y$ is primitive then 
$$\proj{Y}{X} = id_Y$$

\vspace{2cm}

\item
if $Y$ is $\crossx{B}{C_m}{A}$ for some $B$, $C_1,...C_m$ and $A$ where  $A \base C_1 \base ... \base C_m$ and $A < B$ then
\vspace{1.0cm}
\begin{displaymath}
\begin{array}{cp{0.5cm}cp{0.2cm}c   p{0.2cm}c c  p{0.2cm}l   p{0.2cm}c   c  p{0.1cm}c }
&& \Rnode{A}{A} &&    &&&     \Rnode{B}{B} && \Rnode{AC1}{\crossx{B}{C_1}{A}} 
&& \Rnode{AC2}{\crossx{B}{C_2}{A}}     &\Rnode{BCe}{\hdots}    && \Rnode{BCm}{\crossx{B}{C_m}{A}}           \\ [0.6cm]
               &&                && \Rnode{C1}{C_1}   && \Rnode{C2}{C_2} &\Rnode{Ce}{\hdots}   && \Rnode{Cm}{Cm}     &&  &&     
\end{array}
\end{displaymath}
\ncsar{C1}{A}
\ncsar{C2}{C1}
\ncsar{Cm}{Ce}
\ncsar{AC1}{B}
\ncsar{AC2}{AC1}
\ncsar{BCm}{BCe}
\ncaarr[15]{q(\pc{B}{A},C_m)}{BCm}{Cm}
\ncpar{B}{A}
\ncbpar[-30]{\pc{\crossx{B}{C_m}{A}}{B}}{BCm}{B}
\vspace{0.5cm}

\begin{enumerate}
\item 
if $X < B$
$$
\proj{\crossx{B}{C_m}{A}}{X} = \{ \tuple{\pc{\crossx{B}{C_m}{A}}{B},\proj{B}{X}} ;\tuple{q(\pc{B}{A},C_m),\proj{C_m}{A}} \}
$$
\item 
if $X = B$
$$
\proj{\crossx{B}{C_m}{A}}{B} = \{  ;\tuple{q(\pc{B}{A},C_m),\proj{C_m}{A}} \}
$$


\item if $X$ is $\crossx{B}{C_i}{X}$ 
$$
\proj{\crossx{B}{C_m}{A}}{\crossx{B}{C_i}{A}} = \{\tuple{q(\pc{B}{A},C_m),\proj{C_m}{C_i}}\}
$$

\end{enumerate}
\end{enumerate}

\newpage

\section{Sketch}
\begin{enumerate}
\item{
from a contextual category $\cat{C}$ we may construct a dependency category $dep(\cat{C})$ as a quotient category
}
\item{
The functor $q:\cat{C} \morph dep(\cat{C})$ is surjective and faithful.
Therefore it preserves limits.
}
\end{enumerate}




\section{Equivalence Classes of Contexts}
\subsection{Subcontexts}
By a \textit{subcontext} of a context $\context{x}{\Delta}{n}$ we mean any context
of the form
$\subcontext{x}{{\Delta}}{i}{k}$ for some sequence 
$1 \leq i_1 \leq i_2 \leq ... i_k \leq n$. \\

\noindent
For example:
\begin {itemize}


\item the empty context  is a subcontext of every 
context,
\item any initial subsequence of a context is a subcontext of that context.
\end{itemize}

\noindent
In addition to the above, a context such as $\ofT{x_1}{A_1},\ofT{x_2}{A2},\ofT{y}{B(x_1)}$ has 
$\ofT{x_2}{A2}$ as a subcontext. This illustrates that each non-initial subcontext is indicative of a type in the context ($A_2$ in this case)
which does not depend on one of the earlier variables.
 

\section{Example Source}
\noindent In this figure

\begin{align*}
&\text{                                  }\tstyle \isT{A_1} \\
&\text{                                  }\tstyle \isT{A_2} \\
&\text{                                  }\tstyle \isT{B} \\
&\ofT{x_1}{A_1},\ofT{x_2}{A_2} \tstyle \ofT{f(x_1,x_2)}{B} 
\end{align*}
\noindent
 in a study of triangles is a quantity (an entity)  which varies both as the triangle varies and as the angle varies:

\begin{equation*}
x \in Triangle, y \in Angle(x): oppositeSide(y) \in Side(x)
\end{equation*}


\noindent In this type assertion `headOfState' is a quantity \\

\noindent As an example, the directed graph:
\begin{equation}
\begin{array}{ccc}
\Rnode{C}{C}   &            &                  \\ [0.8cm]
\Rnode{B1}{B_1}&            &\Rnode{B2}{B_2}   \\ [0.8cm]
               &\Rnode{A}{A}&                  \\ [0.8cm]
               &\Rnode{absolute}{1}&                
\end{array}
\ncsar{C}{B1}
\ncsar{B1}{A}
\ncsar{B2}{A} 
\ncsar{A}{absolute}
\end{equation}
\\


\begin{lemma}
In any category \cat{C} if $F: S \morph \cat{C}$ is a diagram with limit $\tuple{L,\phi}$,
if $S'$ is a category extending $S$  then if :
\begin{center}
\begin{equation}
\label{equaliser}
\begin{array}{cp{1cm}cp{1cm} c}
\Rnode{E}{E}& &    \Rnode{L}{L}  & & \Rnode{A}{\beta_0} 
\end{array}
\end{equation}
\ncaarr{e}{E}{L}
\setlength{\arroffsetA}{3pt}
\setlength{\arroffsetB}{3pt}
\ncarr{L}{A}
\naput{$\phi_B \circ G(\xi_1)$}
\setlength{\arroffsetA}{-3pt}
\setlength{\arroffsetB}{-3pt}
\ncarr{L}{A}
\nbput{$\phi_{B'} \circ G(\xi_2)$}
\arreset
\end{center}
is an equaliser in \cat{C} then $\tuple{E,\phi'}$ is a limit of the diagram $G$, where
$\phi'$ is the cone defined by
\begin{equation*}
\phi'_\beta =
\left\{
	\begin{array}{ll}
		e \circ \phi_\beta           & \mbox{if } \beta \mbox{ is an object of } S  \\
		\phi_{\beta_1} \circ G(\xi_1) & \mbox{if } \beta \mbox{ is } \beta_0 
	\end{array}
\right.
\end{equation*}

\end{lemma}
\begin{proof}
If $\tuple{N,\psi'}$is a cone to the diagram $G$ then, the restriction $\psi$ to objects in $F$ is a cone to  $S$. Therefore there exists a unique $h : N \morph L$ such that 
\begin{equation}
\label{hmediates}
h \circ \phi = \psi
\end{equation}

\noindent
Now, we have 
\begin{align*}
h \circ \phi_{\beta_1} \circ G(x)
             & = \psi_{\beta_1} \circ G(\xi_1)         && \mbox{by (\ref{hmediates})}\\
             & = \psi_{\beta_2} \circ G(\xi_2)         && \mbox{because } \psi \mbox{ is a cone to } G \\
             & = h \circ \phi_{\beta_2} \circ G(\xi_2) && \mbox{by (\ref{hmediates}) }\\
\end{align*}

\noindent
and so it follows, since (\ref{equaliser}) is an equaliser diagram,
that there is a unique $g: N \morph E$ such that 
\begin{equation}
\label{gmediates}
g \circ e = h
\end{equation}



\end{proof}

\bibliography{../SharedBibliography/temp/bibliography}

\end{document}
