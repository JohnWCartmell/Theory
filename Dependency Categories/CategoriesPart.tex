\documentclass[10pt,a4paper]{scrartcl}
%\usepackage[margin=3cm]{geometry} %see below for making room for margin comments
\usepackage{url}
\usepackage{hyperref}
\usepackage{environ}
\NewEnviron{shrunkdisplay}{%
\begin{equation*}
\scalebox{0.9}{$\BODY$}
\end{equation*}
}

\input{../SharedMacros/theorems.macros}
\input{../SharedMacros/ccategories.macros}
\input{../SharedMacros/gats.macros}
\input{../SharedMacros/metagat.macros}
\input{../SharedMacros/ermacros}
\input{../SharedMacros/erdiagram}
\input{../SharedMacros/indexedsets.macros}
\usepackage{ulem} % for \sout for use by \oldt macro
\input{../SharedMacros/general.macros}

\renewcommand{\erpictureFolder}[0]{../SharedPictures}
\usepackage{mathtools}
% support margin notes
\usepackage[left=1.5cm, right=4cm, marginparwidth=3cm, top=2cm, bottom=2.0cm]{geometry}
\setcounter{equation}{0}
\bibliographystyle{plain} % was hplain

\title{Notes on Categories - Work in Progress}
\author{John Cartmell\footnote{john.w.cartmell gmail.com}\\ \normalsize{\textit{Ad Otium}}}
\begin{document}

\section{Prelude}
We will write the cardinality of the set $x$ as $|x|$.
Suppose $\sim$ is an equivalence relation on the set $\set{\n}$.
Define a function $o_\sim : \set{\n} \morph \set{\n}$ by, \foreachi,
$$
s_\sim(i) \mapsto |\setsuchthat{j}{1 \leq j \leq i \mbox{ and }j \sim i}|
$$
\noindent We say that $s_\sim$ is the similarity index
function for $\sim$ because, for any $i$, it sequentially numbers (i.e indexes) those instances
of the set $\set{\n}$ that are similar to $i$. 

\begin{lemma}
\llabel{permutationnormalisationlemma}
If $\sim_A$ and $\sim_B$ are each equivalence relations on the set $\set{\n}$ 
with similarity index functions $s_{\sim_A}: \set{\n} \morph \set{\n}$
and $s_{\sim_B}: \set{\n} \morph \set{\n}$, respectively,  if
$\sigma: \set{\n} \morph \set{\n}$ is a permutation
such that
\newcommand{\sigmabar}{\bar{\sigma}}

\begin{align}
&i \sim_A j \mbox{ implies } \sigma(i) \sim_B \sigma(j) 
\end{align}

then there exists a permutation $\sigmabar: \set{\n} \morph \set{\n}$ such that


\begin{align}
&i \sim_A j \mbox{ implies } \sigmabar(i) \sim_B \sigmabar(j) \\
&s_{\sim_B}(\sigmabar(i))=s_{\sim_A}(i) \\
\end{align}.
\end{lemma}

\begin{lemma}
\llabel{permutationidentitylemma}
If $\sim$ is an equivalence relation on the set $\set{\n}$ 
with similarity index function $s_\sim: \set{\n} \morph \set{\n}$, if
$\sigma: \set{\n} \morph \set{\n}$ is a permutation that respects similarity, i.e. such that
if $i \sim j$ then $\sigma(i) \sim \sigma(j)$, and preserves similarity index, i.e. such that
the diagram
\begin{center}
\begin{equation}
\label{preservingcopynumber}
\begin{array}{cp{.5cm}c}
\Rnode{alphan}{\set{\n}}  &&              \\ [0.5cm]
												  && \Rnode{N}{\set{\n}} \\ [0.5cm]
\Rnode{betan}{\set{\n}}   &&            
\end{array}
\end{equation}
\ncarr{alphan}{N}
\alabel{s_\sim}
\ncarr{betan}{N}
\blabel{s_\sim}
\ncarr{alphan}{betan}
\blabel{\sigma}
\end{center}
commutes,
then $\sigma$ is the identity permutation.
\end{lemma}
\begin{proof}
Notes of 6th January 2021.
\end{proof}

\begin{lemma}
\llabel{permutationuniquenesslemma}
If $\sim_A$ and $\sim_B$ are each equivalence relations on the set $\set{\n}$ 
with similarity index functions $s_{\sim_A}: \set{\n} \morph \set{\n}$
and $s_{\sim_B}: \set{\n} \morph \set{\n}$, respectively,  if
$\sigma: \set{\n} \morph \set{\n}$ and $\sigma': \set{\n} \morph \set{\n}$ are permutations 
such that
\begin{align}
&i \sim_A j \mbox{ implies } \sigma(i) \sim_B \sigma(j) \\
&i \sim_B j \mbox{ implies } \sigma'^-1(i) \sim_A \sigma'^{-1}(j) \\
&s_{\sim_B}(\sigma(i))=s_{\sim_A}(i) \\
&s_{\sim_A}(\sigma'^{-1}(i))=s_{\sim_B}(i) 
\end{align}
then $\sigma=\sigma'$.
\end{lemma}
\section{Categories with n-ary products that are syntactic in nature}
\subsection{Characterisation}
Categories with n-ary products are the algebraic equivalents of multi-sorted algebraic theories.
Every category with n-ary products is equivalent to the category of equivalence classes 
of contexts and of realisations of a many-sorted algebraic theory. Categories with n-ary products that are isomorphic to categories of equivalence classes 
of contexts and of realisations can be characterised to some extent (or maybe exactly?)
will have some additional properies as follows:
\begin{enumerate}
\item associativity of products -- we described this condition as the final condition in definition of category with n-ary products
\item unique factorisation number -- if $A_1 \times ... \times A_n=B_1 \times ... \times B_m$
and $A_1,...A_n$ and $B_1,...B_m$ are prime then $n=m$.
\item right cancellative -- if $A_1 \times B_1 = A_2 \times B_2$ then $A_1 = A_2$. 
\item order indifferent -- if $A_1 \times A_2 \times B = A_1 \times A_2 \times B'$ then
$A_2 \times A_1 \times B = A_2 \times A_1 \times B'$.
\item coherence
\item afterthought needed for copy instance number:\commentary{Can reduce this to a widening condition.}
if $A_1 \times ... \times A_n=B_1 \times ... \times B_n$ then \foreachi, 
$A_1 \times ... \times A_n \times A_i = B_1 \times ... \times B_n \times B_i$.

\item further afterthought - equality substituition \commentary{rationale in notes of 7th January 2021}
If $f: A \morph B$ is a morphism and if $C_1$ and $C_2$ are objects such that
$B \times C_1=B \times C_2$ and $p_{\underline{B},C_1}=p_{\underline{B},C_2}$ then
$A \times C_1=A \times C_2$ and $p_{\underline{A},C_1}=p_{\underline{A},C_2}$
\end{enumerate}

To define the coherence condition we need introduce some terminology:

\begin{definition}
A morphism $f:A \morph B$ is said to be \term{cannonical} iff for some $n$,
$A=A_1 \times ... A_n$ and for some $m$, $B=B_1 \times ... \times B_m$
 there is a function 
$\sigma: \set{\m} \morph \set{\n}$               
such that \foreachj, $f \circ p_j = p_{\sigma(j)}$. 
\end{definition}

\begin{observation}
If \catcw is the theory category of a multi-sorted algebraic theory and if
$f: A_1 \times ... A_n \morph B_1 \times ... \times B_m$ is cannonical 
with index mapping $\sigma$ then $f=[\tuple{\permterm{x}{n}{\sigma}}]$.
\end{observation}

The index mapping function may not be unique.
For example a theory might have a type $S$ axiomatised to
be the singleton type by the axiom $x \in S, y \in S \tstyle x=y$. Suppose
the theory has another type $X$. In the theory category let $A$ be the object $[x_1 \in S, x_2 \in S, x_3 \in X]$
and let B be the object $[y_1 \in S,\ y_2 \in A]$. 
Then in the theory category the morphisms
$[\tuple{x_1,x_3}]:A \morph B$
and $[\tuple{x_2,x_3}]:A \morph B$
are equal and so $f=[\tuple{x_1,x_3}]$ is a morphism which has two distinct index mapping
functions by which it can be represented cannonically.

\begin{definition}
A morphism $f:A \morph B$ is said to have cannonical representation iff for some $n$,
there are cannonical morphisms $\fn$ such that $f=f_1 \circ ... \circ f_n$.
\end{definition}

From the cannonical representation $\fn$ of $f$ we obtain an index mapping function 
for $f$ which is $\sigma_1 \circ ... \circ \sigma_n$. 

\begin{observation}
If \catcw is the theory category of a multi-sorted algebraic theory and if
$f: A_1 \times ... A_n \morph B_1 \times ... \times B_m$ has a  cannonical 
representation 
with index mapping $\sigma$ then $f=[\tuple{\permterm{x}{n}{\sigma}}]$.
\end{observation}

\begin{enumerate}
\setcounter{enumi}{4}
\item coherence:
If $X$ and $Y$ are objects of \catcw and if $f:X \morph Y$ and $g:X \morph Y$ are
each compositions of cannonical morphisms then if $f$ and $g$ have identical 
index mappings then they are equal.
\end{enumerate}

\subsection{Defining a congruence structure}

Recall that if $\catcw$ is a category with n-ary products having the unique factorisation property then an
equivalence relation  $\sim$ on the set of objects of \catcw can be defined as follows:
if $A$ and $B$ are objects of $\catcw$ that are uniquely factorised as $\productn(\An)$ and $\product{m}(\Bm)$, respectively, then 
$A \sim B$ iff  there is a permutation of the set $\set{\n}$ such that 
\foreachi, $A_{\sigma(i)}=B_i$. \commentary{I actually described $\sigma$ the other way around but this way round is consistent with how I want to work here.}

In the current situation, in the absence of unique factorisation, this definition 
can be modified to define a binary relation $\sim_0$ as follows:
if $A$ and $B$ are objects of $\catcw$ then $A \sim_0 B$ 
iff there exists prime factorisations 
$A = \productn(\An)$ 
and $B= \productn(\Bn)$ 
and  a permutation of the set $\set{\n}$ such that 
\foreachi, $A_{\sigma(i)}=B_i$.

$\sim_0$, so defined is not
an equivalence relation  it is not transitive as demonstrated in the following example
\begin{notebox}[Example]
Let a theory consist of types $A$, $B$ and $B'$ and the single axiom 
\begin{equation}
x \in A \tstyle B=B'
\end{equation}
In the corresponding theory category, therefore, there are three prime objects which
we identify as $A$, $B$ and $B'$ and satisfying $A \times B = A \times B'$ and 
for which the objects $B \times A$ and $B' \times A$ are distinct objects (for there is no way of deriving, in the theory, the rule $\tstyle B = B'$). 

Now we have $B \times A \sim_0 A \times B = A \times B' \sim_0 B' \times A$
but we do not have $B \times A \sim_0 B' \times A$. Therefore $\sim_0$ is not transitive.
\end{notebox}
and so instead we take the transitive closure of the above relation (call it $\sim_0$) to
achieve an equivalence relation $\sim$.

Now recall also that in the unique factorisation case the i-maps are defined as follows:
for $A$ and $B$ objects of \catcw such that $A\sim B$ define $i_{A,B}=\tuple{p_{\sigma^{-1}(1)},...p_{\sigma^{-1}(n)}}$ where $\sigma$ is the permutation of the set $\set{\n}$ 
such that \foreachi, $A_{\sigma(i)}=B_i \mbox{ and }  c_A(\sigma(i)) = c_B(i)$. \commentary{This corrected.}


\begin{notebox}[Earlier we had writen]
In the current situation this definition now defines a cannonical map $i_{A,B}: A \morph B$ 
for all $A$,$B$ such that $A \sim_0 B$ \highlight{Yes it does but it didn't}
\highlight{ convince me at first reading and in fact this definition  doesn't take account of internal }
\highlight{similarity and so needs to be revised.!}
\end{notebox}

\begin{notebox}[What we had in mind]
\highlight{But does  not accomodate internal similarity:}
For all objects $A$ and $B$ such
that $A \sim_0 B$ we can define a map $i_{A,B}: A \morph B$ by defining it as the cannonical
morphism defined by the unique permutation $\sigma_{A,B} : \set{\n} \morph \set{\n}$ 
such that \foreachi, $A_{\sigma_{A,B}(i)}=B_i$ and such that
\begin{center}
\begin{equation}
\label{preservingcopynumber}
\begin{array}{cp{.5cm}c}
\Rnode{alphan}{\set{\n}}  &&              \\ [0.5cm]
												  && \Rnode{N}{\set{\n}} \\ [0.5cm]
\Rnode{betan}{\set{\n}}   &&            
\end{array}
\end{equation}
\ncarr{alphan}{N}
\alabel{s_{\sim_A}}
\ncarr{betan}{N}
\blabel{s_{\sim_B}}
\ncarr{betan}{alphan}
\alabel{\sigma_{A,B}}
\end{center}
commutes. 
\end{notebox}
\begin{notebox}[Earlier we had writen]
Then, for any $A,B$ such that $A \sim B$ we define the map $i_{A,B}$ to be the morphism
$i_{X_0,X_1} \circ i_{X_1,X_2} \circ ... i{X_{n-1},X_n}$ where $X0,X_1,...X_n$ is a sequence
of objects such that \foreachi, $X_{i-1} \sim_0 X_i$ and $X_0=A$ and $X_n=B$. 

We need show that $i_{A,B}$ is well defined. This will follow because of the coherence
condition. 
\end{notebox}

\begin{definition}
Every object $A$ has a prime rank which is the unique $n \geq 1$ such that
there exists $n$ prime objects $A_1,...A_n$ such that $A=A_1 \times ... \times A_n$.
We define the equivalence relation $\sim_A$ on the set $\set{\n}$ by
\llabel{middle}
\begin{equation*}
i \sim_A j \mbox{ iff } A \times A_i = A \times A_j.
\end{equation*}
$\sim_A$ is well defined because if A has a different prime decomposition, say as 
$A'_1 \times A'_m$ then $n=m$ and by the unique factoriation number condition $n=m$
and by the first afterthough condition \foreachi, 
$A \times A_i = A \times A'_i$
and \foreachj, 
$A \times A_j = A \times A'_j$
from which it follows that \foreachi, \foreachj,
$A \times A_i = A \times A_j $ iff $A \times A'_i = A \times A'_j $.
\end{definition}

From the definition in the prelude we can define the similarity index function for the object $A$
to be the simuilarity index function $s_{\sim_A}$ corresponding to the equivalence relation 
$\sim_A$ so that $s_{sim_A}: \set{\n} \morph \set {\n}$ where $n$ is the rank of $A$.
\begin{notebox}[Earlier note]
Check that there is still only one index mapping that preserves similarity index
(this will become lemma 3 from notes of 6th January 2021).

Therefore
there is at most one canonnically representable map from $A$ to $B$ for any $A$ and $B$
(this is lemma 4 from day notes of 6th January 2021).

If we phrase these statement first then the definition of the object congruence structure can follow.
\end{notebox}

\begin{lemma}
\llabel{representationpreservesinstanenumber}
If $f: A \morph B$ has a cannonical representation $f_1 \circ ...\circ f_m$ and an index mapping function determined by this representation is $\sigma$ then $\sigma$ preserves 
respective similarity indices i.e. the diagram

\begin{center}
\begin{equation}
\label{preservingcopynumber}
\begin{array}{cp{.5cm}c}
\Rnode{alphan}{\set{\n}}  &&              \\ [0.5cm]
												  && \Rnode{N}{\set{\n}} \\ [0.5cm]
\Rnode{betan}{\set{\n}}   &&            
\end{array}
\end{equation}
\ncarr{alphan}{N}
\alabel{s_{\sim_A}}
\ncarr{betan}{N}
\blabel{s_{\sim_B}}
\ncarr{betan}{alphan}
\blabel{\sigma}
\end{center}
commutes.
\end{lemma}
\begin{proof}
Notes of 6th January 2021.
\end{proof}

\section{Categories with n-ary Products} 
We concern ourselves with categories with a specified n-ary product structure and 
 with addition properties that might in some cases hold of this specified structure.  
Because we are concerned with categories corresponding to type theories we assume that the specified n-ary products are associative.
\begin{definition}
By a \term{category with n-ary products} I shall mean a category \catcw with additional structure as follows:
\begin{itemize}
\item for each $n \geq 1$, an n-ary operation $\productn$ on objects of \catcw so that if $\An$ is a sequence of $n$ objects of $\catcw$ then $\productn(\An)$ is an object of \catc,
\item for each $n \geq 1$, \foreachi, a morphism $p_{n,i}(\An):\productn(\An) \morph A_i$ in \catc, which when it is unambiguous we abbreviate as $p_i: \productn(\An) \morph A_i$
 such that

\begin{center}
\begin{displaymath}
\begin{array}{cp{.9cm}cp{.9cm}c}
\Rnode{A1}{A_1} & &   & &              \\ [0.3cm]
\Rnode{A2}{A_2} & &   & &              \\ [-0.1cm]
 \raisebox{-0.3cm}{\vdots} & & \Rnode{PROD}{\productn}(\An)  & &  \\ [0.2cm]
\Rnode{An}{A_n} & &   & & 
\end{array}
\end{displaymath}
\end{center}
\ncarr{PROD}{A1}
\blabel{p_1}[0.55][0.5]
{
\setlength{\arroffsetA}{2pt}
\ncarr{PROD}{A2}
\setlength{\arroffsetA}{0pt}
}
\blabel{p_2}[0.55][0.5]
{
\setlength{\arroffsetA}{2pt}
\setlength{\arroffsetA}{0pt}
}
\ncarr{PROD}{An}
\alabel{p_n}[0.55][0.5]
is a product diagram in $\catcw$ i.e for all objects $X$ of \catcw, for all morphisms $\fn$ of \catcw such that \foreachi, $f_i:X \morph A_i$ there is a unique
morphism $f$, $f: X \morph \productn(\An)$ such that \foreachi, $f \circ p_i = f_i$. In situations where it is not ambiguous, the unique such $f$ corresponding to $\fn$ we write as
$\tuple{\fn}$,
\item
for every object $A$ of \catc, $\product{1}(A)=A$ and $p_{1,1}(A) = id_A$,

\item suppose $n \geq 1$ and that \foreachi, that $\alpha_i$ is a sequence of objects of objects of \catcw of length $m_i$, for some $m_i$,
so that \foreachi, for each $j$, $1 \leq j \leq m_i$, $\alpha_{i,j}$ is an object of \catc,  denote by $\alpha$ the concatenation of the sequences
$\alpha_1,...\alpha_n$ and suppose that the sequence $\alpha$ is of length $m$ i.e. suppose  
$$m=\sum_{1 \leq i \leq n}m_i,$$ 
then
$$
\productn (\product{m_1}(\alpha_1),...\product{m_n}(\alpha_n))= \product{m}(\alpha)
$$
and the projection morphisms cohere in the sense that for \foreachi, for each $j$, $1 \leq j \leq m_i$, 
the projection $p_i \circ p_j:\productn (\product{m_1}(\alpha_1),...\product{m_n}(\alpha_n)) \morph \alpha_i$
is equal to the corresponding \footnote{
By which I mean the projection function $p_k$ where  $$k = j + \sum_{1 \leq i' < i}m_i$$.}
projection function $p_{k} : \product{m}(\alpha) \morph \alpha_i$.  
\end{itemize}
\end{definition}

From the definition of $\tuple{\fn}$ we can easily show
\begin{lemma}
\llabel{xxxx}
If $f: X \morph Y$ in a category with n-ary products \catcw and if \foreachi, $g_i:Y \morph A_i$
in \catcw then $f \circ \tuple{\gn}=\tuple{f \circ g_1,...f \circ g_n}$.
\end{lemma}

\subsection{Unique Factorisation}
\begin{definition}
In a category with n-ary products \catcw define an object $A$ of \catcw to be \term{prime} iff there does not exist $n > 1$ and a sequence of objects $\An$ 
such that $A=\productn(\An)$
\end{definition}
I am going to make a simplifying assumption and restrict attention to categories with n-ary products having the following property.
\begin{definition}
A category with n-ary products has the \term{unique factorisation property} iff for all objects $X$ of $\catc$
there is an $n \geq 1$ and a sequence of prime objects $\An$ such that $X=\productn(\An)$ and the multiset $\set{\An}$
is unique i.e. if for some other sequence $\Bm$, $X=\product{m}(\Bm)$ then $n=m$ and there is a permutation $\sigma:\set{\n} \morph \set{\n}$ such that \foreachi,
$A_i=B_{\sigma(i)}$.
\end{definition}

\section{Construction of a category with symmetric products}
\subsection{Sequences, Multisets and Permutations}

We are going to be working with finite sequences of objects of categories. In this subsection we 
consider notation for finite sequences in general by assuming a set $U$ and considering a sequence to be exactly a function $\alpha: \set{\n} \morph U$.

For any finite sequence $\alpha$, any element $\alpha_i$ occuring in $\alpha$ may occur a number of times at 
different positions in the sequence. The number of copies is called the \textit{copy number}. If we number each of these copies from $1$ upwards then we call this numbering the \textit{copy instance number} and we shall denote
the numbering function  $c_\alpha$ so that $c_\alpha: \set{\n} \morph N$. If we write
$|S|$ for the cardinality of set $S$ then, 
formally,
the function is defined by
$$
c_\alpha(i) = |\setsuchthat{j}{1 \leq j \leq i \mbox{ and }\alpha_j=\alpha_i}|
$$

If we have two sequences $\alpha$ and $\beta$ then as multisets they may be equal 
which is to say that there may be a permutation $\sigma: \set{\n} \morph \set{\n}$ such that 
\foreachi, $\alpha_i = \beta_{\sigma(i)}$
i.e. such that the diagram

\begin{center}
\begin{equation}
\label{permutingcontexts}
\begin{array}{cp{.5cm}c}
\Rnode{alphan}{\set{\n}}&&                  \\ [0.5cm]
                        &&   \Rnode{U}{U}   \\ [0.5cm]
\Rnode{betan}{\set{\n}} &&                           
\end{array}
\end{equation}
\ncarr{alphan}{U}
\alabel{\alpha}
\ncarr{betan}{U}
\blabel{\beta}
\ncarr{alphan}{betan}
\blabel{\sigma}
\end{center}
commutes. It is easy to see that if there is such a permutation then there is a cannonical such
permutation, we denote it $\sigma_{\alpha,\beta}$, which preserves copy instance number i.e. such that the diagram
\begin{center}
\begin{equation}
\label{preservingcopynumber}
\begin{array}{cp{.5cm}c}
\Rnode{alphan}{\set{\n}}  &&              \\ [0.5cm]
												  && \Rnode{N}{N} \\ [0.5cm]
\Rnode{betan}{\set{\n}}   &&            
\end{array}
\end{equation}
\ncarr{alphan}{N}
\alabel{c_\alpha}
\ncarr{betan}{N}
\blabel{c_\beta}
\ncarr{alphan}{betan}
\blabel{\sigma_{\alpha,\beta}}
\end{center}				
commutes.

\begin{observation}
\llabel{cannonicalpermutation}
If two sequences $\alpha$ and $\beta$ are equal as multisets then there exists a unique permutation $\sigma_{\alpha,\beta}$ of $\alpha$ to $\beta$ 
that preserves copy instance number which is to say that there exists a unique
 $\sigma_{\alpha,\beta}: \set{\n} \morph \set{\n}$ 
such that \foreachi, $\alpha_i = \beta_{\sigma_{\alpha,\beta}(i)}$ 
and $c_\alpha(i) = c_\beta(\sigma_{\alpha,\beta}(i))$ i.e. such that
diagrams (\ref{permutingcontexts}) and (\ref{preservingcopynumber}), above, commute.
\end{observation}

\begin{observation}
\llabel{idcannonical}
If $\alpha$ is any sequence then $\alpha$ as a multiset $\alpha$ is equal  to itself and
the cannonical permutation 
$\sigma_{\alpha,\alpha}$ is the identity permutation.
\end{observation}

Cannonical permutations compose to give cannonical permutations:
\begin{lemma}
\llabel{compositionofcannonicals}
If  $\alpha$, $\beta$ and $\gamma$ are sequences then if $\alpha$ and $\beta$ are equal as multisets and if $\beta$ and $\gamma$ are equal as multisets then
$\alpha$ and $\gamma$ are equal as multisets, and
$\sigma_{\alpha,\gamma}=\sigma_{\alpha,\beta} \circ \sigma_{\beta,\gamma}$.
\end{lemma}
\begin{proof}
It suffices to show that the permutation $\sigma_{\alpha,\beta} \circ \sigma_{\beta,\gamma}$
preserves copy instance number. This can be seen as the commutivity of the outer diagram
follows from the commutivity of the inner diagrams here:
\begin{center}
\begin{displaymath}
\begin{array}{cp{.5cm}cp{.7cm}c}
                         && \Rnode{alphan}{\set{\n}}   &&              \\ [1.2cm]
\Rnode{betan}{\set{\n}} &&                           && \Rnode{N}{N} \\ [1.2cm]
                         && \Rnode{gamman}{\set{\n}}   &&             
\end{array}
\end{displaymath}
\ncarr{alphan}{N}
\alabel{c_\alpha}
\ncarr{betan}{N}
\alabel{c_\beta}
\ncarr{gamman}{N}
\alabel{c_\gamma}
\ncarr{alphan}{betan}
\blabel{\sigma_{\alpha,\beta}}
\ncarr{betan}{gamman}
\blabel{\sigma_{\beta,\gamma}}
\end{center}				
\end{proof}

\subsection{The symmetry congruence structure}
For the definition of congruence structures as certain generalised congruences see \cite{Cartmell2020}.
If $\catcw$ is a category with finite products having the unique factorisation property then define an congruence structure on \catcw as follows.
If $A$ and $B$ are objects of $\catcw$ that are uniquely factorised as $\productn(\An)$ and $\product{m}(\Bm)$, respectively, then define
$A \sim B$ iff the multisets $\set{\An}$ and $\set{\Bm}$ are equal. 
For $A$ and $B$ objects of \catcw such that $A\sim B$ define $i_{A,B}=\tuple{p_{\sigma^{-1}(1)},...p_{\sigma^{-1}(n)}}$ where $\sigma$ is the unique permutation of the set $\set{\n}$ described in observation \lref{cannonicalpermutation}
such that \foreachi, $A_i=B_{\sigma(i)} \mbox{ and }  c_A(i) = c_B(\sigma(i))$.  

\begin{lemma}
$\sim$ and $i$, so defined, constitute an congruence structure on the category $\catc$.
\end{lemma}
\begin{proof}
It follows directly from its definition that $\sim$ is an equivalence relation.
That $i$ satsifies condition (i) follows because if object $A$ is factored as $\productn(\An)$
then the cannonical permutation $\sigma_A$ is the identity permutation and therefore 
$i_{A,A}=\tuple{\pn}=id_A$.

To show that $i$ meets condition (ii) assume $A$ factorises as $\productn(\An)$,
$B$ as  
$\productn(\Bn)$, 
and $C$ as $\productn(\Cn)$. 
We have
\begin{align*}
i_{A,B} \circ i_{B,C} 
   & = i_{A,B}
				     \circ 
            \tuple {p_{\sigma_{B,C}^{-1}(1)},...p_{\sigma_{B,C}^{-1}(n)}}
						        && \mbox{expanding the definition of $i_{B,C}$ }\\
	 & = \tuple{i_{A,B} \circ p_{\sigma_{B,C}^{-1}(1)},...i_{A,B} \circ p_{\sigma_{B,C}^{-1}(n)}}                    && \mbox{by lemma \ref{xxxx}},\\
	 & = \tuple {p_{\sigma_{A,B}^{-1}(\sigma_{B,C}^{-1}(1))},...
					                                       p_{\sigma_{A,B}^{-1}(\sigma_{B,C}^{-1}(n))}}
										&& \mbox{\raisebox{-10pt}{\parbox{6cm}{since, from defintion of $i_{A,A}$, \foreachi, $i_{A,B} \circ p_i = p_{\sigma_{A,B}^{-1}(i)}$}}}, \\
   & = \tuple {p_{\sigma_{A,C}^{-1}(1)},...p_{\sigma_{A,C}^{-1}(1)}}
                  && \mbox{since $\sigma_{A,B} \circ \sigma_{B,C}  = \sigma_{A,C}$, by lemma \ref{compositionofcannonicals}, } \\
	 & = i_{A,C}      && \mbox{by definition of $i_{A,C}$}.	
\end{align*}                     
\end{proof}

\section{Example of Data Model which is non-cancellative}
This could be used in preparation for a mathematical theory of data.
\daynote{Tues 28th Oct 2018.}

\section{Characterising Diagrams}
Definition in general setting\daynote{Thurs 19 July 2018}

\bibliography{../SharedBibliography/temp/bibliography}

\end{document}
