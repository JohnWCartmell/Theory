
\section{Scope}
\label{Scope}
If we can imagine examining all binary relationships and all their possible instances then we would find in this examination that a very  good number of  binary relationships have instances that  do not reach as far across the landscape of entities as would seem possible from an examination of the types of entity involved.

\mynote As an example consider the example given earlier of a triangle of relationships involving students, professors and departments. 
Now consider from the point of view of an individual student. 
According to the diagram this student may or may not have an advisor. Lets suppose that a certain student does have an advisor. Now related to this student there are potentially two different departments (i) the department that the student majors in (ii) the department that their advisor is on the staff of. Let us suppose that the diagram is part of an entity model of University X and suppose university X has a rule that students are advised by professors from the departments that they major in. Since the context for the diagram is University X then these two departments related to an individual student entity are bound to be identical. To reflect this property, in this book, we say that the triangle is a scope triangle.\footnote{Without wanting to put-off non-mathematicians I also need to point out that there is a mathematically algebraic way of describing the property that this triangle of relationships has in the context of University X. For now we can say that it a near-commuting triangle of relationships and leave it at that.}   


\begin{noteforfuture}Need an example here. It would be best for it to be an observation or an enhancement regarding an earlier example. Could it be from Barker?
\end{noteforfuture}

We use the term \textit{scope} and speak of the scope of a relationship as a way of articulating the  extent or range across which instances a relationship may reach.  

Its scope is a characteristic of a relationship. A relationship may be broad in scope or narrow in scope. The broader it is in in scope the more bits of information are needed to communicate its instances. 

In a programming or database context an understanding of scope comes an understanding of scope errors i.e. violations of scope. 

Exercises: Which of the following triangles can we expect to be near-commuting:
a) b) c) d)

\begin{noteforfuture}
Schlaer Mellor example. Documented as a danger. Here we don't see it as a danger but something to get ahead of. To document scope up front when relationships are documented in an entity model.
\end{noteforfuture}

\subsection{Paths of Relationships}
Questions of commutativity are very important in how data is represented - in saying this we need to clarify that by commutativity we make reference to the commutative diagrams that form the basis of category theory whether expresed in diagrams or in equations or in some other form and that by the term data representation we mean to include both the tabular relational means of storing and presenting data and also such hierarchical data representations as are familiar in, but not restricted to, XML documents. What is described here is essentially about the means of anaphorical reference, whether we talk strictly of data or of communication generally; its relevance goes beyond a strict computer science interpretation.

In the terminology of Ellis Ellis, HC. A Refined Model for Definition of System Requirements. Database Journal, 12(3):2--9, 1982. , wherever in an entity model there is a path of single-valued relationships:

\begin{center}
\input{\handCraftedImagesFolder/path.tex}
\end{center}
then the destination entity type b is said to be in the logical horizon of the source entity type a. In programming, equivalently, we might say that it was possible to navigate from any one a to a definitive other b. Now if there are two such navigation paths between entity type a (the source) and entity type b (the destination) then a question naturally arises as to whether following one path is equivalent to following the other i.e whether starting at any entity of type a we arrive at the same destination entity of type b regardless of which of the two paths we follow. In an abstract mathematical setting, diagrams showing such equivalent paths are said to be commutative diagrams and methods of reasoning using such diagrams is the starting point of category theory.

Scope diagrams of mandatory relationships are examples of near commuting diagrams, techically they only commute if the relationships whose scope they describe is specifed to be mandatory i.e cardinality One rather than Zero Or One. For instance there are examples of such commuting scope diagrams here: The Scope Concept.

The questions that are important for how data is represented concern the commutativity of diagrams of relationships - which diagrams commute - which is to say if one were to navigate the entitites and relationships to be represented in the data which navigational paths are equivalent? Understanding and agreeing the answer is cruical to data representation and interpretation, as we now illustrate.

\subsection{Table example}
\begin{erboxedFigure}{H}{tableA}{The diagram commutes in that entity type data cell has entity type table in its logical horizon following two distinct paths: OfRow followed by ofTable and ofCol followed by ofTable. The same table will be reached which ever path is followed in otherwords, in the language of category theory, the diagram commutes.}
\input{\ImagesFolder/tableA.tex}
\end{erboxedFigure}

\subsection{Portrayal of a Dramatic Role example}
\begin{erboxedFigure}{H}{dramaticArtsPortrayalScope}{A commuting square of identifying relationships.}
\input{\ImagesFolder/dramaticArtsPortrayalScope.tex}
\end{erboxedFigure}

\subsection{Shlaer \& Lang}
\begin{erboxedFigure}{H}{shlaerMellorAdvisedByScope}{Shlaer \& Lang Example --- either of two relationships seen as constrained. A student is related to a department in two different ways. Once directly withy the department they are majoring in and once indirectly with the department that professor they are advised by is on the staff of. \textit{student} and \textit{department} are related by two paths. One is teh singleton path, the relationship \textit{r1}; the other is the path \textit{r2} followed by \textit{r3}. WE ask the big question are these two paths equivalent?}
\input{\ImagesFolder/shlaerMellorAdvisedByScope.tex}
\end{erboxedFigure}

\subsection{Flight Leaving From}
\begin{erboxedFigure}{H}{airlineFlightLeavingFromScope}{Flight Leaving From Relationship Scope}
\input{\ImagesFolder/airlineFlightLeavingFromScope.tex}
\end{erboxedFigure}

\begin{erboxedFigure}{H}{airlineFlightLeavingFromNonCommuting}{Flight Leaving From Relationship Candidate Scope diagram that is non-Commuting and thertefore is NOT a scope diagram.}
\input{\ImagesFolder/airlineFlightLeavingFromNonCommuting.tex}
\end{erboxedFigure}

\subsection{SSADM Book}
\begin{erboxedFigure}{H}{SSADMCarHireCommuting}{Commuting Diagram spotted in SSADM Book Example}
\input{\ImagesFolder/SSADMCarHireCommuting..diagram.tex}
\end{erboxedFigure}

\begin{erboxedFigure}{H}{SSADMCarHireNonCommuting1A}{Non-Commuting Diagram spotted in SSADM Book Example. Candidate scope diagram for relationship `driven by'.}
\input{\ImagesFolder/SSADMCarHireNonCommuting1A..diagram.tex}
\end{erboxedFigure}

\begin{erboxedFigure}{H}{SSADMCarHireNonCommuting1B}{Non-Commuting Diagram spotted in SSADM Book Example. Candidate scope diagram for relationship `user of'.}
\input{\ImagesFolder/SSADMCarHireNonCommuting1B..diagram.tex}
\end{erboxedFigure}

\begin{erboxedFigure}{H}{SSADMCarHireNonCommuting1C}{Non-Commuting Diagram spotted in SSADM Book Example. }
\input{\ImagesFolder/SSADMCarHireNonCommuting1C..diagram.tex}
\end{erboxedFigure}

\begin{erboxedFigure}{H}{SSADMCarHireNonCommuting2}{Non-Commuting Diagram spotted in SSADM Book Example. }
\input{\ImagesFolder/SSADMCarHireNonCommuting2..diagram.tex}
\end{erboxedFigure}

\subsection{Anyone for cricket?}

\begin{erboxedFigure}{H}{cricketMatch..diagram}{The game of cricket --- Containing four non-trivial commuting diagrams. BTW: This example shows that need to take a nuance view of core versus derivative. Otherwise would omit the depedency of innings on match
because could be derived versus battingSide or by fieldingSide. Would then want a scope square with batting side and fielding side and a double helping of the dependency of side on match.}
\input{\ImagesFolder/cricketMatch..diagram.tex}
\end{erboxedFigure}

