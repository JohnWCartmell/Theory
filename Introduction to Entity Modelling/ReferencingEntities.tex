\section{Referencing Entities}
\label{ReferencingEntities}

In this section we explore the significance of the identifying features
of a type and the manner in which knowledge of these features, 
be they attributes or relationships, enables us to 
reference entities and, in turn, 
to convey, communicate and store instances of relationships. 
There is more to this than initially meets the eye and we explore the topic
by way of examples. 

\subsection{Entities that are Named}
\mynote \commentary{Possibly ditch this example and just use the 
dramatic arts example which could be moved here.}
In the simplest examples, entities of a type have names associated with them
 and these names are unique and can be  quoted to reference entities of the type. 
 In these cases an entity model will represent the entity type with a name attribute
and mark it as identifying. 
Examples of such types are ubiquitous and you will see plenty in these pages but to mention two, because we have already come across them, in a model that includes the 
entity types \textit{planet} and  \textit{moon}  these types will be represented as having 
a name attribute and these will be marked as identifying as in this fragment here:
\begin{equation}
\label{planetMoonModel}
\input{\ImagesFolder/planetMoon2.tex}
\end{equation}
This tells us that we can reference planets by name, as in \textit{the planet with name Jupiter}
and, likewise, moons, so that we can make reference to \textit{the moon with name Io}. 
Note that these utilise a standard phraseology to reference entities using the values of their singular identifying attributes. 
To illustrate various characteristics of this referencing, 
we will underline the values of identifying attributes in our example phrases 
and we will use different styles of underlining to distinguish different entities that are being referenced. We see this in this statement: 
\begin{equation}
\label{JupiterIoPernickity}
\mbox{\textit{The planet with name \rdash{Jupiter} 
is orbited by the moon with name \rdot{Io}.}}
\end{equation}
This is an example of a wider standard phraseology, one  for conveying relationships,
and one that builds on the standard phraseology for referencing instances.
There is a bit more to this than meets the eye, though, as we shall see.
\mynote
When the values of identifying attributes are used in referencing then we will speak of them as \textit{referentials}. 
Accordingly, we speak of the terms `Jupiter' and `Io' in statement (\ref{JupiterIoPernickity}) as referentials.

In the context of statement (\ref{JupiterIoPernickity}), Jupiter is the name of, and therefore  a reference to, a planet and  Io is the name of, and therefore a reference to, a moon (aka a natural satellite).
Note though that within the context of the solar system the name Io  doesn't uniquely identify this moon of Jupiter amongst all named solar system objects since it is also the name of an asteroid that orbits within the asteroid belt. This  illustrates that 
the names of moons are only unique as names of moons. This is very much the meaning of the underlining of the name attribute in fragment (\ref{planetMoonModel}). 

\mynote
We are very much stating the obvious of course but there is a pattern here and it is repeated over and over when instances of relationships are communicated  and the same pattern occurs more formally  and uniformly when instances of relationships are communicated in software systems and/or stored in data.

We will come back to the phrasing of relationship instances in a monent but first we must look at what happens when some of the identifying features of an entity are relationships.

\subsection{Context and the Referencing of Entities}
\mynote
In this section we look at the way that entities may be referenced using identifying features
 when one these of features is a relationship.
We examine how,  in this situation, the referencing 
--- the nature of the reference ---   
is impacted by the context within which the reference is being made. 
The reference is  a noun phrase quoting the values of identifying attributes
and with the number quoted depending on 
the context within which the reference is made.
What we see contributes to a later analysis --- the analysis of  how 
instances of a relationship can be conveyed, communicated or stored and
how this is affected by shared knowledge we might have about 
the scope of  the relationship.\footnote{Speak of scope beforehand because need to keep interest in what seems not interesting. Add footnote about scope at first use (here?). Probably explain scope in next section because scope affects everything not just ``data''.} \footnote{if explained before could here say ``Here is that scope concept again. Explanation comes in next section.''}

\mynote
 We use as an example the referencing of characters from  plays
 within the context of  the  dramatic arts
   as modelled earlier in figure \ref{dramaticArts1}.
\mynote
Consider this fragment 

\begin{noteforfuture}
dramaticsArtsCharcterIdentificationSubdiagram
subdiagram of dramatic arts just showing playwright, play and character
and their identifying features
\end{noteforfuture}
of figure \ref{dramaticArts1} which picks out just the details which are
relevant to the identification of character entities.

From this part of the model we see that playwrights are identified by name and that plays are identified by their titles in the context of the playwright they are written by. Therefore
\begin{itemize}
\item without context, 
\begin{equation} 
\label{absolutePlayReferencing}
\text{\parbox{9cm}{\textit{a  play 
may be referenced by the \rdash{title} of the play and the \rdash{name} of the playwright it is written by.}}}
\end{equation}
\end{itemize}
Note that I will continue to underline  referentials so as to keep drawing attention to the number of them required in any given context.

\mynote
From inspecting the representation of the character type and in particular its identifying features then we see that:
\begin{itemize}
\item within the context of a play,
\begin{equation} 
\label{absoluteCharacterReferencing}
\text{\parbox{9cm}{\textit{
a character may be referenced by the name of character.}}}
\end{equation}
Accordingly in the text of a play characters are referenced 
by name as for example in a stage direction such as this one:  
\begin{equation*}
\text{\textit{Enter Sebastian.}}
\end{equation*}
\item within the context of a particular playwright,
\begin{equation} 
\label{playwrightRelativeCharacterReferencing}
\text{\parbox{9cm}{\textit{
 a character within a play 
may be referenced by the name of character, the title of the play they are in.}}}
\end{equation}
So in a discussion of favourite characters from Shakespeare we might 
make reference to
\begin{equation*}
\text{\textit{\rdash{Sebastian} from \rdash{Twelfth Night}.}}
\end{equation*}
\item
without context, 
\begin{equation} 
\label{absoluteCharacterReferencing}
\text{\parbox{9cm}{\textit{a character within a play 
may be referenced by the name of character, the title of a play and the name of the playwright who wrote the play.}}}
\end{equation}
In of favourite comic charcaters from the dramatuc arts reference might be 
made to
 \begin{equation*}
\label{TounchstoneReferenceFromAbsolute}
\text{\parbox{9cm}{\textit{\rdash{Touchstone} from \rdash{Shakespeare}'s \rdash{As You Like It}. }}}
\end{equation*}
\end{itemize}

\iffalse
\begin{oldtt}
In the first instance, 
since there are only a few specific details of figure \ref{dramaticArts1}
 --- three in fact ---
that concern us here we pull these out as details  (a), (b) and (c) in
figure \ref{dramaticArtsIdentificationDetails} . 
%\vspace{-0.2cm} % Dont know why I need this but I do.
\begin{erboxedFigure}{H}{dramaticArtsIdentificationDetails}
{Details from the model of the dramatic arts that was presented in figure xxx.
(a), (b) and (c) show the identifying features of, respectively, types character, play and playwright. 
}
\vspace{-0.7cm}% Dont know why I need this but I do.
\begin{tabular}{ccccc}
(a) 
\raisebox{-1.5cm}{\input{\ImagesFolder/dramaticArtsPlayCharacterDetail.tex}}
 && (b) \kern-0.35cm
\raisebox{-1.5cm}{\input{\ImagesFolder/dramaticArtsPlaywrightPlayDetail.tex}}
 &&  (c) 
\raisebox{-1.5cm}{\input{\ImagesFolder/dramaticArtsAbsolutePlaywrightDetail.tex}}
\end{tabular}
\end{erboxedFigure}

From (a), (b) and (c) taken together we have that
\begin{equation} 
\label{absoluteCharacterReferencing}
\text{\parbox{9cm}{\textit{without context, a character within a play 
may be referenced by the name of character, the title of a play and the name of the playwright who wrote the play.}}}
\end{equation}

\mynote In answer to the quiz question ``Who is the character from a play who, famously, teaches diction to a flower girl?''
 then a fully elaborated answer will contain three referentials as here:
 \begin{equation*}
\label{HenryHigginsReferenceFromAbsolute}
\text{\parbox{9cm}{\textit{\rdash{Henry Higgins} from \rdash{George Bernard Shaw}'s \rdash{Pygmalion}. }}}
\end{equation*}

in accordance with (\ref{absoluteCharacterReferencing}) this features the values of three identifying attributes --- I have underlined the three values.

\begin{noteforfuture}
\newcommand{\pRel}[1]{$\uwave{#1}_{\raisebox{0.3ex}{\scriptsize r}}$}
\newcommand{\pUnd}[1]{\textit{#1}} %undecorated
\begin{equation*}
\parbox{9cm}{
$\uline{Henry\ Higgins}_E$ \pRel{in} George Bernard Shaw's Pygmalion. }
\end{equation*}
\begin{equation*}
\parbox{9cm}{
\pUnd{the character with name Henry Higgins} \pRel{in} \pUnd{the play with title Pygmalion} \pRel{written\ by} \pUnd{the playwright with name GBS.} 
}
\end{equation*}
\end{noteforfuture}

\mynote %65
On the other hand, details (a) and (b) taken together imply: 
\begin{equation}
\label{characterReferenceFromPlaywright}
\text{\parbox{9cm}{\textit{within the context of a playwright
(say in a discussion of the works of a playwright), 
a character within the works of the playwright 
can be referenced by the title of a play 
and a name of a character within that play. }}}
\end{equation}
So in answer to a question``Who is the Shakespeare character who is a twin brother and is believed lost at sea?''
someone might answer with 
\begin{equation*}
\label{antonioReferenceFromPlaywright}
\text{\parbox{9cm}{\textit{Sebastian from Twelfth Night. }}}\\
\end{equation*}
using both name of the character and title of the play and, 
in accordance with (\ref{characterReferenceFromPlaywright}),
using the values of two identifying attributes.

\mynote %new note 66
Detail (a) alone can be paraphrased as: 
\begin{equation}
\label{characterReferenceFromPlay}
\text{\parbox{9cm}{\textit{within the context of a play, a character within it can be referenced by name}}}\\
\end{equation}

So in this stated context the value of a single identifying attribute suffices. 
Accordingly in a stage direction such as this one:  
\begin{equation*}
\text{\textit{Enter Sebastian.}}
\end{equation*}
as we are soundly rooted in the context of a play, in this case in William Shakespeare's Twelfth Night, say,
though the name of the character isn't unique, not so even in the plays of Shakespeare, the name alone
 --- the value of a single identifying attribute --- suffices.
This is the simplest of observations
but it is worth drawing attention to it  
because it is an an example of a phenomenon  that is significant
and impactful on the way that 
relationships are conveyed, communicated and stored.
Examples like this will be used to illuminate a  mechanism frequently found at work in the structuring of data.

\begin{exerciseforreader}
Describe a phraseology 
at work to produce  (\ref{characterReferenceFromPlay}) from detail (a). 
Use the same phraseology to algorithically paraphrase details (b) and then detail (c).
What mistakes of english arise?
What would a phraseology need take account of to correct these mistakes.
What would a more flexibly phraseology need take into account.
\end{exerciseforreader}
\end{oldtt}
\fi
 \subsection{Referencing Intersection Entities}
 An example of referencing when all idenitfying features are relatiuonships.

\begin{equation*}
\text{\textit{Zephrelli's production of shakepeare's twelfth Nigh.}}
\end{equation*} 

\subsection{Referentials}
\mynote
In this book we will refer to the values of identifying attributes as referentials.
In the examples above 
and assuming  the model of the dramtics arts previously given in figure xxx,
 `Sebastian', `Twelfth Night' and `Shakespeare' are all referentials 
 as to are `Henry Higgins', `George Bernard Shaw'  and `Pygmalion' and
we saw that depending on context one, two or three referentials were required
 to identify an entities of type character.
\mynote 
Later in this book we will introduce attributes whose values are referentials 
for the purpose of referencing one entity from another.
In general, it requires multiple referentials to reference an entity (one for every identifying
feature of the entity) and so, in general, multiple referential attributes are used to represent relationships.\footnote{If you are already familiar with the relational model of data then you ought recognise that I am speaking of foreign keys here. 
I am avoiding use of the term `foreign key' though --- I don't find it very helpful --- its use is an accident of history and some standards (which) have avoided use of it and have used the term referential attribute or column (which?) instead. } 

\mynote Somewehere: Sally Shlaer and Stephen J. Mellor use the term referential attribute
in their book \textit{OBJECT-ORIENTED SYSTEMS ANALYSIS --- Modeling the World in Data}.

\subsection{Communicating Relationships}

\mynote This section is about how we use referentials to communicate instances of relationships.
As we have said above and according to the model we have assumed,
  characters from plays need be identified by three referentials
 --- the name of the character, the title of the play and the name of the playwright.


\mynote example here of actor playing role in play, say. To show use of four referentials.\commentary{Before we give this six example give the example of an actor playing a role so that I can give an example with four referentials and include in this the syntag notation so that has been introduced before the example with collapsed referentials.}
This relies on model of dramatic arts that I haven't sketched out yet and this may be a problem.

\mynote Second example:
That there three referentials to reference a character naively implies that if we wish to communicate an instance of relationship between two different characters then we will be required to communicate six referentials
 -- three to identify one party in the relationship and three to identify the other party. 
 we will see shortly  --- and this is very significant --- that this is not always the case.

An example that supports this view that six referntials are required is found in this statement\footnote{You will have to give me a bit of leeway regarding the correctness or otherwise of this statement --- it is the structure that I interested in.}
\begin{center}
\begin{tabular}{l}
\parbox{7cm}{\textit{\rdash{Romeo} from \rdash{Shakespeare}'s \rdash{Romeo and Juliet}
                           \uwave{is modelled on} \rdot{Pyramus} from \rdot{Ovid}'s \rdot{Metamorphoses}.}}
\end{tabular}
\end{center}
which, interpreted from the perspective of the dramatic arts that we have given above, does indeed contain six referentials. The first three shown with dashed underlining reference one character.
The verb of the sentence is the name of the relationship, and, the final three referentials with dotted underlining reference a second charater from a different play and a different author.\footnote{I am using a bit of artistic licence here since Metamophoses isn't strictly a play - its a bunch of stories.}

\mynote
 This is not the case, and so not what we instinctively do, when we have \textit{a priori} knowledge of the relationship being communicated is limited in scope. If we know the relationship is confined to individual playwrights or is internal to individual play or script then clearly we do not 
  communicate the playwright and play title twice over. The number of referentials may in such a case collapse to four: name of playwright, title of play and name of character.
Shlair-Lang in a very much underrated paper coined the term \textit{collapsed referentials} for this phenomena in the context of data representation.

\mynote was %90 communicating entitites
So we have, in the context of the plays of William Shakespeare,
\begin{equation}
\label{AntonioLovesSebastian2}
\mbox{\textit{The character Antonio in Twelfth Night loves Sebastian.}}
\end{equation} 

You might think that a pedantic elaboration of (\label{AntonioLovesSebastian}) would be:
\begin{equation}
\text{\parbox{9cm}{\textit{The character named Antonio in Shakespeare's play Twelfth Night loves the character named Sebastian in Shakespeare play Twelfth Night.}}}
\end{equation} 
but there is a reason why the shorter
\begin{equation}
\text{\parbox{9cm}{\textit{The character named Antonio in Shakespeare's play Twelfth Night loves the character named Sebastian.}}}
\end{equation} 
is equally unambiguous. This is because the relationship `loves' in this context is a relationship which is internal to the plot of a single individual play. 
It is an intra-play relationship rather than an inter-play relationship.
Reading from left to right we establish that we are making a statement about 
Antonio from Twelfth Night  and so must look to establish Sebastian as a character from the same play i.e. also from Twelfth Night. This is an example of a relationship which is not global in scope (it is local to the play) and therefore describing instances of this fictional loves relationship
doesn't require as many referential attributes as would otherwise be the case if it was global in scope. 

The relationship is conveyed by a total of four referential attributes
 not the six that might have been required
if the relationship was global in scope so that characters from one play might be described as being in love with a character from a different play.


\begin{erboxedFigure}{H}{SebastianLovesAntonio}
{Referencing two different characters using just four referentials. This is an example of what Shlaer and Lang (?) called collapsed referentials. What we see is that referential `Shakespeare' contributes to two different references. Likewise does the referential `Twelfth Night'.}
\newcommand{\dashRefOne}{2pt 2pt}
\newcommand{\dashRelationship}{1pt 0pt}
\newcommand{\dashRefTwo}{1pt 1pt}
\begin{tabular}{l}
\Rnode{w1}{\rdash{Antonio}} in \Rnode{w2}{\rdot{\rdash{Shakepeare}}}'s \Rnode{w3}{\rdot{\rdash{Twelfth Night}}} \Rnode{w4}{\rline{loves}}  \Rnode{w5}{\rdot{Sebastian}} \\[1.4cm]
\kern1.2cm\Rnode{ref1}{\textit{reference 1}}
\kern0.75cm\Rnode{rel}{\textit{relationship}}
\kern0.6cm\Rnode{ref2}{\textit{reference 2}} \\[0.5cm]
\syntag{\dashRefOne}{ref1}{0.9}{w1}{0}
\syntag{\dashRefOne}{ref1}{0.9}{w2}{-0.2}
\syntag{\dashRefOne}{ref1}{0.9}{w3}{-0.2}
\syntag{\dashRelationship}{rel} {0.7} {w4}{0}
\syntag{\dashRefTwo}{ref2}{0.4}{w2}{0.2}
\syntag{\dashRefTwo}{ref2}{0.4}{w3}{0.3}
\syntag{\dashRefTwo}{ref2}{0.4}{w5}{0}
\end{tabular}
\end{erboxedFigure}


The models of the two relationships \commentary{which two relationships? do we need depict them on er fragment}
look the same but behind the scenes they are different. They have different scopes and we come back to exploring this further in the next section. \commentary{Might show the detail of loves and modelled by as details of the earlier model in figure xxx.}

\begin{noteforfuture}
 I should introduce intersection entity notation and phraseology? What would it be. Also for ternary relationships. 
\begin{equation}
\text{\parbox{9cm}{Actor guilgud plays antonio in zephrelli's production of shakepeare's twelfth Nigh}}
\end{equation}
\end{noteforfuture}


\subsection{Philosophy}
\mynote
There are one, two or three attribute values to reference a character from a play namely
the name of character, maybe, the title of the play and, maybe, the name of the playwright. 
These values are universals so up to three universals to reference a play. 
Such universals as these are what we use to reference entities 
and therefore to communicate relationship instances.
\mynote
We think particulars --- entities and relationships --- but we speak universals.
\mynote
Further, universals are the stuff of data though its meaning is in the 
particulars --- entities and relationships --- it describes. 

\newpage


 
