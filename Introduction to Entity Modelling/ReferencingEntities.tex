
\newcommand{\BarkerEllisIdentiyingRelationship}{\barkerEllisJ}

\section{Referencing Entities}
\label{ReferencingEntities}

 We now explore how the arrangement of identifying features of a type of entity guides us in the phrasing of references to instances of the type, 
 and how this, in turn, shapes the ways we convey, communicate, and store instances of relationships.
There is more to this than initially meets the eye.
Through examples, we will see that the existence of comparable paths that are equivalent 
(as described in Section \ref{comparisonOfPaths}) can affect how  some references are phrased.
Consequently, equivalence between paths has a direct impact on both the structure of data and on how simple, everyday facts are expressed.

This section is divided into subsections, each addressing one particular configuration of identifying features.
We begin with the simplest cases and proceed to examples involving branching chains of identifying relationships, and, in some cases, comparable or equivalent paths.
At each step, we examine how these affect the way that entities are referenced.

\subsection{Identifying Relationships and Nested References}

In what follows, references that other references depend on will generally be called subordinate references, 
and when a subordinate reference is literally contained within another --- in phrasing or structure --- we will describe it as nested.

We begin with a simple example in which there are two entity types, $A$ and $B$, connected by an identifying relationship
$A$ \BarkerEllisIdentiyingRelationship\ $B$.
The logic of identifying features dictates that in such a situation, a stand-alone reference to an entity of type $A$ includes, nested within it, a subordinate reference to an entity of type $B$  which, after the next example, we will see extends naturally when identifying relationships form a linear path.

\subsubsection{Example — Referencing an Entity of Type \textit{Play}}

Consider the type \textit{play} from the model of the dramatic arts introduced earlier in Figure~\ref{dramaticArts1..diagram}.
Its identifying features are its attribute \textit{title} and its identifying relationship \textit{written\_by}, relating each play to a playwright, as shown here:
\begin{equation*}
\input{\ImagesFolder/dramaticArtsPlayPlaywright..diagram.tex}
\end{equation*}
From this we see that a play is identified by its title together with a reference to the playwright it was written by.
Thus we may refer to:
\begin{equation}
\mbox{the play \textit{Twelfth Night} by playwright William Shakespeare}
\end{equation}
which, of course, can  be paraphrased as
\begin{equation}
\mbox{\textit{Shakespeare’s Twelfth Night}.}
\end{equation}

Either way, explicitly or implicitly, there is a reference to a play containing within it a nested reference to a playwright.
The nested reference may be omitted when the playwright is clear from context—for example, when listing Shakespeare’s comedies:
\textit{Twelfth Night, As You Like It, A Midsummer Night’s Dream}, and so on.
In general, however,
\begin{itemize}
\item without context,
\begin{equation}
\label{absolutePlayReferencing}
\text{\parbox{9cm}{
a play is referenced by a combination of the \uline{title} of the play and the \uline{name} of the playwright it is \uwave{written by.}
}}
\end{equation}
\end{itemize}
In this I have underlined the identifying attributes so as to highlight the number required in the reference --- three in ths case.


\begin{erboxedFigure}{H}{TwelfthNight}
{
An ER analysis of a two level reference to the play Twelfth Night --- this is an example of a reference with another reference nested within it.
}
\newcommand{\dashRefOne}{2pt 2pt}
\newcommand{\dashRelationship}{1pt 0pt}
\newcommand{\dashRefTwo}{1pt 1pt}
\newcommand{\synLabel}[3]
{
  \Rnode{#1}{\parbox[t]{#2cm}{\textit{#3}}}
}
\begin{tabular}{l}
the 
\Rnode{et}{\uline{play}}
\Rnode{attrvalue}{\rdash{Twelfth Night}}
\Rnode{relname}{\uwave{by}}
\Rnode{nestedref}{\rdot{playwright Shakespeare}} \\[1.5cm]

\synLabel{tagET}{1}{name of entity type}
\kern0.35cm\synLabel{tagAV}{1.65}{value of identifying attribute}
\kern0.35cm\synLabel{tagRN}{1.625}{name of identifying relationship}
\kern0.5cm\synLabel{tagNestedRef}{1.95}{\kern0.5cmnested \\reference to entity of type playwright}\\[0.5cm]
\syntag{\dashRefOne}{tagET}{0.9}{et}{0}
\syntag{\dashRefOne}{tagAV}{0.9}{attrvalue}{-0.5}
\syntag{\dashRefOne}{tagRN}{0.9}{relname}{0}
\syntag{\dashRefTwo}{tagNestedRef}{0.9}{nestedref}{0}
\end{tabular}
\end{erboxedFigure}

\newpage
\subsection{Linear Arrangements of Identifying Relationships}
\begin{newtt}
The logic described in the previous subsection can be applied iteratively.
There we considered one type of entity, $A$, identified by its own features together with an identifying relationship to another type, $B$.
Now suppose that $B$ itself has an identifying relationship to a further type, $C$, and perhaps $C$ to another, and so on.


When a type $A$ has such a path of identifying relationships emanating from it
 — that is, when the arrangement is linear and unbranched — 
 logic dictates that references to instances of that type naturally contain multiple levels of nesting.
You can think of these as Russian-doll-structured references: each reference encloses another, except the innermost, which contains no further nested reference.
\end{newtt}
\begin{oldtt}
\begin{worktt}
The situation described in the previous subsection can be extended: when an identifying relationship is followed by another identifying relationship, and so on, we obtain multiple levels of nesting — each arising from an iteration of the pattern observed earlier.
\end{worktt}
When a type has a path of identifying relationships emanating from it — that is, when the arrangement of identifying relationships is linear, with no branching — references to that type contain nested references, which in turn contain further nested references, and so on.
You might think of these as Russian-doll-structured references: each, except the innermost, contains another nested within it.
\end{oldtt}

The situation described in the previous subsection can be extended.
There we considered one type of entity, $A$, identified by its own features together with an identifying relationship to another type, $B$.
Now suppose that $B$ itself has an identifying relationship to a further type, $C$, and perhaps $C$ to another, and so on.
In such cases, the identifying relationships form a chain — a linear arrangement with no branching — and the pattern of nesting observed earlier is repeated at each step.

When a type has a path of identifying relationships emanating from it, references to instances of that type contain nested references, which in turn contain further nested references, and so on.
You might think of these as Russian-doll-structured references: each, except the innermost, contains another nested within it.


\begin{worktt}
The logic of identifying features observed in the previous subsection extends naturally when identifying relationships occur in sequence.
There we saw that a type $A$ identified through a relationship to $B$ produces a nested reference.
Now suppose $B$ itself is identified by a relationship to $C$, and $C$ to $D$, and so on.
The identifying relationships thus form a path, with each step repeating the pattern observed earlier: a reference contains a subordinate, nested reference, which itself contains another, and so forth.

When a type has such a path of identifying relationships emanating from it — that is, when the arrangement is linear and unbranched — references to instances of that type naturally contain multiple levels of nesting.
You can think of these as Russian-doll-structured references: each reference encloses another, except the innermost, which contains no further nested reference.
\end{worktt}

\subsubsection{Example --- Postal Addresses}

A classic and intuitively familiar example of this linear nesting is the postal address. 
When we see an address written on an envelope, we’re looking at a data-like representation of a nested reference.

In practice, postal addresses vary in format, but however represented, they are references with multiple levels of nesting.
For instance a reference to a particular house will usually have nested within it a reference to a street, usually within this there is a reference to a town or city and
as discussed this may contain a reference to a state or province.  
The multiple levels of nesting of references follows from the
the chaining of identifying relationships in an arrangement
of entity types and relationships like this one in which there are four levels of nesting:
\begin{equation*}
\input{\ImagesFolder/postalAddressISO20022.tex}
\end{equation*}
\mynote
What I say regarding nesting of references in spoken English also applies, though arguably with some exceptions, when references are communicated in data.
The following has been given as an example of a message structure for a postal address and is represented as XML
\begin{verbatim}
<PstlAdr>
  <StrtNm>South LaSalle Street</StrtNm>
  <BldgNb>120</BldgNb>
  <PstlCd>60690-0834</PstlCd>
  <TwnNm>Chicago</TwnNm>
  <CtrySubDvsn>IL</CtrySubDvsn>
  <Ctry>US</Ctry>
</PstlAdr>
\end{verbatim}

\subsubsection{Example --- Referencing Characters from Plays}
\label{exampleReferencingCharacters}
\mynote
 As a second example, consider the referencing of characters from  plays
 within the context of  the  dramatic arts
  as modelled earlier in figure \ref{dramaticArts1..diagram}.

FTo understand the phrasing of such references we need focus only on the details shown in this fragment \commentary{should I use a linear variant this diagram?}
\begin{equation*}
\input{\ImagesFolder/dramaticArtsCharacterFragment..diagram.tex}
\end{equation*}

\mynote
From inspecting the representation of the character type and in particular its identifying features  we see that:
\begin{itemize}
\item within the context of a specific play, 
\begin{equation} 
\label{playContextualisedCharacterReferencing}
\text{\parbox{9cm}{
a character may be referenced by their \uline{name}.}}
\end{equation}
Accordingly in the text of a play characters are referenced 
by name as for example in stage directions such as:  
\begin{equation*}
\text{\textit{Enter \rdash{Sebastian}.}}
\end{equation*}
\item within the context of a specific playwright (but with no particular play in mind), 
\begin{equation} 
\label{playwrightRelativeCharacterReferencing}
\text{\parbox{9cm}{
 a character from within a play 
may be referenced by their \uline{name} along with the \uline{title} of the play they are \uwave{in}.}}
\end{equation}
So in a discussion of our favourite Shakespearean characters  we might 
make reference to
\begin{equation*}
\text{\textit{\rdash{Sebastian} from \rdash{Twelfth Night}.}}
\end{equation*}
\item
without any context at all, 
\begin{equation} 
\label{absoluteCharacterReferencing}
\text{\parbox{9cm}{a character from within a play 
may be referenced by their \uline{name} along with the \uline{title} of the play they are \uwave{in} and the \uline{name} of the playwright it is \uwave{written by}.}}
\end{equation}
Thus, without context, three referentials are required for the referencing of a character
as  when I reference the following character:
 \begin{equation}
\label{TouchstoneReferenceFromAbsolute}
\text{\parbox{9cm}{\textit{\rdash{Touchstone} from \rdash{Shakespeare}'s \rdash{As You Like It}. }}}
\end{equation}
\end{itemize}
In this we see a reference to a playwright nested within a reference to a play nested within a reference to a character from a play.







\subsection{Arrangements with Branching Paths of Identifying Relationships}
If there is a branch in the arrangement of identifying relationships emanating from a type then references to entities at the branch point will contain multiple  references nested within them; 
the Russian-doll analogy breaks down but a nested boxes analogy holds up --- we can open a box and find multiple boxes nested inside it. 


\subsubsection{Example 4 --- Productions of Plays}

\label{exampleReferencingProductions}

For a second example we move on to another area within the overall model of figure \ref{dramaticArts1..diagram}. From the following detail 
\begin{equation*}
\input{\ImagesFolder/dramaticArtsProductionFragment..diagram.tex}
\end{equation*}
regarding the production entity type  we see that
\begin{itemize}
  \item
  without any context, 
  \begin{equation} 
\label{absoluteProductionReferencing}
\text{\parbox{9cm}{a production can be referenced by referencing the play it is a production \uwave{of} 
  and by giving the \underline{name} of the venue  the production is \uwave{at} along with the \underline{season} 
  over which it plays.}}
\end{equation}
\end{itemize}
We have already seen that to reference a play requires two referentials and so
we can count up the number of referentials required to reference a production
as one for the venue, two for the play and one for the season so four referentials in all. 

As an example consider the following prescription
  \begin{equation} 
\label{referenceToAsYouLikeItProduction}
\text{\parbox{9cm}{a production of \mbox{\rdash{Shakespeare}'s} \rdash{As You Like It}
 performed \mbox{\rdash{April – May 1975},} at \rdash{Oxford Playhouse}.}
 }\\
\end{equation}
As is to be expected in this description there are four referentials present.\footnote{
I found the literal description online as ``a production of the play As You Like It (by William Shakespeare), April – May 1975, at Oxford Playhouse''.  
} 

TouchstoneReferenceFromAbsolute
theRoleOfTouchstone
referenceToAsYouLikeItProduction

\subsection{Arrangements with Comparable Paths of Identifying Relationships}
When a type has multiple paths of identifying relationships emanating from it and when these paths intersect in the sense that there is a type in common between the paths (in addition to the
branching point) then in some cases the nested boxes analogy breaks down
because we are sometimes led to reference having nested references which overlap and are not totally independent. We give two examples one where the analogy holds up and one where it does not. The key characteristic is the presence of equivalent paths.
\commentary {Find  a home or use or rephrasing for the next para}
We need beware though because referencing doesn't always work out by simple aggregation. Because sometimes,
in the words of Shlaer and Lang, referentials collapse. \commentary{We are saying the same thing in two different ways which is confusing}
To see this we are going to move on to another area within our model and look at how dramatic roles are identified and referenced.

\begin{worktt}
Bring diagrams for the here talking showing comparable paths intersecting. 
Potentially show the paths and the possibly commuting squares.
\end{worktt}


 \subsubsection{Example 5 --- Dramatic Role from Figure \ref{dramaticArts1..diagram}}
\mynote
In the following detail
\begin{equation*}
\input{\ImagesFolder/dramaticArtsDramaticRoleFragment..diagram.tex}
\end{equation*}
taken from the model of the dramatic arts, as shown in figure \ref{dramaticArts1..diagram}, 
we see the type \textit{dramatic role} 
with  two identifying relationships emanating from it and having no identifying attributes;
this detail informs us that
\begin{equation}
\label{DramaticRoleReferencing}
\text{\parbox{9cm}{\textit{to reference a dramatic role it is necessary  
to reference both a character and  a production.}}}
\end{equation}

Now, as we have already discussed, \textit{character}s from plays need be referenced using three referentials
(section \ref{exampleReferencingCharacters})
and \textit{production}s need be referenced using four (section \ref{exampleReferencingProductions})
and so, from this, we can expect that, without context, a reference to
a dramatic role will require seven referentials
 --- three for the character and four for the production. 
So we will need seven, right?
 Well no, rather surprisingly, not so --- only five referentials are required. 
 What happened to the other two? Can you figure this out, can you answer the question?
In what follows, we will explore the answer from a number of points of view;
one of them is mathematical in nature --- this point of view may or may not suit you depending on your background.

First though, that only five referentials are needed can be seen from this reference to a dramatic role in which I have dash underlined the referentials:
\begin{equation}
\label{theRoleOfTouchstone}
\text{
\parbox{8.0cm}{the role of \rdash{Touchstone} in the production of \mbox{\rdash{Shakespeare}'s} \rdash{As You Like It} performed \mbox{\rdash{April – May 1975},} at \rdash{Oxford Playhouse}.
}
}
\end{equation}

To see why five only we have to spell out our declaration, (\ref{DramaticRoleReferencing}), in more detail
and make something clear that couldn't be inferred from the diagram alone,  namely that
\begin{equation}
\label{DramaticRoleReferencingRevised}
\text{\parbox{9cm}{to reference a dramatic role it is necessary 
to both reference a character \textbf{from a play} and to reference a production \textbf{of that same play}.}}
\end{equation}
In this restatement of (\ref{DramaticRoleReferencing}) as (\ref{DramaticRoleReferencingRevised}) we make clear that in a reference to a dramatic role, the referenced character and the referenced production will be in relationship with the very same play
and that, consequently,  in referencing a dramatic role, the referencing of the character and the referencing of
the production will not be independent in that
each of these two references --- that to a character and that to a production ---
must require a subordinate reference to the very same play;  
these two, required subordinate references collapse to a single reference(see figure \ref{theRoleOfTouchstoneAnalysed}) --- 
the subordinate reference to a play need not be duplicated. 
Finally, as we have seen, a reference to a play consist of two referentials;
by requiring this subordinate reference only once, we save two referentials, which explains why only five  are required, not seven.

If we were to violate prescription (\ref{DramaticRoleReferencingRevised})
 --- for instance, by claiming that in a given season an actor appeared in a production
of  Ibsen's \textit{A Doll's House} at the Royal Exchange, Manchester, playing the role of Touchstone from Shakespeare's \textit{As You like It} --- the result would not merely be incorrect but nonsensical. If a data structure allowed such prescriptions as this then it would be said that the defining structure was not in normal-form ---  which in this case at least is as an innocent-looking way for saying admits of pure nonsense.

Situations like this were noticed long ago by Shlaer and Lang, 
who coined the term ‘collapsed referentials’.\footnote{Note that we are talking about referentials 
which \textit{a priori} collapse,
rather than contingently as when we a particular marriage might be identified as being between parties \textbf{of the same parish}}. They were working with tabular structures, whereas here we are exploring the phenomenon through the lens of phrasal structure. We will be going into formal detail, but for now the concept gives a sense of why the counting of referentials isn’t always straightforward. Later we will return to this idea and also introduce the related notion of ‘absent referentials’.

\begin{erboxedFigure}{H}{theRoleOfTouchstoneAnalysed}
{
A reference to a dramatic role has two nested references within it. 
One to an entity of type character: 
\begin{equation*}
\text{
T. in  Shakespeare's As You Like It
}
\end{equation*}
and one to an entity of type production, namely that of:
\begin{equation*}
\text{
\parbox{9.0cm}{Shakespeare's As You Like It performed Spring '75 at the OP.}
}
\end{equation*}
 In this example the nested references overlap. The overlap is Shakespeare's As You Like It --- a reference to a play that is subordinate to both of the two nested references.
}
\newcommand{\dashRefOne}{2pt 2pt}
\newcommand{\dashRelationship}{1pt 0pt}
\newcommand{\dashRefTwo}{1pt 1pt}
\begin{tabular}{l}
the role of 
\Rnode{w1}{\rdash{T}} in 
\Rnode{w2}{\rdot{\rdash{Shakespeare}}}’s 
\Rnode{w3}{\rdot{\rdash{As You Like It}}} performed 
\Rnode{w4}{\rdot{Spring '75}}, at 
\Rnode{w5}{\rdot{OP}} \\[1.4cm]
\kern2cm\Rnode{ref1}{\parbox[t]{1.95cm}{\textit{reference to entity of type character}}}
\kern3.0cm\Rnode{ref2}{\parbox[t]{1.95cm}{\textit{reference to entity of type production}}} \\[0.5cm]
\syntag{\dashRefOne}{ref1}{0.9}{w1}{0}
\syntag{\dashRefOne}{ref1}{0.9}{w2}{-0.2}
\syntag{\dashRefOne}{ref1}{0.9}{w3}{-0.2}
\syntag{\dashRefTwo}{ref2}{0.4}{w2}{0.2}
\syntag{\dashRefTwo}{ref2}{0.4}{w3}{0.3}
\syntag{\dashRefTwo}{ref2}{0.4}{w4}{0.3}
\syntag{\dashRefTwo}{ref2}{0.4}{w5}{0}
\end{tabular}
\end{erboxedFigure}


\mynote
\begin{worktt}
Now a crucial observation,\commentary{This might move in situ after the observation if we have the square upfront (see apricot)} 
We can consider that a character and a production can include reference to ``the same play'' injunction  just because in this diagram 
there are two comparable paths from the bottom right to the top left, from entity type dramatic role to entity type play, 
\end{worktt}

\begin{equation}
\label{dramaticArtsPortrayalScopeFragment..diagram}
\input{\ImagesFolder/dramaticArtsPortrayalScopeFragment..diagram.tex}
\end{equation}
of taken from figure \ref{dramaticArts1..diagram}.

The ``in the same play'' injunction is necessary 
and appropriate just because 
the two comparable paths f are equivalent.


\begin{reinstatett}
\mynote
However we look at it, if xxxx then The conclusion is that an entity model is more than is shown in the diagram of relationships. It needs include additional information... such as, in the declaration above,
 is captured by qualifying as ``in the same play''. Lets come back to this in a moment. First a contrasting example.
 \end{reinstatett} 

\subsubsection {Example 6 --- Route City State}

\mynote 
Some comparable paths are not equivalent and when they are not equivalent then subordinate references do not as a matter of course collapse. For example consider the following reference
 \begin{equation*}
 \mbox{the route from Hot Springs, Arkansas to Jacksonville, Alabama.}
\end{equation*}

The types, relationships and identifying features that are instantiated here
I would sketch out as follows

\iffalse
\begin{equation*}
\input{\ImagesFolder/routeCityState..topdown..diagram.tex}
\end{equation*}
\fi
\begin{equation*}
\input{\ImagesFolder/routeCityState..leftright..diagram.tex}
\end{equation*}


\mynote 
As before in example () the reference () has two nested references and these themselves have a common nested reference namely
\begin{equation*}
\mbox{the state Arkansas}
\end{equation*}
The difference between this example and the previous one is that the commonality of the secondary nested reference is not  \textit{a priori}
 common to the two primaries --- in this example

\mynote
WE noted earlier that commonality of the secondary nested references was guaranteed in the earlier example because of the equivalence of two paths or, in other words the commutivity of a certain diagram (diagram ()).
In this second example commonality is not guaranteed. Equally we can say that the following two comparable paths are not equivalent:

Another ways of saying this is by saying that the following diagram does not commute:
\iffalse
\begin{equation*}
\input{\ImagesFolder/routeCityCityState..topdown..diagram.tex}
\end{equation*}
\fi

\begin{equation*}
\input{\ImagesFolder/routeCityCityState..leftright..diagram.tex}
\end{equation*}

\textbf{Contingency versus \textit{a priori}}

Though in this model there are routes between cities in different states in some cases cities may well be in the same state nonetheless the reference to the route may well collapse the shared referential.
\begin{equation}
\mbox{the route from Hot Springs, Arkansas to Jacksonville, Arkansas}
\end{equation}
may be rephrased with collapsed referentials for the state such as by saying
\begin{equation}
\mbox{the route from Hot Springs, Arkansas to Jacksonville in the same state.}
\end{equation}
or even 
\begin{equation}
\mbox{the route in Arkansas from Hot Springs to Jacksonville.}
\end{equation} 

Since the collapsing only is possible in some cases we might say that it is \textit{contingent} rather than \textit{a priori}. The latter come about because of equivalent paths, the former are accidental, so to speak.


\subsection{The Methodological Derivation Of Referentials}

Here we to look again at the dramatic arts example --- specifically at how the model of entity types and relationships
along with the knowledge of this path equivalence:
\begin{equation}
\label{playedBy.Scope.asEquivalence}
r4 \comp d1 \;\equiv\; d2 \comp r2
\end{equation}
determines how how entities
of the various types are to be referenced or represented in data. We revisit the examples (\ref{TouchstoneReferenceFromAbsolute}), (\ref{theRoleOfTouchstone}) and (\ref{referenceToAsYouLikeItProduction}).

Laying out the identifying features as we do in figure \ref{dramaticArtsRole..identificationScheme..diagramAgain} is the easiest way to quickly see why referentials as they are.

\begin{erboxedFigure}{H}{dramaticArtsRole..identificationScheme..diagramAgain}
{Identification Scheme diagram for the dramatic role type
from the model of the dramatics arts (figure \ref{dramaticArts1..diagram}). This diagram doesn't add to the information
contained in that model, it simply represents the information regarding idenitfying features in a  different
 and for our purposes here, more convenient way. \textit{This diagram was shown earlier
in figure \ref{dramaticArtsRole..identificationScheme..diagram} and is reproduced here for ease of reference.}
} %end of caption
\begin{equation*}
\input{\ImagesFolder/dramaticArtsRole..identificationScheme..diagram.tex}
\end{equation*}
\end{erboxedFigure}

This identification-scheme diagram along with the path equivalence (\ref{playedBy.Scope.asEquivalence})
 \textit{fully} explains how entities are to be referenced — both in natural phrasing and in data representation.

\subsubsection{Referencing Characters from Plays}

From the diagram in figure \ref{dramaticArtsRole..identificationScheme..diagramAgain} 
we can quickly see that there are 3 paths from the type character on the diagram
 
It isn't germane to what I am doing here but if we want to we I can put english descriptions to these paths:
\begin{center}
\begin{tabular}{c p{8cm}}
$a1$ & the name of the character \\
$d1 \comp a2$ & the title of the play the character is in \\
$d1 \comp r1 \comp a3$ & the playwright that the play the character is in is written by 
\end{tabular}
\end{center} 

In a reference to an entity of type character each of these paths must be filled by a referential, 
we can think of the three paths as determining slots that need to be filled  in the phrasing of a reference. 
In example (\ref{TouchstoneReferenceFromAbsolute}) these slots are filled as follows:

\begin{tabular}{l l}
\textbf{Path}          & \textbf{Referential} \\
$d1 \comp r1 \comp a3$ & Shakespeare          \\
$d1 \comp a2$          & As You Like It       \\
$a3         $          & Touchstone
\end{tabular}

\subsubsection{Referencing Productions of Plays}

From the diagram in figure \ref{dramaticArtsRole..identificationScheme..diagramAgain} 
we can also see that there are 4 paths from the type production on the diagram
across to the rhs of the diagram. 
These correspond to the four referentials included in phrasal references or data references to entities of 
type production.
\begin{center}
\begin{tabular}{p{3cm}}
$r2 \comp r1 \comp a3$ \\
$r2 \comp a2$ \\
$a4$          \\
$r3 \comp a5$ \\
\end{tabular}
\end{center}

Exercise for the reader: Give English descriptions for each of these four slots. 

The referentials that instantiate these paths in 
the reference to a production of 
\textit{As You Like It} mentioned earlier in (\ref{referenceToAsYouLikeItProduction}) 
are\\
\newline
\begin{center}
\begin{tabular}{l l}
\textbf{Path}          & \textbf{Referential} \\
$r2 \comp r1 \comp a3$ & ``Shakespeare''       \\
$r2\comp a2$           & ``As You Like It''   \\
$a4$                   & ``April-May 1975''   \\
$r3 \comp a5$          & ``Oxford Playhouse''
\end{tabular}
\end{center}

This could be getting boring and repetitive but the next case, that of referencing dramatic roles, breaks the pattern as  we have already already seen.

\subsubsection{Referencing Dramatic Roles}

There are seven ways of getting from the representation of type dramatic role at the left hand side of the diagram in figure \ref{dramaticArtsRole..identificationScheme..diagramAgain} to the right hand side. Naively, this implies seven referentials are required to reference a dramatic role, these corresponding to the following paths from left to right across the diagram:
\begin{displaymath}
\begin{array}{l c l}
\text{path 1:} &  & r4 \comp a1 \\
\text{path 2:} & & r4 \comp d1 \comp a2 \\
\text{path 3:} & & r4 \comp d1 \comp r1 \comp a3 \\
\text{path 4:} &  & d2 \comp d1 \comp a2 \\
\text{path 5:} &  & d2 \comp d1 \comp r1 \comp a3 \\
\text{path 6:} &  & d2 \comp a4 \\
\text{path 7:} &  & d2 \comp r3 \comp a5
\end{array}
\end{displaymath}

Now we an see the effect of the path equivalence.

Because 
\begin{equation}
r4 \comp d1 \;\equiv\; d2 \comp r2
\end{equation}

then paths 1 and 3 do not determine distinct referentials but a single referential because
\begin{equation}
r4 \comp d1 \comp a2 \;\equiv\; d2 \comp r2 \comp a2
\end{equation}
and likewise neither do paths 1 and 2 determine a single referential but a single one because
\begin{equation}
r4 \comp d1 \comp r1 \comp a3 \;\equiv\; d2 \comp r2 \comp r1 \comp a3
\end{equation}.

The slots required in and phrasal or data representation of a reference to a dramatic role are thus
\begin{displaymath}
\begin{array}{l c l}
\text{slot 1:} &  & r4 \comp a1 \\
\text{slot 2:} &  & r4 \comp d1 \comp a2 = d2 \comp d1 \comp a2 \\
\text{slot 3:} &  & r4 \comp d1 \comp r1 \comp a3 = d2 \comp d1 \comp r1 \comp a3 \\
\text{slot 4:} &  & d2 \comp a4 \\
\text{slot 5:} &  & d2 \comp r3 \comp a5
\end{array}
\end{displaymath}

Slots 2 and  3 are collapsed referentials in the Shlaer-Lang terminology.

\textbf{Mathematically}
The slots are equivalence classes of paths, not paths, and equivalence classes of paths form a category.
The set of slots in the category of paths is jointly monomorphic.

\subsection{Entity Models and Equivalent Paths}
\begin{worktt}
Path equivalences are essential if an entity model is to fully explain the structures it represents. 
This raises the methodological question: how should such equivalences be expressed within an entity model? 
Well we are not being prescriptive here about the precise way diagrams and accompanying information should be represented. Here are some thoughts though and they reflect the software tools that the author has used in the past.
\end{worktt} 
\mynote \commentary{Somewhere happen}
The recognition and explicit statement of such path equivalences are essential steps in closing the gap between modelling and data definition. They enable the model to serve not merely as a structural schema but as a full explanation of how references are to be phrased and how facts are to be expressed.
\mynote
In these examples we have shown that, however expressed,  the specifications of equivalent paths are
an important supplement to entity relationship diagrams. 
An entity model in the main part consists of at least an entity relationship diagram  
plus a statement of path equivalences.


As we have seen two subordinate references to a play are shared in all proper references to dramatic roles 
and this is because of
the equivalence of two particular paths of identifying relationships. 
Note that the simple existence of these comparable paths in the diagram of figure \ref{dramaticArts1..diagram}
does not imply their equivalence.

\commentary{fully understand this is one part of closing the gap that we spoke about in the introduction}
\commentary{To fully understand how references to dramatic roles are phrased we need to understand the equivalence of these two paths. If we don't fully understand then the entity model cannot guide us fully in the phrasing of facts 
regarding dramatic role should be represented in data. }
To understand the referencing of roles we need understand the equivalence of these two paths. 
So significant is this that the equivalence ought to be specified in the entity model in some way.
For now we can imagine annotating the diagram in some way to indicate that these two paths are equivalent 
or else specifying in a separate document or in a separate diagram. 
One way of specifying is by writing the equation
\begin{equation}
\label{dramaticArtsDramaticRolePathEquivalence}
r4 \comp d1 = d2 \comp r2
\end{equation}

Another way is to take diagram ((\ref{dramaticArtsPortrayalScopeFragment..diagram})), 
to flip it  around, and to draw  in this reduced form like this
\begin{equation}
\label{dramaticArtsPortrayalScopeAppearance1}
\input{\ImagesFolder/dramaticArtsPortrayalScope..diagram.tex}
\end{equation}
and to assert that this diagram commutes.

This is our preferred diagrammatic way of presenting equivalent paths in this book and we return to this subject in a later section where we refer to such a diagram as this as a scope diagram. 
We also in the habit of writing equations such as (\ref{dramaticArtsDramaticRolePathEquivalence}) on the entity relationships diagram itself.
We can think of dramatic roles coming into being when productions of plays are being cast. What the commutivity of this diagram expresses is when a production of a play is being cast then it is all characters from the play that are being cast not characters from plays in general. 
The relationship ``the portray of'', we say, is restricted in scope.



\subsection{Mathematically}
\mynote
I don't expect the reader to be a mathematician but, for those readers that are, 
an entity model in the main part is a presentation 
(or, equivalently, a sketch) of a category of some kind for the entity model diagram is a directed graph, 
the path equivalences are commuting diagrams. 
In this category, the identifying features are jointly monomorphic families of morphisms.
What we have seen in this section is that categorical structure lies behind what might seem like linguistic or representational questions.

