\newcommand{\ncarrNEGZZ}[3][0]{\ncarc[arcangle=#1,nodesepA=2pt,nodesepB=2pt,offsetA=-2pt,offsetB=-2pt,arrowsize=5pt,arrowinset=0.7]{->}{#2}{#3}}
\newcommand{\ncarrZ}[3][0]{\ncarc[arcangle=#1,nodesepA=2pt,nodesepB=2pt,offsetA=0pt,offsetB=0pt,arrowsize=5pt,arrowinset=0.7]{->}{#2}{#3}}
\newcommand{\ncarrZZ}[3][0]{\ncarc[arcangle=#1,nodesepA=2pt,nodesepB=2pt,offsetA=2pt,offsetB=2pt,arrowsize=5pt,arrowinset=0.7]{->}{#2}{#3}}
\newcommand{\ncarrZZZ}[3][0]{\ncarc[arcangle=#1,nodesepA=2pt,nodesepB=2pt,offsetA=4pt,offsetB=4pt,arrowsize=5pt,arrowinset=0.7]{->}{#2}{#3}}
\newcommand{\ncarrZZZZ}[3][0]{\ncarc[arcangle=#1,nodesepA=2pt,nodesepB=2pt,offsetA=6pt,offsetB=6pt,arrowsize=5pt,arrowinset=0.7]{->}{#2}{#3}}


\newcommand{\ccsquareoutline}[6]
{\begin{array}{c p{#1} c}
\Rnode{TL}{#3}  &\ &  \Rnode{TR}{#4}\\[#2]
\Rnode{BL}{#5}  &\ &  \Rnode{BR}{#6}
\end{array}
}
\newcommand{\ccsquareacross}[2]
{\mbox{\ncarr{TL}{TR}
\alabel{#1}
\ncarr{BL}{BR}
\blabel{#2}}
}
\newcommand{\ccsquaredown}[2]
{\mbox{\ncsar{TL}{BL}
\blabel{#1}
\ncsar{TR}{BR}
\alabel{#2}}
}

\newcommand{\ccsquareup}[2]
{\mbox{\ncsar{BL}{TL}
\blabel{#1}
\ncsar{BR}{TR}
\alabel{#2}}
}

\newcommand{\ccsquareanddroppers}[6]
{\ccsquareoutline{#1}{#2}{#3}{#4}{#5}{#6}
\ccsquaredown{p_{#3}}{p_{#4}}
}
\newcommand{\ccsquareprimitivedroppers}
{
\begin{arrows}
\ncsar{TL}{BL}
\ncsar{TR}{BR}
\end{arrows}
}

% ccprimitivepullbacksquare{width}{height}{TR}{BL}{BR}{f}
\newcommand{\ccprimitivepullbacksquare}[6]
{\ccsquareoutline{#1}{#2}{#6^*#3}{#3}{#4}{#5}
\ccsquareprimitivedroppers
\ccsquareacross{q(#6,#3)}{#6}
}

 
\NewEnviron{coneoutline}[3]{% width depth source
\begin{array} {c p{#1} c}
                      \\[0.5cm]
\Rnode{OTL}{#3} &\ &  \\[#2]
&&
\BODY
\end{array}
}

\newcommand{\conearrows}[3]
{\begin{arrows}
\ncarr[-15]{OTL}{BL}
\blabel{#1}
\ncarr[20]{OTL}{TR}
\alabel{#2}
\ncline{OTL}{TL}  % want \ncdarr for dashed I think
\trput[tpos=0.2,labelsep=6pt]{\footnotesize{$#3$}}
%\salabel{sa label #3}[0.5]
\end{arrows}
}

\newcommand{\conearrowsdefiningtuple}[2]
{\conearrows{#1}{#2}{\tuple{#1,#2}}
}

%\scopeTriangle{subject}{domain}{codomain}{apex}{diagonal}{riser}
\newcommand{\scopeTriangle}[6]
{
 \begin{array}{c  c  c}
                & \Rnode{apex}{#4} &                \\[1cm]
\Rnode{dom}{#2} &                  & \Rnode{cod}{#3} 
\end{array}
\begin{arrows}
\ncarr{dom}{cod}
\blabel{#1}
\ncsar{dom}{apex}
\alabel{#5}[0.2]
\ncsar{cod}{apex}
\blabel{#6}[0.2]
\end{arrows} 
}
