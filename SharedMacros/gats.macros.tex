%gats.macros.tex

\usepackage{environ}    % also used in ermacros % here used for \NewEnvrion

\newcommand{\gat}[1][U]{
\ensuremath{\mathcal{#1}}}  % used to hav a space in here
\newcommand{\gatw}[1][U]{\gat[#1]\ }  % use this if need trailing space
\newcommand{\ingat}[1][U]{in \gat[#1]}
\newcommand{\isagat}[1][U]{\gat[#1] is a g.a.t.}
\newcommand{\inagat}{in a g.a.t. }

% macro for a generic theory
%\newcommand{\theory}
%{\textit{U}}

\newcommand{\intheory}
{is a derived rule of \gat[U]}

% Macros for GAT rules

\newcommand{\isT}[1]
{#1\mbox{ is a type}}

\newcommand{\ofT}[2]
{#1 \in #2
}

% Macros for GAT rules   <!-- new old -->
\newcommand{\istype}[1]
{#1\mbox{ is a type}}

\newcommand{\oftype}[2]
{#1 \in #2
}

%\context{x}{\Delta}{n}
\newcommand{\context}[3]
{\ofT{#1_1}{#2_1},... \ofT{#1_{#3}}{#2_{#3}(#1_1,...#1_{#3-1})}
}

%\subcontext{x}{\Delta}{i}{k}
\newcommand{\subcontext}[4]
{\ofT{#1_{#3_1}}{#2_{#3_1}},... \ofT{#1_{#3_#4}}{#2_{#3_#4}(#1_1,...#1_{#3_#4-1})}
}

% #schematic context
\newcommand{\schmcon}[3]
{\ofT{#1_1}{#2_1},... \ofT{#1_{#3}}{#2_{#3}}
}
% abbreviated to
\newcommand{\con}[3]
{\schmcon{#1}{#2}{#3}}

% schematic subcontext
%\subcon{x}{\Delta}{i}{k}
\newcommand{\subcon}[4]
{\ofT{#1_{#3_1}}{#2_{#3_1}},... \ofT{#1_{#3_#4}}{#2_{#3_#4}}
}

% permuted context
%\permcon{x}{\Delta}{n}{\sigma}
\newcommand{\permcon}[4]
{\ofT{#1_{#4(1)}}{#2_{#4(1)}},... \ofT{#1_{#4(#3)}}{#2_{#4(#3)}}
}
% permuted term
%\permterm{t}{n}{\sigma}
\newcommand{\permterm}[3]
{
#1_{#3(1)},...#1_{#3(#2)}
}


% Idioms
\newcommand{\xDelta}[1]{\con{x}{\Delta}{#1}}
\newcommand{\xDeltap}[1]{\con{x}{\Delta'}{#1}}
\newcommand{\xOmega}[1]{\con{x}{\Omega}{#1}}
\newcommand{\xOmegap}[1]{\con{x}{\Omega'}{#1}}
\newcommand{\yOmega}[1]{\con{y}{\Omega}{#1}}
\newcommand{\yOmegap}[1]{\con{y}{\Omega'}{#1}}

\newcommand{\xDeltasigma}[1]{\permcon{x}{\Delta}{#1}{\sigma}}
\newcommand{\xDeltapsigma}[1]{\permcon{x}{\Delta'}{#1}{\sigma}}
\newcommand{\xOmegasigma}[1]{\permcon{x}{\Omega}{#1}{\sigma}}
\newcommand{\xOmegapsigma}[1]{\permcon{x}{\Omega'}{#1}{\sigma}}
\newcommand{\yOmegasigma}[1]{\permcon{y}{\Omega}{#1}{\sigma}}
\newcommand{\yOmegapsigma}[1]{\permcon{y}{\Omega'}{#1}{\sigma}}

\newcommand{\xDeltainvsigma}[1]{\permcon{x}{\Delta}{#1}{\sigma^{-1}}}
\newcommand{\xDeltapinvsigma}[1]{\permcon{x}{\Delta'}{#1}{\sigma^{-1}}}
\newcommand{\xOmegainvsigma}[1]{\permcon{x}{\Omega}{#1}{\sigma^{-1}}}
\newcommand{\xOmegapinvsigma}[1]{\permcon{x}{\Omega'}{#1}{\sigma^{-1}}}
\newcommand{\yOmegainvsigma}[1]{\permcon{y}{\Omega}{#1}{\sigma^{-1}}}
\newcommand{\yOmegapinvsigma}[1]{\permcon{y}{\Omega'}{#1}{\sigma^{-1}}}

%Idioms enclosed as tuples
\newcommand{\encxDelta}[1]{\tuple{\con{x}{\Delta}{#1}}}
\newcommand{\encxDeltap}[1]{\tuple{\con{x}{\Delta'}{#1}}}
\newcommand{\encxOmega}[1]{\tuple{\con{x}{\Omega}{#1}}}
\newcommand{\encxOmegap}[1]{\tuple{\con{x}{\Omega'}{#1}}}
\newcommand{\encyOmega}[1]{\tuple{\con{y}{\Omega}{#1}}}
\newcommand{\encyOmegap}[1]{\tuple{\con{y}{\Omega'}{#1}}}

\newcommand{\encxDeltasigma}[1]{\tuple{\permcon{x}{\Delta}{#1}{\sigma}}}
\newcommand{\encxDeltapsigma}[1]{\tuple{\permcon{x}{\Delta'}{#1}{\sigma}}}
\newcommand{\encxOmegasigma}[1]{\tuple{\permcon{x}{\Omega}{#1}{\sigma}}}
\newcommand{\encxOmegapsigma}[1]{\tuple{\permcon{x}{\Omega'}{#1}{\sigma}}}
\newcommand{\encyOmegasigma}[1]{\tuple{\permcon{y}{\Omega}{#1}{\sigma}}}
\newcommand{\encyOmegapsigma}[1]{\tuple{\permcon{y}{\Omega'}{#1}{\sigma}}}

\newcommand{\encxDeltainvsigma}[1]{\tuple{\permcon{x}{\Delta}{#1}{\sigma^{-1}}}}
\newcommand{\encxDeltapinvsigma}[1]{\tuple{\permcon{x}{\Delta'}{#1}{\sigma^{-1}}}}
\newcommand{\encxOmegainvsigma}[1]{\tuple{\permcon{x}{\Omega}{#1}{\sigma^{-1}}}}
\newcommand{\encxOmegapinvsigma}[1]{\tuple{\permcon{x}{\Omega'}{#1}{\sigma^{-1}}}}
\newcommand{\encyOmegainvsigma}[1]{\tuple{\permcon{y}{\Omega}{#1}{\sigma^{-1}}}}
\newcommand{\encyOmegapinvsigma}[1]{\tuple{\permcon{y}{\Omega'}{#1}{\sigma^{-1}}}}


% Idiomatic Substitutions
\newcommand{\SUBtFORx}[1]{t_1|x_1,...t_{#1}|x_{#1}}
\newcommand{\SUBtpFORx}[1]{t'_1|x_1,...t'_{#1}|x_{#1}}
\newcommand{\tDelta}[1]{\ofT{t_{#1}}{\Delta_{#1}[\SUBtFORx{i-1}]}}
\newcommand{\tpDeltap}[1]{\ofT{t'_{#1}}{\Delta'_{#1}[\SUBtpFORx{i-1}]}}

\newcommand{\SUBsFORy}[1]{s_1|y_1,...s_{#1}|y_{#1}}
\newcommand{\SUBspFORy}[1]{s'_1|y_1,...s'_{#1}|y_{#1}}
\newcommand{\sOmega}[1]{\ofT{s_{#1}}{\Omega_{#1}[\SUBsFORy{j-1}]}}
\newcommand{\spOmega}[1]{\ofT{s'_{#1}}{\Omega_{#1}[\SUBsFORy{j-1}]}}
\newcommand{\spOmegap}[1]{\ofT{s'_{#1}}{\Omega'_{#1}[\SUBspFORy{j-1}]}}

% Representation of Rules - Formal and Informal styles

\newcommand{\tstyle}{\vdash}
\newcommand{\gatdisplayrule}[3][]
{\setlength{\fboxsep}{1pt}\setlength{\fboxrule}{0pt}\fbox{$\displaystyle \frac{#2}{#3\rule[-0.3cm]{0cm}{0cm}}$#1}%added vertival space using \rule
}

\newcommand{\gatrawdisplayrule}[2]
{
\frac{#1}{#2} 
}

% Schematic Rules
% Z(ero) having no mandatory arguments
\newcommand{\ZDelta}[1][]{\gatdisplayrule[#1]{\xDelta{n}}{\isT{\Delta}}}
\newcommand{\ZDeltap}[1][]{\gatdisplayrule[#1]{\xDelta{n}}{\isT{\Delta'}}}
\newcommand{\ZtDelta}[1][]    {\gatdisplayrule[#1]{\xDelta{n}}{\ofT{t}{\Delta}}}
\newcommand{\ZtpDelta}[1][]    {\gatdisplayrule[#1]{\xDelta{n}}{\ofT{t'}{\Delta}}}
\newcommand{\ZDeltaSUBtnFORxn}[1][]{\gatdisplayrule[#1]{Q}{\isT{\Delta[\SUBtFORx{n}]}} }
\newcommand{\ZtDeltaSUBtnFORxn}[1][]{\gatdisplayrule[#1]{Q}{\ofT{t[\SUBtFORx{n}]}{\Delta[\SUBtFORx{n}]}} }
\newcommand{\ZOmega}[1][]{\gatdisplayrule[#1]{\yOmega{m}}{\isT{\Omega}}}
\newcommand{\ZsOmega}[1][]    {\gatdisplayrule[#1]{\yOmega{m}}{\ofT{s}{\Omega}}}
\newcommand{\ZOmegaSUBsmFORym}[1][]{\gatdisplayrule[#1]{Q}{\isT{\Omega[\SUBsFORy{m}]}} }
\newcommand{\ZOmegapSUBsmFORym}[1][]{\gatdisplayrule[#1]{Q}{\isT{\Omega'[\SUBsFORy{m}]}} }
\newcommand{\ZsOmegaSUBsmFORym}[1][]{\gatdisplayrule[#1]{Q}{\ofT{s[\SUBsFORy{m}]}{\Omega[\SUBsFORy{m}]}} }
\newcommand{\ZspOmegapSUBsmFORym}[1][]{\gatdisplayrule[#1]{Q}{\ofT{s'[\SUBsFORy{m}]}{\Omega'[\SUBsFORy{m}]}} }
% I(ndexed} and requiring an index as an argument
\newcommand{\IDelta}[1]  {\gatdisplayrule{\xDelta{#1-1}}{\isT{\Delta_{#1}}}}
% \ItDelta[premise][puntuation]{i}
\newcommandtwoopt{\ItDelta}[3][P][] {\gatdisplayrule[#2]{#1}{\tDelta{#3}}}
\newcommand{\IOmega}[1]  {\gatdisplayrule{\yOmega{#1-1}}{\isT{\Omega_{#1}}}}
\newcommand{\IsOmega}[2] [Q]  {\gatdisplayrule{#1}{\sOmega{#2}}}
\newcommand{\IspOmega}[2] [Q]  {\gatdisplayrule{#1}{\spOmega{#2}}}
% D(ouble Indexed) requiring two indices as arguments
\newcommand{\DDelta}[2]  {\gatdisplayrule{\xDelta{#1}}{\isT{\Delta_{#2}}}}
\newcommand{\DOmega}[2]  {\gatdisplayrule{\yOmega{#1}}{\isT{\Omega_{#2}}}}

% Introductory Rules
\newcommand{\genericAintroductoryrule} {\gatdisplayrule{\xDelta{n}}{\isT{A(\xn)}}}
\newcommand{\genericfintroductoryrule}  {\gatdisplayrule{\xDelta{n}}{\ofT{f(\xn)}{\Delta}}}







% Expressing gats
\newenvironment{gatrules}
{
$$
\begin{array}{l l}
}
{
\end{array}
$$
}
\newcommand{\gatintros}
{
\textbf{Symbol} & \textbf{Introductory\ Rule}                      \\}

\newcommand{\gataxioms}
{\textbf{Axioms}\\}
\newcommand{\gatintro}[3]{\ #1 & #2 \tstyle #3 \\}
\newcommand{\gatlocalintro}[3]{\ #1 & #2 \dashv }
\newcommand{\gataxiom}[2]{\multicolumn{2}{l}{\ \ #1\mbox{,  whenever\ } #2} \\}
\newcommand{\noleft}{\left.\kern-\nulldelimiterspace} % so that no space taken by absent left brace


\newcommand{\gatmultiaxiom}[2]
{\multicolumn{2}{l}{
  \noleft
    \begin{array}{l}
		#1
    \end{array} 
  \right\} \mbox{whenever\ } 	#2 
	}\\}
	
	\newcommand{\axid}[1]{\text{#1}.\ }	

%New context sharing macros
\newcommand{\gatintroducing}[1]{
{\arraycolsep=0pt
  \begin{array}{l}
          #1
  \end{array}} &
}

%*********************************
% \begin{\gatgroup}{context}
%    rules
%  \end{\gatgroup}
%*********************************
\NewEnviron{gatgroup}[1]{%
  \noleft
  {\arraycolsep=0pt
   \begin{array}{l}
\BODY
    \end{array} 
   }
   \ \right\} 
	%\mbox{\ whenever\ } 
	#1
	%\vspace{0.1cm} 
}
%*********************************

%*********************************
% \begin{\gatgroupnoshared}
%    rule
%  \end{\gatgroupnoshared}
%*********************************
\NewEnviron{gatgroupnoshared}{%
  {\arraycolsep=0pt
   \begin{array}{l}
\BODY
    \end{array} 
   }
   \ 
	\vspace{0.1cm} 
}
%*********************************

% \gatsingular[width]{context}{conclusion}
\newcommand{\gatsingular}[3][4cm]{
\begin{gatgroupnoshared}
\gatleaf[#1]{#2}{#3} 
\end{gatgroupnoshared}
}

%*********************************
% \gatleaf}[width]{context}{assertion}
%*********************************
\newcommand{\gatleaf}[3][4cm]{%
\makebox[#1]{$#3$ \dotfill} \dotfill \  #2
}
%*********************************
%*********************************
% \gatstandalonesingle}{context}{assertion}
%*********************************
\newcommand{\gatstandalonesingle}[2]{%
#2 \makebox[2.5cm]{\dotfill} \  #1
}
%*********************************

% \gataxiomno{axiomno}
\newcommand{\gataxiomno}[1]{\makebox[0.5cm]{} \axid{#1}}

