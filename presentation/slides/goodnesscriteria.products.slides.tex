
\begin{frame}{Definitions} 
In a category \catc, a  \term{source} is a family of morphisms with common domain: \\
\scalebox{0.65}{
\multisourcediagram{n}{a}{b}{f}
} 
\medskip
Such a source is said to be a \term{mono source}  iff for all $g,h:x \morph a$ in \catcw 
so that \scalebox{0.65}{
\monosourcedefinitiondiagram{x}{g}{h}{n}{a}{b}{f}
} 
in \catcw then if $g \circ f_i = h \circ f_i$, for each $i$,  then $g=h$.
\end{frame}

\begin{frame}{Mono Source Limit Cone}  %copied from sketchmonics.tex
Lemma: In a category \cat{C}
\scalebox{0.65}{
\input{../content/monoSource}
} is a mono source iff \\
\begin{center}
\scalebox{0.65}{
\input{../content/monoSourceLimitCone}
} 
is a limit cone.
\end{center}
\end{frame}

\begin{frame}{Composition of mono sources}
If $i$ and $j$ are mono sources and $f \in i$ so that
\begin{center}
\scalebox{0.65}{
\input{../content/monosourcecomposition}
}
\end{center}
then $(i \backslash \set{f}) \cup \setsuchthat{f \circ g}{g \in j}$ is a mono source.
\end{frame}

\begin{frame}{Sketches for categories}{with \thirdstructure }
By a sketch for a category with \thirdstructure I shall mean a quintuple
$\tuple{G,PE,M,P,E}$
\begin{itemize}
\item  where $G$ is a directed graph, 
\item  $PE$ is a set of path equivalences, 
\item  $M$ is a set of $G$-sources deemed to be mono-sources,
\item  $P$ is a set of $G$-sources deemed to be product diagrams, 
\item  and $E$ is a set of $G$-paths deemed to be epimorphisms.
\end{itemize}
\medskip
From such a sketch we can generate a category with \thirdstructure.  
\end{frame}

\begin{frame}{Goodness Criteria 1XXX - Fagin's 4NF}
\IfSforproductepimonoCwithRCwords

\goodnesscriteria{1C} If $P$ contains the source \scalebox{0.65}{\multisourcediagram{n}{x}{y}{p}} 
then there ought to exist a node $z$ and an edge $f: x \morph z$ in $G$ such that morphism $f$ does not factor through any of the $p_i$ morphisms 
i.e. such that there exist $g: y_i \morph z$ in \catcw, for some $i$, such that $p_i\circ g = f$ in \catc. 
\end{frame}

\begin{frame}{Goodness Criteria 2B Revisited}
Restate how functional dependencies and their representations are defined in terms of \highlight{sketches} of categories with \thirdstructure.
\end{frame}

\begin{frame}{Functional Dependency Restated}
\IfSforproductepimonoCwithRCwords, 
if \scalebox{0.65}{\multisourcepathdiagram{n}{a}{b}{x}} is a path source in $S$ and if
$y: a \morph c$ is a path in $S$
then path $y$ is said to be \term{functionally dependent} on the set of paths $\set{x_1,...x_n}$ with respect to the requirement $\reqtc$
iff the function $D(y)$ factors through $D(\tuple{x_1,... x_n })$

i.e. iff in each $D \in \reqtc$ there exists a  (unique)
function $H_D: img(D(\tuple{x_1,... x_n })) \morph D(c)$ 
such that 
\scalebox{0.65}{\commutativetrianglediagrammutant{D(a)}{img(D(\tuple{x_1,... x_n }))}{D(c)}{D(\xntuple)}{f_D}{D(y)}} commutes.
\end{frame}
\begin{frame} 
CORRECT THIS DIAGRAM
\scalebox{0.9}{ 
$
\begin{array}{cp{2cm}ccp{0.5cm}cc}
                & &         & \Rnode{Eb1}{D(b_1)}& &                            &        \\[0.6cm]
                & &         & \Rnode{Eb2}{D(b_2)}& &                            &        \\[0.6cm]
                & &\vdots   &                     & &                            &        \\[0.2cm]                                              
\Rnode{Ea}{D(a)} & &         & \Rnode{Ebn}{D(b_n)}& & \Rnode{Jnctn}{}            &        \\[1.0cm]
                & &         & \Rnode{Ec}{D(c)}   & &                            &  
\end{array}
\begin{arrows}
\simplepath{Ea}{Eb1}
\alabel{D(x_1)}
\simplepath{Ea}{Eb2}
\alabel{D(x_2)}
\simplepath{Ea}{Ebn}
\alabel{D(x_n)}
\simplepath{Ea}{Ec}
\blabel{D(y)}
\nchpmarr[15][45]{Eb1}{Ebn}{Jnctn}{Ec}
\naput[npos=-0.1]{$h_D$}
\ncarc[arcangle=15]{Eb2}{Jnctn}
%\ncline{h-}{Eb1}{Ebn}
\end{arrows}
$
}
\end{frame}

\begin{frame}{Notation}
That a path  $y$ is functionally dependent on the set of paths $\set{x_1,...x_n}$ 
is written  \msfd{x_1,...x_n}{y}.
\end{frame}

\begin{frame}{BCNF in a nutshell}
Suppose that $S$ is a sketch for such a category \catcw and that \catcw 
is maximally constrained to a set of instances $\reqtc$, 
assume that $S$ is simple and that \catcw is locally finite,
suppose that $x_1,...x_n$ and $y$ are edges
 within sketch $S$ with common codomain, 
if \msfd{x_1,...x_n}{y} is an intransitive functional dependency in \catcw  with respect to $\reqtc$
 then $\xnset$ is a designated mono source in \catc.

 Follows from the earlier constraints brought forward into this new scenario.
\end{frame}

\iffalse
\begin{frame}{Referential Inclusion Dependencies}
\begin{definition}
If $\catc$ is a category with \thirdstructure, if $\reqtc$ is a set of instances 
and if \fnsourceqnsource in $\catc$ and  $\set{q_1,...q_n}$ is a mono-source
 then a \term{referential inclusion dependency} $I$, 
 written $a[f_1,...f_n] \overset{I}{\subseteq} c[q_1,..q_n]$, 
 is a family of functions $I_D)_{D \in \reqtc}$
such that for each instance $D \in \reqtc$, $I_D$ is a function $I_D : D(a) \morph D(c)$ and
for each $i$, $1 \leq i \le n$, $I_D \circ D(q_i) = D(f_i)$.
\end{definition}
\end{frame}

\begin{frame}{Representation of Referential Inclusion Dependencies}
\begin{definition}
If $\catc$ is a category with \thirdstructure
and if $\reqtc$ is a set of instances
and \fnsourceqnsource in $\catc$ 
and if $a[f_1,...f_n] \overset{I}{\subseteq} c[q_1,..q_n]$ is a referential inclusion dependency
with respect  to $\reqtc$ 
then say that the inclusion dependency $I$ is \term{represented} in $\catc$
iff there exists a morphism $i:a \morph c$ in $\catc$ such that in each instance $D \in \reqtc$, $D(i) = I_D$. 
\end{definition}
\end{frame}
\fi
