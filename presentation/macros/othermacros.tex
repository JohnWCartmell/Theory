%
% othermacros
%

%copied from database literature review
\newcommand{\displaybibentry}[1]
{\begin{framed}
\bibentry{#1}
\end{framed}
}

% used in data tables
\newcommand{\colhead}[1]{\textbf{\textcolor{white}{#1}}}
\definecolor{myblue}{RGB}{71,71,186}
\newcommand{\largeAsterisk}{\mathop{\scalebox{1.5}{\raisebox{-0.2ex}{$\ast$}}}}
\newcommand{\fk}[1]{#1$^{\largeAsterisk}$}
\newcommand{\pk}[1]{\underline{#1}}
\newcommand{\seck}[1]{\dashuline{#1}}  % secondary key
\newcommand{\pkfk}[1]{\underline{#1}$^{\largeAsterisk}$} % primary key that is a foreign key
% \vpad gives vertical padding in a tabular
\newcommand{\vpad}[1]{\multicolumn{#1}{c}{}\\[-0.25cm]}

% words words words
\newcommand{\catMEterm}{category with designated monomorphisms and epimorphisms\ }
\newcommand{\IfSforCwithRCwords}{
If $S$ is a sketch for category \catcw considered as a data specification with requirement $\reqtc$\ }
\newcommand{\IfSforCwithRCwordsvariant}{
If $S$ is a sketch for structured category \catcw and if $S$ is considered as a data specification with requirement $\reqtc$\ }
\newcommand{\IfSforepimonoCwithRCwords}{
If $S$ is a sketch for a category \catcw with designated monomorphisms and epimorphisms considered as a data specification with requirement $\reqtc$\ }
\iffalse
\newcommand{\scmonosketchwording}{
If $S$ is a sketch for such a category
%of a category with finite products and designated monomorphisms and epimorphisms
considered as a data specification
with requirement $\reqtc$\ }
\fi
\newcommand{\spacechar}{\ }
\newcommand{\thirdstructure}{designated monomorphisms and epimorphisms and with finite products}
\newcommand{\IfSforproductepimonoCwithRCwords}{
If $S$ is a sketch for  a category with \thirdstructure \spacechar
%category \catcw with finite products and designated monomorphisms and epimorphisms 
considered as a data specification with requirement $\reqtc$\ }

\newcommand{\goodnesscriteria}[1]{\textbf{Goodness Criteria #1:}}


% From the Mathematical Theory of data paper
\newcommand{\ssfd}[2]{\ensuremath{#1 \morph #2}}  % singleton-singleton
\newcommand{\smfd}[2]{\ensuremath{\ssfd{#1}{\set{#2}}}}  % singleton-many
\newcommand{\msfd}[2]{\ensuremath{\ssfd{\set{#1}}{#2}}}  % many-singleton
\newcommand{\mmfd}[2]{\ensuremath{\msfd{#1}{\set{#2}}}}  % many-many



% All these should find a home in SharedMacros eventually 

% Commands for making a bit of vertical space. used when arrows and particularly labels of arrows
% use spec that is otherwise accounted for.
\newcommand{\seeroomup}[1]{\rule{0.1cm}{#1}}
\newcommand{\seeroomdown}[1]{\rule[-#1]{0.1cm}{0.1cm}}
\newcommand{\roomup}[1]{\rule{0cm}{#1}}
\newcommand{\roomdown}[1]{\rule[-#1]{0cm}{0.1cm}}


% BOX DIAGRAMS
\newcommand{\attr}[1]{#1}
\renewcommand{\attr}[1]{\psframebox[linecolor=red,framearc=.1]{#1}}
\newcommand{\attrtype}[1]{#1}
\renewcommand{\attrtype}[1]{\psframebox[linecolor=blue,framearc=.1]{#1}}
\newcommand{\etype}[1]{#1}
\renewcommand{\etype}[1]{\psframebox[linecolor=red,framearc=.1]{#1}}


\newcommand{\regularizetextheight}{\roomup{0.3cm}\roomdown{0.1cm}}

\newcommand{\binarystructurediagramnodes}[4][]{
\rput[tr](4.0,3){\Rnode{#1A}{\psframebox[framesep=10pt]{\regularizetextheight#2}}} 
\rput[tr](2.4,1){\rnode{#1B}{\psframebox[framesep=10pt]{\regularizetextheight#3}}}     
\rput[tr](5.6,1){\rnode{#1C}{\psframebox[framesep=10pt]{\regularizetextheight#4}}}        
}

\newcommand{\jacksonbinarydiagram}[3]
{
\pspicture(-0.4,0)(5.7,3)  % lower left is 0,0 upper right is 8,3
%\psgrid
\binarystructurediagramnodes{#1}{#2}{#3}
\rput[tr](2.3,0.9){*}
\rput[tr](5.4,0.9){*}
\ncangle[offsetA=-0.5cm, angleA=-90,angleB=90,armB=0.5cm]{A}{B}
\ncangle[offsetA=0.5cm, angleA=-90,angleB=90,armB=0.5cm]{A}{C}
\endpspicture      
}

\newcommand{\bachmanbinarydiagram}[4][]
{
\pspicture(-0.4,0)(5.7,3)  % lower left is 0,0 upper right is 8,3
%\psgrid
\binarystructurediagramnodes[#1]{#2}{#3}{#4}
\ncline[linewidth=3pt]{->}{#1A}{#1B}
\ncline[linewidth=3pt]{->}{#1A}{#1C}
\endpspicture      
}


\newcommand{\binarynetworkdiagramnodes}[3]{ 
\rput[tr](2.4,3){\rnode{A}{\psframebox[framesep=10pt]{\regularizetextheight#1}}}     
\rput[tr](5.6,3){\rnode{B}{\psframebox[framesep=10pt]{\regularizetextheight#2}}} 
\rput[tr](4.0,1){\Rnode{C}{\psframebox[framesep=10pt]{\regularizetextheight#3}}}       
}

\newcommand{\bachmannetworkdiagram}[3]
{
\pspicture(-0.4,0)(5.7,3)  % lower left is 0,0 upper right is 8,3
%\psgrid
\binarynetworkdiagramnodes{#1}{#2}{#3}
\ncline[linewidth=3pt]{->}{A}{C}
\ncline[linewidth=3pt]{->}{B}{C}
\endpspicture      
}

%craft bachman nwtrok share diagram
\newcommand{\doublebinarynetworkdiagramnodes}[6]{ 
\rput[tc](-2.5,3){\rnode{A}{\psframebox[framesep=10pt]{\regularizetextheight#1}}}  
\rput[tc](2.0,3){\rnode{B}{\psframebox[framesep=10pt]{\regularizetextheight#2}}}    
\rput[tc](-4.1,1){\rnode{C}{\psframebox[framesep=10pt]{\regularizetextheight#3}}} 
\rput[tc](-1.05,1){\rnode{D}{\psframebox[framesep=10pt]{\regularizetextheight#4}}}  
\rput[tc](2.0,1){\rnode{E}{\psframebox[framesep=10pt]{\regularizetextheight#5}}}   
\rput[tc](5.0,1){\rnode{F}{\psframebox[framesep=10pt]{\regularizetextheight#6}}}   
}

\newcommand{\doublebachmannetworkdiagram}[6]
{
\pspicture(-5.6,0)(6.5,3)  % lower left is 0,0 upper right is 8,3
%\psgrid
\doublebinarynetworkdiagramnodes{#1}{#2}{#3}{#4}{#5}{#6}
\ncline[linewidth=3pt]{->}{A}{C}
\ncline[linewidth=3pt]{->}{A}{D}
\ncline[linewidth=3pt]{->}{B}{D}
\ncline[linewidth=3pt]{->}{B}{E}
\ncline[linewidth=3pt]{->}{B}{F}
\endpspicture      
}

\newcommand{\doublecategorynetworkdiagram}[6]
{
\pspicture(-5.6,0)(6.5,3)  % lower left is 0,0 upper right is 8,3
%\psgrid
\doublebinarynetworkdiagramnodes{#1}{#2}{#3}{#4}{#5}{#6}
\ncarr{C}{A}
\ncarr{D}{A}
\ncarr{D}{B}
\ncarr{E}{B}
\ncarr{F}{B}
\endpspicture      
}

\newcommand{\mixedcategorynetworkdiagram}[6]
{
\pspicture(-5.6,0)(6.5,3)  % lower left is 0,0 upper right is 8,3
%\psgrid
\doublebinarynetworkdiagramnodes{#1}{#2}{#3}{#4}{#5}{#6}
\ncline[linewidth=2.5pt]{->}{C}{A}
\ncline[linewidth=2.5pt]{->}{D}{A}
\ncarr{D}{B}
\ncline[linewidth=2.5pt]{->}{E}{B}
\ncline[linewidth=2.5pt]{->}{F}{B}
\endpspicture      
}

\newcommand{\contextualcategorynetworkdiagram}[6]
{
\pspicture(-5.6,0)(6.5,3)  % lower left is 0,0 upper right is 8,3
%\psgrid
\doublebinarynetworkdiagramnodes{#1}{#2}{#3}{#4}{#5}{#6}
\ncsar{C}{A}
\ncsar{D}{A}
\ncarr{D}{B}
\ncsar{E}{B}
\ncsar{F}{B}
\endpspicture      
}


% Category DIAGRAMS START HERE
\newcommand{\nakedbinarysourcediagram}[5]{
\begin{array}{c p{0.5cm} c}
             &&   \Rnode{b}{#2}\\[0.01cm]
\Rnode{a}{#1} &&               \\[0.01cm] 
             &&   \Rnode{c}{#3}
\end{array} 
\begin{arrows}
\ncarr{a}{b}
\alabel{#4}
\ncarr{a}{c}
\blabel{#5}
\end{arrows}
}

\newcommand{\binarysourcediagram}[5]{$\nakedbinarysourcediagram{#1}{#2}{#3}{#4}{#5}$}
\newcommand{\fgsourcediagram}{\binarysourcediagram{a}{b}{c}{f}{g}}

%  binary source diagram with arrows pointing SE and SW
% nakedSWSEsourcediagram{prefix}{a}{b}{c}{f}{g}
\newcommand{\nakedSWSEsourcediagram}[6]{
\begin{array}{c c c}
              & \Rnode{#1a}{#2} &               \\[1.0cm] 
\Rnode{#1b}{#3} &               &\Rnode{#1c}{#4}
\end{array} 
\begin{arrows}
\ncarr{#1a}{#1b}
\alabel{#5}
\ncarr{#1a}{#1c}
\blabel{#6}
\end{arrows}
}


%  binary sink diagram with arrows pointing SE and SW
\newcommand{\nakedNWNEsinkdiagram}[5]{
\begin{array}{c c c}
              & \Rnode{a}{#1} &               \\[0.5cm] 
\Rnode{b}{#2} &               &\Rnode{c}{#3}
\end{array} 
\begin{arrows}
\ncarr{b}{a}
\alabel{#4}
\ncarr{c}{a}
\blabel{#5}
\end{arrows}
}


\newcommand{\unaryfdrepresentationdiagram}[8]{
$
\begin{array}{c p{0.2cm} c}
\nakedbinarysourcediagram{#1}{#2}{#3}{#4}{#5}&& \Rnode{d}{#6}
\end{array}
\begin{arrows}
\ncarr{d}{b}
\idcomp
\blabel{#7}
\ncarr{d}{c}
\alabel{#8}
\end{arrows}
$
}

\newcommand{\unaryfdrepresentationmappeddiagram}[8]{
$
\begin{array}{c p{0.2cm} c}
\nakedbinarysourcediagram{D(#1)}{D(#2)}{D(#3)}{D(#4)}{D(#5)}&& \Rnode{d}{D(#6)}
\end{array}
\begin{arrows}
\ncarr{b}{d}
\alabel{D(#7)^-1}
\ncarr{d}{c}
\alabel{D(#8)}
\end{arrows}
$
}

\newcommand{\commutativetrianglediagram}[6]{
$
\begin{array}{c p{0.4cm} c p{0.4cm} c}
              && \Rnode{b}{#2}  &&                 \\[0.6cm]
\Rnode{a}{#1} &&                && \Rnode{c}{#3}  
\end{array}
\begin{arrows}
\ncarr{a}{b}
\alabel{#4}
\ncarr{b}{c}
\alabel{#5}
\ncarr{a}{c}
\blabel{#6}
\end{arrows}
$
}

\newcommand{\commutativetrianglediagrammutant}[6]{
$
\begin{array}{c  c  c}
              & \Rnode{b}{#2}  &                 \\[0.85cm]
\Rnode{a}{#1} &                & \Rnode{c}{#3}  
\end{array}
\begin{arrows}
\ncarr{a}{b}
\alabel{#4}[0.15]
\ncarr{b}{c}
\alabel{#5}[0.6]
\ncarr{a}{c}
\blabel{#6}
\end{arrows}
$
}

\newcommand{\epimonosplitdiagram}[3]{
\commutativetrianglediagram{#1}{img(#3)}{#2}{#3_e}{#3_m}{#3}   
}


\iffalse %saved
\begin{array}{c p{2.0cm} c }                
               &&  \Rnode{b1}{#3_1}    \\ [0.75cm]
               &&  \Rnode{b2}{#3_2}    \\ [0.5cm]
\Rnode{a}{#2}  &&                      \\ [-0.5cm]
               &&       \vdots         \\ [0.85cm]
               &&  \Rnode{bn}{#3_{#1}}  
\end{array}
\fi

%nakedmultisourceobjects{n}{a}{b}{f}
\newcommand{\nakedmultisourceobjects}[4]{
\begin{array}{c p{2.0cm} c }
\Rnode{a}{#2}   &&
\begin{array}{c }                
\Rnode{b1}{#3_1}   \\ [0.75cm]
\Rnode{b2}{#3_2}   \\ [0.25cm]
\vdots             \\ [0.35cm]
\Rnode{bn}{#3_{#1}}  
\end{array}
\end{array}
}

% \nakedmultisourcediagram{n}{a}{b}{f}
\newcommand{\nakedmultisourcediagram}[4]{
\nakedmultisourceobjects{#1}{#2}{#3}{#4}
\begin{arrows}
\ncarr{a}{b1}
\alabel{#4_1}[0.5]
\ncarr{a}{b2}
\alabel{#4_2}[0.5][-1]
\ncarr{a}{bn}
\blabel{#4_{#1}}[0.5][-1]
\end{arrows}
}

% \nakedmultisourcepathdiagram{n}{a}{b}{f}
\newcommand{\nakedmultisourcepathdiagram}[4]{
\nakedmultisourceobjects{#1}{#2}{#3}{#4}
\begin{arrows}
\simplepath{a}{b1}
\alabel{#4_1}[0.5]
\simplepath{a}{b2}
\alabel{#4_2}[0.5][-1]
\simplepath{a}{bn}
\blabel{#4_{#1}}[0.5][-1]
\end{arrows}
}


\newcommand{\multisourcediagram}[4]{$\nakedmultisourcediagram{#1}{#2}{#3}{#4}$}
\newcommand{\multisourcepathdiagram}[4]{$\nakedmultisourcepathdiagram{#1}{#2}{#3}{#4}$}


% \multisourcedefinitiondiagram{x}{g}{h}{n}{a}{b}{f}
\newcommand{\monosourcedefinitiondiagram}[7]{
$
\begin{array}{c p{1.5cm} c}
\Rnode{x}{#1} && \nakedmultisourcediagram{#4}{#5}{#6}{#7}
\end{array}
\begin{arrows}
\parallelarrows{x}{a}{#2}{#3}
\end{arrows}
$
}

\newcommand{\fghfactordiagram}[6]
{
\binarysourcediagram{#1}{#2\roomup{0.5cm}}{#3}{#4}{#5}
\begin{arrows}
\ncarr{b}{c}
\alabel{#6}
\end{arrows}
}

\newcommand{\fghpartialfactordiagram}[6]{
\binarysourcediagram{#1}{#2\roomup{0.5cm}}{#3}{#4}{#5}
\begin{arrows}
\ncdarr{b}{c} %dashed arrow
\alabel{#6}
\end{arrows}
}

\newcommand{\fnsourceqnsource}{
$
\begin{array}{c p{0.25cm} c  p{0.25cm} c }
             &&   \Rnode{b1}{b_1} &&              \\[0.4cm]
\Rnode{a}{a} &&                   && \Rnode{c}{c} \\[0.4cm]
             &&   \Rnode{bn}{b_n} &&              
\end{array} 
\begin{arrows}
\ncarr{a}{b1}
\alabel{f_1}
\ncarr{c}{b1}
\blabel{q_1} 
\ncarr{a}{bn}
\blabel{f_n}
\ncarr{c}{bn}
\alabel{q_n}
\end{arrows}
$   
}

\newcommand{\parallelarrows}[4]{
\ncarc[nodesep=2pt,arcangle=10,offset=2pt]{->}{#1}{#2}
\alabel{#3}
\ncarc[nodesep=2pt,arcangle=-10,offset=-2pt]{->}{#1}{#2}
\blabel{#4}
}

\newcommand{\fgparalleldiagram}{
 $
\rule[-0.3cm]{0pt}{0.9cm} %to add vertical space of diagram -- based on lowering diagram 0.3cm and heght 0.9cm
                            % change thickness from 0pt to 1 pt to debug
\begin{array}{c p{0.5cm} c  }
 \Rnode{a}{a}            &&   \Rnode{b}{b}
\end{array} 
\begin{arrows}
\iffalse
\ncarc[nodesep=2pt,arcangle=10,offset=2pt]{->}{a}{b}
\alabel{f}
\ncarc[nodesep=2pt,arcangle=-10,offset=-2pt]{->}{a}{b}
\blabel{g}
\fi
\parallelarrows{a}{b}{f}{g}
\end{arrows}
$  
}

\newcommand{\fgcomposablediagram}[5]{
\mbox{
\roomup{0.45cm}
$
\begin{array}{c p{0.5cm}cp{0.5cm}c}
\Rnode{x}{#1}&&\Rnode{y}{#2}&&\Rnode{z}{#3}
\end{array}
\begin{arrows}
\ncarr{x}{y}
\alabel{#4}
\ncarr{y}{z}
\alabel{#5}
\end{arrows}
$    
}
}

