\subsection{Background}
\note  In metamathematics there are well established paradigms for use of the terms
\term{theory}, \term{signature}, \term{interpretation} and \term{model};
in this paper  we will follow these paradigms as closely as possible except that the term \term{instance} will substituted  for that of model. 
This substitution is made so as to reserve use of the term \term{model} for  use not as metamathematicians 
use it but as other theoreticians do and so as to be able to speak of theories modelling 
the world rather than of theories having models. For a discussion of the antithetical uses of the term 
\term{model} in metamathematics versus other disciplines see \cite{HodgesModelTheory}.

Traditionally, the notion of a theory, or of a certain class of theories, is  defined syntactically.
A metamathematically important class of theories  is the class of elementary theories. 
This is the class of theories written in first-order predicate logic with equality. 
Such a theory is defined to consist of a signature (see \cite{HodgesModelTheory}, for example) plus a set of axioms: 
the signature is required to table a set of predicate symbols and functions symbols and to assign arities to each, 
the axioms are required  to be a set of closed \term{well formed formulas} (wffs) written
in the language of the first-order predicate calculus (with equality)
using the tabled  symbols  consistently with the arities defined for them. 

\note In this tradition (see \cite{Mendelson}, for example), an interpretation of an elementary theory is defined to be a mapping of the symbols defined in the signature 
of the theory to actual predicates and actual functions over some domain and subject to the requirement that n-ary predicate, respectively function, symbols are mapped to n-ary predicates, respectively functions.
As defined by Tarski in the so called satisfaction definition
such an interpretation induces an interpretation of all
closed well formed formulas of the signature as truth values. 
A model of a theory is defined to be an interpretation of the theory such that all axioms of the theory are mapped to true (i.e. are satisfied by the interpretation). 

\note
Note that the distinction between signature and theory is significant because it makes possible a definition of model 
via a definition of interpretation: an interpretation is an interpretation of a signature, 
a model is an interpretation in which all axioms are satisfied i.e. have truth value `true'.   


\note 
We should mention that the term theory can be used somewhat differently. 
For example in the case of the theory of groups two different axiomatisations may be given 
-- one in which the inverse to a given element is axiomatised as a left inverse, and one in which the inverse to a given element is axiomatised as a right inverse --
the net effect of either axiomatisation being the same.
This usage in which  theory refers to the net effect of a signature plus associated axioms
can be formalised by describing a 
theory not as we have outlined above but as any set of sentences
 (of a given signature) that is closed under logical deduction\footnote{One such theory in this sense is the total set of true sentences of a model and  
this is called the diagram of the model. I have a  memory of a conference in the 1970's and of hearing a German set theorist
 remark that "God doesn't need Logic -- he has the diagram of the universe". He meant, of course, diagram in this sense of set of all true sentences.}. 
If we adopt this other useage in which a theory is a set of sentences closed under deduction then a signature plus axioms is referred to not as a theory but as a presentation of a theory. 

\note
A most significant subclass of the class of elementary theories is the class of algebraic theories. 
What is meant by a algebraic theory, prior to Lawvere at least, is an elementary theory in a signature having only function symbols, i.e. no symbols for predicates, 
and in which every axiom is an equational identity between open terms with the understanding that
all variables are universally quantified. 
Because algebraic theories are special kinds of elementary theory the definitions of interpretation and model apply and specialise to definitions of 
interpretation and model for algebraic theories; in this special case, though, a model of a theory $U$ is usually spoken of as an algebra of $U$.

\note
In the traditional view, the domain of interpretation of an algebraic theory may be any set $A$ 
and each n-ary function symbol is to be interpreted by a  function $f:A^n \morph A$.
After Lawvere it becomes usual to consider that an algebraic theory can be interpreted in any category with finite products
 so that $A$ can be any object of the category and  $f$ may be any morphism $f:A^n \morph A$. 
For $U$ an algebraic theory, the term `model of $U$' therefore may take two meanings:
\begin{enumerate}[(i)]
\item in the most general sense of `model in any category  with finite products',
 such models of $U$ are sometimes said to be internal $U$-objects (this terminology is then shortened further so that internal monoid-object becomes internal monoid and so on). 
\item in the restricted sense in which the interpretation is by sets and functions, such models are sometimes said to be algebras or
$U$-algebras. The category of $U$-algebras is denoted $U$-$alg$. 
\end{enumerate} 
Model in sense (ii) is a special case of model in sense (i) ---  the case in which the category with finite products is taken to be the category of sets and functions.

\note For completeness I must mention a different but related use of the term `interpretation' to describe interpretations of the syntax of one theory in terms of the syntax of a second
such as are determined by a mapping of the symbols of one theory into the terms and well formed formulae of another. 
Such an interpretation is said to be \term{valid} provided that the axioms of the first are mapped into provable well formed formulae of the second.  Such syntactic interpretations compose and therefore for each class of theory there is a category of theories and interpretations and accordingly such 
interpretations between theories may be said to be theory morphisms.
As an example, the two different presentations of the theory of groups mentioned above are different but isomorphic objects in the category of algebraic theories. 

\subsection{Generalised Algebraic Theories 	and Contextual Categories}
\note
In the case of generalised algebraic theories then much of the above carries through except that now 
it is not possible to define an independent notion of `signature of a generalised algebraic theory' and
the approach to defining what a generalised algebraic theory is cannot simply be via a definition of what a signature is followed by a definition 
of a theory  as a signature plus axioms. This is because the rules for introducing symbols need be well-typed and to know that
they are well-typed we already need knowledge of the theory -- in other words the notions of theory and signature are interdependent. 
The  definition of generalised algebraic theory (\cite{Cartmell78},\cite{Cartmell86})  works around this difficulty and is by way of 
a definition of pretheory, 
followed by a definition of a theory as a well-typed{\footnote{In this paper I use the term `well-typed' in place of the term `well-formed' defined in \cite{Cartmell78} and \cite{Cartmell86}.} pretheory. 

\note Consequential to the difficulty defining the notion of `signature 
(to be used in a generalised algebraic theory)' prior to defining
what a (generalised algebraic) theory consists of, is  a difficulty defining the notion of `interpretation of a signature (for a generalised algebraic theory)' prior to 
defining what a `model of a generalised algebraic theory' consists of.  In \cite{Cartmell78} (published in \cite{Cartmell86}) this consequential difficulty is avoided by stepping over into algebra.
First  it is established \footnote{
The proof that categories $\catGAT$ and $\catCon$ are equivalent  is entirely trivial but runs to more than 50 pages. I have always interpreted this equivalence as meaning that generalised algebraic theories and contextual categories are more or less the same thing but if this is considered from the point of view of foundations then we have to tread carefully.} 
that  generalised algebraic theories and contextual categories are equivalent in the following sense: 
\noindent \label{ccgatequivalence}
\begin{point}
there is a category $\catGAT$ of generalised algebraic theories and interpretations,
\end{point}
\begin{point}
there is a category $\catCon$ of contextual categories,
\end{point}
\begin{point}
there is a functor $\ccat[C]: \catGAT \morph \catCon$  (for $U$ a generalised algebraic theory, the category $\ccat[C](U)$ 
has as objects equivalence classes of contexts and realisations, as defined 
in \cite{Cartmell78} and  \cite{Cartmell86}), 
\end{point}
\begin{point}
there is a functor $\gat[U]:\catCon \morph \catGAT$,
\end{point}
\begin{point}
the functor $\ccat[C]$ is an equivalence with inverse $\gat[U]$.
\end{point}
Next there is a description of
a contextual category $\Fam$ of sets, families of sets, families of families of sets and so on. 

This makes possible an  algebraic, post-Lawvere
style,  definition of models in either the general or the more restrictive sense so that in 
\cite{Cartmell78} and  \cite{Cartmell86}) we find,
for $U$ a generalised algebraic theory, 
\begin{point}
 a model in the restricted sense of a U-algebra is defined to be a functor $A: \ccat[C](U) \morph Fam$, 
\end{point}
\begin{point}
a model in the more general sense of an internal $U$-structure\footnote{The  term `internal $U$-structure is chosen over `internal $U$-object' because the latter
is no longer appropriate in the broader context in which, generally, theories require multiplicities of objects rather than single objects for their domain of interpretation.} in a contextual category
$C$ is defined to be a contextual functor $A: \ccat[C](U) \morph C$.
\end{point}
The category of internal $U$-structures is defined to be the category whose objects
are pairs $\tuple{\catc,A}$ 
where $\catcw$ is a contextual 
category and $A$ is an internal 
$U$-structure in
 \catcw and whose morphisms between $\tuple{\catc,A}$ and $\tuple{\catc',A'}$ are pairs $\tuple{F, \eta}$ where
$F: \catc \morph \catc'$ is a contextual functor and $\eta: A  \morph  F \circ A'$ is a natural transformation.
In other words the category of internal $U$-structures
is  the coslice category
$\CofU \downarrow \catCon$. Needless to say this category has an initial object\footnote{If\ $U$ is a considered a type theory (whatever that is) then 
this initial object may be what Vladimir  refers
to as the term model when speaking of the initiality conjecture.}
--- the identity functor on  $\CofU$.
 
Specialising to the case of $U$-algebras,  
an homomorphism between $U$-algebras $A$ and $A'$ is defined to be a 
natural transformation $\eta: A \morph A'$ and the category of $U$-algebras is a full subcategory of the 
functor category $\Fam^{\CofU}$. 

\note 
In \cite{Cartmell78} and  \cite{Cartmell86}) there is also a description of initial $U$-algebras but details are omitted:
\begin{tightquote}
Consider for a moment. Every theory $U$ has a minimal model denoted $\KU$ built out of the closed terms of $U$. Alternatively this minimal model is described just in terms of the structure $\CofU$. For example
if $1 \base A$ in $\CofU$ then 
$\KU(A)=Hom(1,A)$, otherwise if $1 \base A_1 \base ... \base A_n \base A$ in $\CofU$
then if $a_1 \in \KU(A_1)$, ... if $a_n \in \KU(A_n)(a_1,...a_{n-1})$ then 
$\KU(A)(a_1,...a_n)=\setsuchthat{a\in Hom_{\CofU}(1,A)}{a \circ p_A = a_n}$. \\
\end{tightquote} 

Followed by :
\begin{tightquote}
Now, the free $U$-algebras are the algebras $I$-$alg(\KUp)$ for $I: U \morph U'$ an extension of $U$ by constants alone. The finitely generated free $U$-algebras are those algebras where $U'$ is an extension by finitely many constants. \\
\end{tightquote}

\subsection{Interpreting Generalised Algebraic Theories}

\note There is an indirectness in the algebraic-style definitions of model given in \cite{Cartmell78} and  \cite{Cartmell86} and that we have summarised above. 
As a consequence, though they are  useful for a 
number of metamathematical purposes they  don't really
help one reason directly about what constitutes a model in the case of any particular generalised algebraic theory --
although this is something we can have a good intuition about. 
The definitions we shall give in this paper rectify this and directly formalise the intuition notion of model.
As a bonus, from an examination of these definitions it can be seen  that to every generalised algebraic theory $U$ there is a generalised algebraic theory 
$\hat{U}$ which is the theory of internal $U$-structures\footnote{This is reliant on their being a generalised algebraic theory of contextual categories. There are nuances here and so at some point we need to discuss the extent or the manner to which this is true.}.

\note 
In this paper, in section \ref{sectioninwhichinstanceisdefined},  we define the missing definition, 
so to speak,  of an interpretation of  a generalised algebraic theory $U$ in  a contextual category \catcw and we say what it is for such an interpretation to be valid. 
In essence such an interpretation $I$ consists of a \textit{consistent} mapping

\begin{center}
\begin{tabular}{c p{1cm} c}
derived \Trules of $U$           & \raisebox{-0.07cm}{$\Imapsto$} & objects of \catc \\ [0.1cm]
derived \trules of $U$    & \raisebox{-0.07cm}{$\Imapsto$} & sections of \catc \\ [0.1cm]
\end{tabular}
\end{center}
so that derivable equalities in $U$ map to identical objects, respectively, sections of \catc.
There is a fair amount of detail to what is meant by  `consistent mapping' but what is fundamental is that this detail implies that 
interpretations $I$ of $U$ in \catcw are completely
determined by their mapping of the introductory rules of $U$. 
This is the equivalent, in the generalised algebraic case, of 
 the fact that, in regard to algebraic or first-order  theories, interpretations
are determined by a consistent mapping of the symbols withrespect to their signatures.

\note
The definition that we give is a definition  of model in the sense of an internal $U$-structure in the contextual category $\catc$:
an internal $U$-structure in $C$ is exactly 
a valid interpretation of $U$ in $C$. This definition may of course be specialised to a  definition of model in the sense of
$U$-algebra by particularising to the case where $C$ is the contextual category $\Fam$.

\note 
From the details in
section \ref{sectioninwhichinstanceisdefined} 
of the definition of interpretation
it turns out that 
to every gat $U$ there is a theory of internal $U$-structures. We shall denote this theory as $\hatU$.

Every such theory $\hatU$ is an extension of the generalised algebraic theory of contextual categories
by a set of rules (introductory rules and axioms) that have  the empty context as premise
 --- as such it is an extension
by constants and equational identities between closed terms.  Conversely every  extension of
the theory of contextual categories by just constants and equational identities between closed terms can be interpreted as being a description of a generalised algebraic theory. This is expoited in \cite{BCDEpaper}.

\note 
The instances of $\hatU$  in $\Fam$ consist of  internal $U$-structures  i.e. they consist of contextual categories \catcw along with particular instances $I$ of
the theory $U$ in the contextual category \catc. \\
The category of $\hatU$-algebras is (isomorphic to) the category of internal $U$-structures.

\note
\label{termmodelEQfreealgebra}For any generalised algebraic theory $\gat[U]$ we have two different 
and therefore isomorphic\commentary{\highlight{isomorphic} in what category??} descriptions of the initial object of the category of internal $\gatU$-structures:
one as the free algebra $K_{\hatU}$ of the theory $\hatU$ as summarised above and one  as the pair $\bigtuple{\CofU, I_{triv}}$ 
where $I_{triv}$ is the trivial instance of $\gatU$ in $\CofU$. We have therefore that
\begin{equation}
K_{\hat{U}} \cong \bigtuple{\CofU, I_{triv}}.
\end{equation}

\note 
Note that if $\gat[U]$ is a single-sorted or many-sorted algebraic theory then 
$\hatU$ is generalised algebraic 
and so solely within these regimes there is no equivalent of the situation described in para \ref{termmodelEQfreealgebra}\commentary{\highlight{NA contests this.}}.

\subsection{Outline}

To pave the way for the main definition,
the definition of generalised algebraic theories is reviewed 
in section \ref{generalisedalgrbraictheories}, and
a summary of some housekeeping lemmas from \cite{Cartmell78} is given. 
Various  extensions to the notation of contextual categories are described in section \ref{contextualnotationpartone} 
including a description of Voevodski's `s' operator and of a local product notation 
that uses an operator $\crossx{}{}{}$ as a special case of pullback. Various
identities that we require are then detailed. 
The main definition is in section \ref{sectioninwhichinstanceisdefined}.
In section
 \ref{contextualnotationparttwo} introduce a further extension to the notation of contextual categories and present and prove various identities that 
support the presentation and simplication of examples.

\note We show in lemma \ref{internalmonoidlemma}  that 
the generalised algebraic theory of internal monoids can be expressed  as 
the theory of contextual categories plus:

\begin{gatrules}
\gatintros
\gatintroducing{M}
\ofT{M}{Ob} \\
\gatintroducing{unit}
\ofT{unit}{Hom(1,M)} \\
\gatintroducing{mult}
\ofT{mult}{Hom(M \times M,M)} \\
\gataxioms
\gatintroducing{ \gataxiomno{1} }
\tuple{p_M \circ unit,id_M} \circ mult =id_M \\
\gatintroducing{ \gataxiomno{2} }
\tuple{id_M,p_M \circ unit} \circ mult =id_M \\
\gatintroducing{ \gataxiomno{3} }
(mult \times id_M) \circ mult = (id_M \times mult) \circ mult
\end{gatrules}

This is in agreement with Barr and Wells \cite{BarrandWells}, page 232, where they describe
monoids internal to  a category\footnote{Generally we would be thinking of a category with finite products including terminal object here, though, as they say, not all products need be available in the category for there to be an internal monoid.}
as an example of a finite product (FP) sketch.

\note As a second worked example (in lemma \ref{internalcategorylemma})  we derive the generalised algebraic theory of internal categories.

\subsection{Acknowledgement}
I have written this paper after studying a draft of a paper (\cite{BCDEpaper}) sent to me by 
 one of its authors, Peter Dybjer. I hope the material presented here sheds some light on that paper. 
The two examples that I give are the same two presented there.
