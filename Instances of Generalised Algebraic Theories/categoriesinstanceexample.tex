

\newcommand{\sect}{Sect}
\newcommand{\insect}[2]{#1 \in Sect(#2)}

\newcommand {\OO}{Ob^2}
\newcommand {\OOO}{Ob^3}
\newcommand {\OOOO}{Ob^4}
\newcommand{\HomOb}{\crossx{Hom}{Ob}{1}}
\newcommand{\fid}{\qq{id}}
\newcommand{\fcomp}{\qq{\circ}}

\newcommand{\leftidentitylhsterm}{({x_1}^*\qq{id})^*\tuple{x_1,x_1,x_2}^*\fcomp}
\newcommand{\rightidentitylhsterm}{({x_2}^*\qq{id})^*\tuple{x_1,x_2,x_2}^*\fcomp}
\newcommand{\HomHom}{\crossx{Hom}{Hom}{\OO}}

\newcommand {\yOOO}{\ofT{y_1,y_2,y_3}{Ob}}
\newcommand {\yOOOfH}{\yOOO,\,\ofT{f}{Hom(y_1,y_2)}}
\newcommand{\yOOOfHgH}{\yOOOfH,\,\ofT{g}{Hom(y_2,y_3)}}

\newcommand {\yOOOfHmapped}{\tuple{y_1,y_2}^*Hom}
\newcommand {\yOOOfHgHmapped}{\crossx{\yOOOfHmapped}{\tuple{y_2,y_3}^*Hom}{\OOO}}
\newcommand {\yOOOfHgHHmapped}{\crossx{\big(\yOOOfHgHmapped\big)}{{\tuple{y_1,y_3}^*Hom}}{\OOO}}
\newcommand{\gatinterpretationcontext}[1]{&\multicolumn{5}{p{15cm}}{#1}}


%Composition introductory rule
\newcommand{\compfour}{\tuple{y_1,y_2}^*Hom}
\newcommand{\compfive}{\tuple{\dot y_2,\dot y_3}^*Hom}
\newcommand{\compsix}{\tuple{\ddot y_1,\ddot y_3}^*Hom}


% Left identity axiom mapping
\newcommand{\leftidentitymapped}{\tuple{x_1,x_1,x_2,x_1\circ \fid,id_{Hom}}^*\fcomp=s(id_{Hom})}

% Right identity axiom mapping
\newcommand{\rightidentitymapped}{\tuple{x_1,x_1,x_2,id_{Hom},x_2\circ \fid}^*\fcomp=s(id_{Hom})}


%*****************************
% Associativity axiom mapping
%******************************
\newcommand{\associativitypremise}
       {\ofT{z_1,z_2,z_3,z_4}{Ob},\,
                                \ofT{f}{Hom(z_1,z_2)},\,\ofT{g}{Hom(z_2,z_3)},\,\ofT{h}{Hom(z_3,z_4)}}	
\newcommand{\associativitypremisereversed}
       {\ofT{f}{Hom(z_1,z_2)},\,\ofT{g}{Hom(z_2,z_3)},\,\ofT{h}{Hom(z_3,z_4)},\,
			                \ofT{z_1,z_2,z_3,z_4}{Ob}
                                }																												
\newcommand{\associativitypremisepoppopmapped}{\tuple{z_1,z_2}^*Hom}
\newcommand{\associativitypremisepopmapped}{\tuple{\dot z_2,\dot z_3}^*Hom}											
\newcommand{\associativitypremisemapped}{\tuple{\ddot z_3,\ddot z_4}^*Hom}
\newcommand{\Q}{\associativitypremisemapped}
\newcommand{\Qp}{\associativitypremisepopmapped}
\newcommand{\Qpp}{\associativitypremisepoppopmapped}
\newcommand{\assoczimapped}{s(p_{\Q,Ob^i})}
\newcommand{\assoczimappedintermediary}{s(p_{\Q,Ob^i}\circ q(p_{Ob^{i-1},1},Ob))}
\newcommand{\assocziremapped}{{s(\dddot z_i)}}
\newcommand{\assoctripledotzidefiniens}{p_{\Q,\OOOO}\circ z_i}
\newcommand {\assocfmapped}{s(p_{\Q,\Qpp})}
\newcommand {\assocgmapped}{s(p_{\Q,\Qp})}
\newcommand {\assochmapped}{s(id_{\Q})}
\newcommand {\assocfdefiniens}{p_{\Q,\Qpp}\circ q(\tuple{z_1,z_2},Hom)}
\newcommand {\assocgdefiniens}{p_{\Q,\Qp}\circ q(\tuple{\dot z_2, \dot z_3},Hom)}
\newcommand {\assochdefiniens}{q(\tuple{\ddot z_3, \ddot z_4},Hom)}
\newcommand {\assocfmappedintermediary}{s(\assocfdefiniens)}
\newcommand {\assocgmappedintermediary}{s(\assocgdefiniens)}
\newcommand {\assochmappedintermediary}{s(\assochdefiniens)}
\newcommand {\assocfremapped}{s(f)}
\newcommand {\assocgremapped}{s(g)}
\newcommand {\assochremapped}{s(h)}
\newcommand{\associativitylhstype}{\isT{{Hom(z_1,z_4)}}}
\newcommand{\associativitylhstypemappedinitially}{\duple{s(\dddot z_1),s(\dddot z_4)}^*Hom}
\newcommand{\associativitylhstypemapped}{\tuple{\dddot z_1,\dddot z_4}^*Hom}
\newcommand{\associativitylhstermtyping}{\ofT{(f \circ g) \circ h}{Hom(z_1,z_4)}}
\newcommand{\associativityrhstermtyping}{\ofT{f \circ (g \circ h)}{Hom(z_1,z_4)}}	
\newcommand {\assocfogmapped}{\tuple{\dddot z_1,\dddot z_2,\dddot z_3,f,g}^*\fcomp }
\newcommand {\assoclhsmapped}{\duple{s(\dddot z_1),s(\dddot z_3),s(\dddot z_4),\assocfogmapped,s(h)}^*\fcomp}
\newcommand {\assoclhsremapped}{\tuple{\dddot z_1,\dddot z_3,\dddot z_4,\assocfogmapped \circ q(\tuple{\dddot z_1,\dddot z_3},Hom),h}^*\fcomp}
\newcommand {\assocgohmapped}{\duple{s(\dddot z_1),s(\dddot z_2),s(\dddot z_3),s(g),s(h)}^*\fcomp }
\newcommand {\assocgohremapped}{\tuple{\dddot z_1,\dddot z_2,\dddot z_3,g,h}^*\fcomp }
\newcommand {\assocrhsmapped}{\duple{s(\dddot z_1),s(\dddot z_2),s(\dddot z_4),s(f),\assocgohremapped}^*\fcomp}
\newcommand {\assocrhsremapped}{\tuple{\dddot z_1,\dddot z_2,\dddot z_4,f,\assocgohremapped \circ q(\tuple{\dddot z_2,\dddot z_4},Hom)}^*\fcomp}

\newcommand{\assocequivalentlhs}{\tuple{\dddot z_1,\dddot z_3,\dddot z_4,\tuple{\dddot z_1,\dddot z_2,\dddot z_3,f,g}\circ \compmorph,h} \circ \compmorph}
\newcommand{\assocequivalentrhs}{\tuple{\dddot z_1,\dddot z_2,\dddot z_4,f,\tuple{\dddot z_1,\dddot z_2,\dddot z_3,g,h}\circ \compmorph} \circ \compmorph}

% remapping
\newcommand{\compmorph}{\text{`$\circ$\kern-2pt'}}%{\odot} %{\llcorner \circ \lrcorner}

% These two should maybe be moved into ccategories shared macros
\newcommand{\ccplaceholder}{\rule[-0.2cm]{0cm}{0.6cm}\kern0.2cm}
\newcommand{\rightend}[1] { \kern-0.2cm\Rnode{#1} {\ccplaceholder} }

\note
In this second example we describe the structure of internal categories by following the main definition and examining
what constitutes a valid interpretation of the (generalised algebraic) theory of categories ($tc$) in some 
 contextual category \catc.

\note The theory of categories ($tc$) that I work with is presented as follows:
\begin{gatrules}
\gatintros
\gatintroducing{Ob}
\isT{Ob} \\
\gatintroducing{Hom}
  \gatsingular{\ofT{x_1,x_2}{Ob}}{\isT{Hom(x_1,x_2)}} \\	
\gatintroducing{id}
  \gatsingular{\ofT{w}{Ob}}{\ofT{id(w)}{Hom(w,w)}} \\	
\gataxioms
\gatintroducing{  \gataxiomno{1} \\   \gataxiomno{2}}
\begin{gatgroup}{\ofT{f}{Hom(x_1,x_2)},\ \ofT{x_1,x_2}{Ob}}
    \gatleaf{}{id_{x_1} \circ f = f} \\
    \gatleaf{}{f \circ id_{x_2} = f}
\end{gatgroup} \\
\gatintroducing{ \gataxiomno{3} }
\gatsingular{\associativitypremisereversed}{(f \circ g) \circ h = f \circ (g \circ h)} 
\end{gatrules}

\note If $I$ is a valid interpretation of $tc$ in a contextual category \catc then the sorts $Ob$ and $Hom$ of $tc$ 
must be mapped by $I$  to objects $I(Ob)$ and  $I(Hom)$ of \catc.
Similarly  the operators symbols
$id$ and $\circ$ must be mapped to sections $I(id)$ and $I(\circ)$ of \catc.

Following the convention described earlier in section \ref{projectionnaming} we simplify  
the description that follows by writing $Ob$ for $I(Ob)$, $Hom$ for $I(Hom)$.
For a further simplification we write $\qq{id}$ for $I(id)$ and   $\qq{\circ}$ for $I(\circ)$.   I will ask the reader  to distinguish for themselves 
those uses of `$Ob$' and `$Hom$' in reference to sorts of the theory $tc$ from those uses in reference to the interpretation of these sorts in the contextual category \catc. 
\note With respect to the projection morphisms of powers of $Ob$, I will use the conventions described earlier in section \ref{projectionnaming}.
\note
In regard to the object $Ob^3$ in \catcw, for $i=1,2,3$, I define
 $y_i: \OOO \morph Ob$ to be the i'th projection morphism  i.e. $y_1 = p_{\OOO,Ob}$, $y_2 = p_{Ob^3}\circ q(t_{Ob},Ob)$,$y_3 = q(t_{Ob^2},Ob)$
This enables us to construct the following pullback
\begin{equation*}
\begin{array}{r  p{4cm} c}
\compfour     \rightend{Qpp} && \Rnode{Hom}{Hom}               \\ [1cm]
\OOO          \rightend{O3}  && \Rnode{O2}{Ob^2}              
\end{array}
\mbox{
\ncsar{Qpp}{O3}
\ncsar{Hom}{O2}
\ncarr{Qpp}{Hom}
\alabel{q(\tuple{y_1,y_2},Hom)}
\ncarr{O3}{O2}
\alabel{\tuple{y_1,y_2}}}
\end{equation*}														

In accordance with a convention mentioned earlier we now define $\dot y_i : \compfour \morph Ob$, for $i = 1,2,3$, 
                                     by $\dot y_i = p_{\compfour}\circ y_i$. \\
																																																												
Next we consider the pullback:

\begin{equation*}
\begin{array}{r  p{4cm} c}
\compfive     \rightend{Qpp} && \Rnode{Hom}{Hom}               \\ [1cm]
\compfour     \rightend{O3}  && \Rnode{O2}{Ob^2}              
\end{array}
\mbox{
\ncsar{Qpp}{O3}
\ncsar{Hom}{O2}
\ncarr{Qpp}{Hom}
\alabel{q(\tuple{\dot y_2,\dot y_3},Hom)}
\ncarr{O3}{O2}
\alabel{\tuple{\dot y_2,\dot y_3}}}
\end{equation*}	

and define   $\ddot y_i : \compfive \morph Ob$, for $i = 1,2,3$, 
                                     by $\ddot y_i = p_{\compfive}\circ \dot y_i$. \\
																		
Finally this enables us to construct  the pullback
\begin{equation*}
\begin{array}{r  p{4cm} c}
\compsix     \rightend{Qpp} && \Rnode{Hom}{Hom}               \\ [1cm]
\compfive     \rightend{O3}  && \Rnode{O2}{Ob^2}              
\end{array}
\mbox{
\ncsar{Qpp}{O3}
\ncsar{Hom}{O2}
\ncarr{Qpp}{Hom}
\alabel{q(\tuple{\ddot y_1,\ddot y_3},Hom)}
\ncarr{O3}{O2}
\alabel{\tuple{\ddot y_1,\ddot y_3}}}
\end{equation*}	
																	
\noindent and this is relevant to us because in the lemma that follows we will show that for an interpretation $I$ to be valid the section $I(\circ)$ must be a section of $\compsix$.																	
	
					
\note Next we turn to $Ob^4$.
Following the earlier convention we define the projection functions 
to be $z_1,z_2,z_3$ and $z_4$ so that for $i = 1, 2,3,4$, $z_i: \OOOO \morph Ob$. \\

Then we proceed to define   $\dot z_i : \associativitypremisepoppopmapped \morph Ob$
                                      by $\dot z_i = p_{\associativitypremisepoppopmapped}\circ z_i$, 
to define  $\ddot z_i : \associativitypremisepopmapped \morph Ob$ 
                                    by $\ddot z_i = p_{\associativitypremisepopmapped, \OOOO}\circ z_i$, 
and, finally, to define $\dddot z_i : \associativitypremisemapped \morph Ob$ 
                                      by $\ddot z_i = p_{\associativitypremisemapped, \OOOO}\circ z_i$ 	
so that for $i = 1, 2,3,4$ we have
\begin{equation*}
\begin{array}{r l p{4cm} c}
\associativitypremisemapped       \rightend{Q}  & \kern-0.2cm\rightend{Qright}                          \\ [1cm]
\associativitypremisepopmapped    \rightend{Qp} &  &&   \\ [1cm]
\associativitypremisepoppopmapped \rightend{Qpp}&  &&   \\ [1cm]
\OOOO                             \rightend{O4} & && \Rnode{Ob}{Ob}              
\end{array}
\mbox{
\ncsar{Q}{Qp}
\ncsar{Qp}{Qpp}
\ncsar{Qpp}{O4}
%\ncarr{Q}{Ob}
\ncarc[nodesepA=5pt,nodesepB=\arrnodesepB,offsetA=\arroffsetA,offsetB=\arroffsetB,arrowsize=5pt,arrowinset=0.7]{->}{Q}{Ob}
\alabel{\dddot z_i}
\ncarr{Qp}{Ob}
\alabel{\ddot z_i}
\ncarr{Qpp}{Ob}
\alabel{\dot z_i}
\ncarr{O4}{Ob}
\alabel{z_i}
}
\end{equation*} in \catcw.

The object $\associativitypremisemapped$ is relevant to us because it is the interopretation under $I$ of the premise
$\associativitypremise$ of the associativity axiom. This helps explain the next three definitions.
We define $f$, $g$ and $h$ by

\begin{align*}
f &= \assocfdefiniens,
g &= \assocgdefiniens,
h &= \assochdefiniens.
\end{align*}

With $f$, $g$ ad $h$ so defined, the following diagrams
\vspace{0.3cm}
\begin{equation*}
\ccsquareoutline{1.4cm}{1.2cm}{\associativitypremisemapped}{Hom}{\OOOO}{\OO}
\mbox{
\nccdar{TL}{BL}
\ncsar{TR}{BR}
\ccsquareacross{f}{\tuple{z_1, z_2}}
\kern -1cm %work around bug with lost arrow space bug
}
\ccsquareoutline{1.4cm}{1.2cm}{\associativitypremisemapped}{Hom}{\OOOO}{\OO}
\mbox{
\nccdar{TL}{BL}
\ncsar{TR}{BR}
\ccsquareacross{g}{\tuple{z_2, z_3}}
\kern -1cm %work around bug with lost arrow space bug
}
\ccsquareoutline{1.4cm}{1.2cm}{\associativitypremisemapped}{Hom}{\OOOO}{\OO}
\mbox{
\nccdar{TL}{BL}
\ncsar{TR}{BR}
\ccsquareacross{h}{\tuple{z_3, z_4}}
}
\end{equation*} commute in \catc.	\\

We make use of all these namings in the following:

\begin{lemma}
\label{internalcategorylemma}
An internal category in a contextual category \catcw consists of
\begin{itemize}
\item An object $Ob$ of \catc,
\item an object $Hom \in Cover(O^2)$ in \catc,
\item A section $\fid \in Sect(s(id_{Ob})^*Hom)$ in \catc, 
\item A section $\fcomp \in Sect(\compsix) $ of \catc \\ 
													
\end{itemize}
such that
\begin{equation}
\label{leftidentityaxiom}
\leftidentitymapped
\end{equation}
\begin{equation}
\label{rightidentityaxiom}
\rightidentitymapped
\end{equation}
and
\begin{equation}
\label{associativityaxiom}
\assoclhsremapped = \assocrhsremapped
\end{equation}
so that


Equivalently an internal category in a contextual category \catcw consists of
\item objects $Ob$ and  $Hom$  and a section $\fid$ in \catc,  as above, along with
\begin{itemize}
\item a morphism $\compmorph$ of \catc, $\compmorph: \compfive \morph Hom$ in \catc
\end{itemize}
such that
\begin{equation}
\label{leftidentityrepresentation2}
\tuple{x_1,x_1,x_2,x_1\circ \fid,id_{Hom}} \circ \compmorph =id_{Hom}
\end{equation}
\begin{equation}
\label{rightidentityrepresentation2}
\tuple{x_1,x_1,x_2,id_{Hom},x_2 \circ \fid} \circ \compmorph =id_{Hom}
\end{equation}
and
\begin{equation}
\label{associativityrepresentation2}
\assocequivalentlhs = \assocequivalentrhs
\end{equation}.
\end{lemma}
\begin{proof}
Of these two equivalent representations the first results from a literal reading of the definition of instance given earlier
along with the judicious choice of intermediate definitions made with readability in mind.
This is demonstrated in tables \ref{internalcategorytableone}  - \ref{internalcategorytablefour} below. 

To show that the second representation follows from the first then from $\fcomp$ define $\compmorph$ by defining $\compmorph=\fcomp \circ q(p_{\tuple{\ddot y_1,\ddot y_3}},Hom)$ and then it is easy to show that 
(\ref{leftidentityrepresentation2}) follows from (\ref{leftidentityaxiom}), 
(\ref{rightidentityrepresentation2}) follows from (\ref{rightidentityaxiom}) and
(\ref{associativityrepresentation2}) follows from (\ref{associativityaxiom})

Vice-versa, from the second representation follows the first if we deffine define $\fcomp$ from  $\compmorph$ by defining $\fcomp=s(\compmorph)$.

\begin{table}[H]
\caption{Deriving what constitutes an intepretation of the theory of categories $tc$ in a contextual category \catc.
Part One - Introductory rules for $Ob$, $Hom$ and $id$.
}
\label{internalcategorytableone}
%\setlength{\arrayrulewidth}{1mm}
\setlength{\tabcolsep}{2pt}
\begin{tabular}{l l  c  p{0cm} l  l}
\multicolumn{2}{l}{Derived Rule} &&& Interpretation by $I$ in \catcw & Reason why\\
\hline
\gatinterpretationintro {obintro}{}{\isT{Ob}}{Ob \in Cover(1)}{(i)}                                   \\
\gatinterpretationdetail{homintrohelper}{\ofT{x_1}{Ob}}{\isT{Ob}}{Ob^2 \in Cover(Ob)}
                                                               {(v) and (\ref{obintro})}             \\
\gatinterpretationintro {homintro}{\ofT{x_1}{Ob},\ofT{x_2}{Ob}}{\isT{Hom}}{Hom \in Cover(Ob^2)}
                                                               {(i) and (\ref{homintrohelper})}      \\
\gatinterpretationdetail{idintrohelperhelper}{\ofT{w}{Ob}}{\ofT{w}{Ob}}{s(id_{Ob})}
                                                               {(ii)(b) and (\ref{homintrohelper})}  \\
\gatinterpretationdetail{idintrohelper}{\ofT{w}{Ob}}
                                 {\isT{Hom(w,w)}}{s(id_{Ob})^*Hom }
                                 {(vii) (\ref{homintro}) and (\ref{idintrohelperhelper})}           \\
\gatinterpretationintro {idintro}{\ofT{w}{Ob}}{\ofT{id(w)}{Hom(w,w)}} 
                                 {\fid \in Sect(s(id_{Ob})^*Hom) }
                                 {(ii)and (\ref{idintrohelper})}                                      \\
\end{tabular}
\end{table}


\begin{table}[H]
\caption{Deriving what constitutes an intepretation of the theory of categories $tc$ in a contextual category \catc.
Part Two Introductory rule for $\circ$. Indication of the reasoning is not included due to lack of space. 
The reasoning follows the patterns indicated in accompanying tables \ref{internalcategorytableone} and \ref{internalcategorytablethree}.
}
\label{internalcategorytabletwo}
%\setlength{\arrayrulewidth}{1mm}
\setlength{\tabcolsep}{2pt}
\begin{tabular}{l l  c  p{0cm} l  l}
\multicolumn{2}{l}{Derived Rule} &&& Interpretation by $I$ in \catcw \\
\hline
\gatinterpretationdetail{comp1}{\ofT{x_1,x_2}{Ob}}{\isT{Ob}}{ \OOO \in Cover(\OO) }{}              \\
\gatinterpretationdetail{comp2}{\ofT{y_1,y_2,y_3}{Ob}}{\isT{Hom(y_1,y_2)}}{ \compfour \in Cover(\OOO) }{} \\
\gatinterpretationdetail{comp3}{\ofT{y_1,y_2,y_3}{Ob}, \ofT{f_1}{Hom(y_1,y_2)}}{\isT{Hom(y_2,y_3)}}
                        {  \compfive \in Cover(\compfour) }{} \\
\gatinterpretationdetail{comp4}{\ofT{y_1,y_2,y_3}{Ob}, \ofT{f}{Hom(y_1,y_2)},\ofT{g}{Hom(y_2,y_3)}} {\isT{Hom(y_1,y_3)}}
                        { \compsix \in Cover(\compfive) }{} \\
\gatinterpretationintro {compintro}	{\ofT{y_1,y_2,y_3}{Ob}, \ofT{f}{Hom(y_1,y_2)},\ofT{g}{Hom(y_2,y_3)}} 
                                    {\ofT{f \circ g}{Hom(y_1,y_3)}}
																    {\fcomp \in Sect(\compsix)}
\end{tabular}
\end{table}

\newcommand{\leftidentityidremapped}{s(x_1\circ \fid)}
\newcommand{\leftidentityrhsmapped}{s(id_{Hom})}      
\newcommand{\leftidentitylhsmapped}{\duple{s(x_1),s(x_1),s(p_{Hom,\OO}),\leftidentityidremapped,s(id_{Hom})}^*\fcomp}
\newcommand{\leftidentitylhsremapped}{\tuple{x_1,x_1,x_2,x_1\circ \fid,id_{Hom}}^*\fcomp}

\begin{table}[H]
\caption{Deriving what constitutes an intepretation of the theory of categories $tc$ in a contextual category \catc.
Part Three. The left identity axiom.
}
\label{internalcategorytablethree}
%\setlength{\arrayrulewidth}{1mm}
\setlength{\tabcolsep}{2pt}
\begin{tabular}{l l  c  p{0cm} l  l}
\gatinterpretationcontext{Let $P$ be the context $\ofT{x_1}{Ob},\,\ofT{x_2}{Ob},\,\ofT{f}{Hom(x_1,x_2)} $
                                 then from (\ref{homintro}) we have $P \mapsto Hom \in Cover(Ob^2)$.} \\
\hline
\multicolumn{2}{l}{Derived Rule} &&& Interpretation by $I$ in \catcw & Reason why\\
\hline
\gatinterpretationdetail{rightidentity1}{P}{\isT{Ob}}{ \HomOb \in Cover(Hom) }{(v), (\ref{homintro}) and (\ref{obintro})}              \\
\gatinterpretationdetail{rightidentity2}{P}{\ofT{x_1}{Ob}}{ s(p_{Hom,Ob}) \in Section(\HomOb) }{(ii)(b)}                    \\
\gatinterpretationmapeqv        {s(x_1)}                                            {defn. of $x_1$}             \\
\gatinterpretationdetail{rightidentity3}{P}{\ofT{x_2}{Ob}}{ s(p_{Hom,Ob^2}) \in Section(\HomOb) }{(ii)(b)}                  \\
\gatinterpretationmapeqv        {s(x_2)}                                            {defn. of $x_2$}             \\
\gatinterpretationdetail{rightidentity4}{P}{\isT{Hom(x_1,x_1)}}{ \duple{s(x_1),s(x_1}^*Hom \in Cover(Hom) }
                                                                                      {(vii), (\ref{homintro}) and (\ref{rightidentity2})}   \\
\gatinterpretationmapeqv                           {\tuple{x_1,x_1}^*Hom}             {lemma \ref{thedupletuplelemma}} \\
\gatinterpretationdetail{rightidentityidmapping}{P}{\ofT{id(x_1)}{Hom(x_1,x_1)}}
                               {\duple{s({x_1})}^*\fid \in Sect(\tuple{x_1,x_1}^*Hom) }{lemma \ref{supplementarylemma}, (\ref{idintro}) and (\ref{rightidentity2})}  \\
\gatinterpretationmapeqv       {{x_1}^*\fid}                                           {lemma \ref{thedupletuplelemma}} \\
\gatinterpretationmapeqv       {\leftidentityidremapped}                                      {lemma \ref{sfglemma} check}     \\
\gatinterpretationdetail{rightidentityrhsmappping}{P}{\ofT{f}{Hom(x_1,x_2)}}{\leftidentityrhsmapped \in Sect(\HomHom) }{(ii)(b)}                         \\
\gatinterpretationdetail{rightidentitylhsmapping}{P}{\ofT{id(x_1) \circ f}{Hom(x_1,x_2)}}
                                {\leftidentitylhsmapped  }
																                                       {lemma \ref{supplementarylemma}, (\ref{rightidentity2}),(\ref{rightidentity3}) and (\ref{rightidentityidmapping})}  \\
																&&&&\hspace{4.5cm}$\in Sect(\HomHom)$&                                                                            \\
\gatinterpretationmapeqv        {  \leftidentitylhsremapped     }
                                                                    {lemma \ref{thedupletuplelemma} and defn. of $x_2$} \\
\gatinterpretationaxcond{tcaxiomone}{P}{id(x_1) \circ f = f}
                                       {\leftidentitylhsremapped=\leftidentityrhsmapped}{(\ref{rightidentitylhsmapping}) and (\ref{rightidentityrhsmappping})}                 \\
%\gatinterpretationaxeqv{\tuple{x_1,x_1,x_2,x_1\circ \fid,id_{Hom}} \circ \fcomp \circ q(p_{\tuple{\ddot y_1,\ddot y_3}},Hom)=id_{Hom}}
%                       {lemma \ref{sfglemma} \highlight{CHECK} and put this in separate lemma}
\end{tabular}
\end{table}



\begin{table}[H]
\caption{Deriving what constitutes an intepretation of the theory of categories $tc$ in a contextual category \catc.
Part Four. Associativity axiom.
}
\label{internalcategorytablefour}
%\setlength{\arrayrulewidth}{1mm}
\setlength{\tabcolsep}{2pt}
\begin{tabular}{l l  c  p{0cm} l  l}
\gatinterpretationcontext{Let $Q$ be the context $\associativitypremise$} \\
\gatinterpretationcontext{then $Q \mapsto \associativitypremisemapped \in Cover(\associativitypremisepopmapped)$ in \catc. \highlight{Why so?}}\\
\hline
\multicolumn{2}{l}{Derived Rule} &&& Interpretation by $I$ in \catcw & Reason why                   \\
\hline \\[-0.4cm]
\gatinterpretationdetail{assoczimapping}{Q}{\ofT{z_i}{Ob},\mbox{ for } i=1,2,3,4}{\assoczimapped}{(ii)(b)}   \\[0.2cm]
\gatinterpretationmapeqv          {\assoczimappedintermediary}                   {axiom (s3)}                \\[0.2cm]
\gatinterpretationmapeqv          {\assocziremapped}                   {by defn. of $\dddot z_i$}  \\[0.2cm]
\gatinterpretationdetail{assocfmapping}{Q}{\ofT{f}{Hom(z_1,z_2)}}{\assocfmapped}{(ii)(b)}             \\[0.2cm]
\gatinterpretationmapeqv          {\assocfmappedintermediary}                   {axiom (s3)}     \\[0.2cm]
\gatinterpretationmapeqv          {\assocfremapped}                             { be defn. of $f$}      \\[0.2cm]
%\gatinterpretationmapeqvsingle    {\assocfremapped \mbox{ where $f$ defined by $f = \assocfdefiniens$}} \\[0.2cm]
\gatinterpretationdetail{assocgmapping}{Q}{\ofT{g}{Hom(z_2,z_s)}}{\assocgmapped}{(ii)(b)}              \\[0.2cm]
\gatinterpretationmapeqv                                  {\assocgmappedintermediary} {axiom (s3)}      \\[0.2cm]
\gatinterpretationmapeqv          {\assocgremapped}                             { be defn. of $g$}      \\[0.2cm]
%\gatinterpretationmapeqvsingle    {\assocgremapped \mbox{ where $g$ defined by $g = \assocgdefiniens$}} \\[0.2cm]
\gatinterpretationdetail{assochmapping}{Q}{\ofT{h}{Hom(z_3,z_4)}}{\assochmapped}{(ii)(b)}               \\[0.2cm]
\gatinterpretationmapeqv                                  {\assochmappedintermediary}  {axiom (s3)}     \\[0.2cm]
%\gatinterpretationmapeqvsingle    {\assochremapped \mbox{ where $h$ defined by $h = \assochdefiniens$}} \\[0.2cm]
\gatinterpretationmapeqv          {\assochremapped}                             { be defn. of $h$}      \\[0.2cm] 

\gatinterpretationdetail{assocfgmapping}{Q}{\ofT{f \circ g}{Hom(z_1,z_3)}}
                                   { \assocfogmapped \in Sect(\tuple{\dddot z_1,\dddot z_3}^*Hom) }
																	 {lemma \ref{supplementarylemma}, (\ref{assocfmapping}) and (\ref{assocgmapping})}                  \\[0.2cm]
\gatinterpretationdetail{assoctypemapping}{Q}{\associativitylhstype}{\associativitylhstypemappedinitially}{lemma \ref{supplementarylemma}, (\ref{homintro}) and (\ref{assoczimapping})}    \\[0.2cm]
\gatinterpretationmapeqv                     {\associativitylhstypemapped}{lemma \ref{thedupletuplelemma}}             \\[0.2cm]         
%\gatinterpretationdetail{assoctypemapping}{Q}{\associativitylhstype}{\associativitylhstypemapped}{\highlight{\tbd}}    \\[0.2cm]
\gatinterpretationdetail{assocLHSmapping}{Q}{\associativitylhstermtyping}{\assoclhsmapped}
                                            {lemma \ref{supplementarylemma}, (\ref{assocfgmapping}) and (\ref{assochmapping})}\\[0.2cm]
\gatinterpretationmapeqv                    {\assoclhsremapped}{lemma \ref{thedupletuplelemma} and  (s3)}\\[0.2cm]
\gatinterpretationdetail{assocghmapping}{Q}{\ofT{g \circ h}{Hom(z_2,z_4)}}
                                   { \assocgohmapped \in Sect(\tuple{\dddot z_2,\dddot z_4}^*Hom) }
																	 {lemma \ref{supplementarylemma}, (\ref{assoczimapping}), (\ref{assocgmapping}) and (\ref{assochmapping})}              \\[0.2cm]
\gatinterpretationmapeqv                    {\assocgohremapped}{lemma \ref{thedupletuplelemma}}\\[0.2cm]
\gatinterpretationdetail{assocRHSmapping}{Q}{\associativityrhstermtyping}
                                            {\assocrhsmapped \iffalse{\in Sect(\associativitylhstypemapped)}\fi}
																						    {lemma \ref{supplementarylemma}, (\ref{assocfmapping}) and (\ref{assocghmapping})} \\ [0.2cm]
\gatinterpretationmapeqv                    {\assocrhsremapped}{lemma \ref{thedupletuplelemma} and (s3)}\\[0.2cm]
\gatinterpretationaxcond{associativity}{}{(f \circ g) \circ h = f \circ (g \circ h)}
                                     { \assoclhsremapped  } \\
\gatinterpretationaxcondrhscontinuation{ = \assocrhsremapped } {(\ref{assocLHSmapping}) and  (\ref{assocRHSmapping})}\\
\end{tabular}
\end{table}

%\ncarc[arcangle=#1,nodesepA=5pt,nodesepB=5pt,offsetA=#2pt,offsetB=#2pt,arrowsize=5pt,arrowinset=0.7]{->}{#3}{#4}
\iffalse
\begin{equation*}
\begin{array}{c}
\begin{array}{r c p{4cm} c}
\associativitypremisemapped        \rightend{Q}            \\ [1cm]
\associativitypremisepopmapped     \rightend{Qp}           \\ [1cm]
\associativitypremisepoppopmapped  \rightend{Qpp}          \\ [1cm]
\OOOO   \rightend{O4}                                   \\ [1cm]
\OOO    \rightend{O3}      &  & & \Rnode{H}{Hom}            \\ [1cm]
\OO     \rightend{O2}      & & & \Rnode{Hp}{\OO}           \\ [1cm]
Ob      \rightend{O}       & & & \Rnode{Hpp}{Ob}           \\ [1cm]
\Rnode{abs}{1}        \\ 
\end{array} \\
\mbox{ % sadly this is taking up horizontal space and pushing visible diagram to the left 
       % I tried \sbox0 but sadly this stopped the arrows being typeset also
			 % need to try and debug this sometime instead I have put as a row in an outer array 
			 % this will just cause one blank line
			 % change mbox to fbox to see what is happening
\ncsar{Q}{Qp}
\ncsar{Qp}{Qpp}
\ncsar{Qpp}{O4}
\ncsar{O4}{O3}
\ncsar{O3}{O2}
\ncsar{O2}{O}   
\ncsar{O}{abs}
\ncsar{H}{Hp}
\ncsar{Hp}{Hpp}
\ncsar{Hpp}{abs}
\ncarrNEGZZ[-10]{Q}{H}    \alabel{f}
\ncarrZ{Q}{H}             \alabel{g}
\ncarrZZ[10]{Q}{H}        \alabel{h}
\ncarrNEGZZ[-10]{O4}{Hpp} \alabel{z_1}
\ncarrZ{O4}{Hpp}          \alabel{z_2}
\ncarrZZ[10]{O4}{Hpp}     \alabel{z_3}
\ncarrZZZ[20]{O4}{Hpp}    \alabel{z_4}
}
\end{array}
\end{equation*}
\fi

\end{proof}




