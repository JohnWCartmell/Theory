
\documentclass[10pt,a4paper]{article}
%\documentclass[10pt,a3paper]{article}
%\input{thepreamble.tex}
\input{../SharedMacros/ccategories.macros}
\input{../SharedMacros/gats.macros}
\input{../SharedMacros/metagat.macros}
\input{../SharedMacros/ermacros}
\input{../SharedMacros/erdiagram}
\input{../SharedMacros/theorems.macros}
\input{../SharedMacros/general.macros}
\input{../SharedMacros/diagram.macros}
\usepackage{mathptmx}  % This changes font to roman
\usepackage{anyfontsize}
\usepackage{mathtools}  % why have we got this?
\usepackage{alltt} 
\usepackage{cmll}
\usepackage{ulem}
\renewcommand{\ttdefault}{txtt}
\usepackage[left=1.5cm, right=4cm, marginparwidth=3cm, top=2cm, bottom=2.0cm]{geometry}
\usepackage{framed}
\usepackage[font=small]{caption}
\usepackage{changepage} % used for adjustwidth

\usepackage[hidelinks=true]{hyperref}   % I have become depedent on this get error otherwise... but i don't know why

\iffalse
\usepackage[shortlabels]{enumitem}
\setlist{nosep}
\fi

\setlength{\captionmargin}{2cm}
\theoremstyle{remark}
\newtheorem*{lemma*}{Lemma}

% have boxed figures
\usepackage{float}
\floatstyle{ruled} 
\restylefloat{figure}
\restylefloat{table}

\usepackage{colortbl}

%\usepackage{mathabox} % wanted this for \lcorners \rcorners but sadly error: mathabox.sty not found

\newtheorem*{lemmastar}{Lemma}

\NewEnviron{tightquote} %italic text indented left and right hand side
{\begin{adjustwidth}{1.5cm}{1.5cm}
\textit{
\BODY
}
\end{adjustwidth}
}

\usepackage{amsmath}
\mathchardef\mhyphen="2D % Define a "math hyphen"

\newcommand{\Ualg}{U \mhyphen alg}
\newcommand{\Upalg}{U' \mhyphen alg}
\newcommand{\Ialg}{I \mhyphen alg}
\newcommand{\catofccs}{\mathbf{Concat}}
\newcommand{\catoflargerccs}{\mathbf{CONCAT}}
%\newcommand{\alg}[1]{{#1}_{alg}}
\newcommand{\alg}[1]{alg(#1)}
\newcommand{\cc}[1]{cc(#1)}
\newcommand{\tccalgebra}{$tcc$-algebra\ }
\newcommand{\tccalgebras}{$tcc$-algebras\ }
\newcommand{\FAM}{\ensuremath{\mathbb{F\mathrm{AM}} }}

\def\therefore{\boldsymbol{\text{ }
\leavevmode
\lower0.4ex\hbox{$\cdot$}
\kern-.5em\raise0.7ex\hbox{$\cdot$}
\kern-0.55em\lower0.4ex\hbox{$\cdot$}
\thinspace\text{ }}}


\NewEnviron{point}
{\begin{adjustwidth}{1.5cm}{1.5cm}
\textbullet\ 
\BODY
\end{adjustwidth}
}

\begin{document}

\title{Instances of Generalised Algebraic Theories\\in Contextual Categories \\
DRAFT }

\author{John Cartmell}

\maketitle



\newcommand{\gatU}{\gat[U]}
\newcommand{\gatUw}{\gatU\ }
\newcommand{\CofU}{\ccat[C](U)}
\newcommand{\KU}{K_{\gat[U]}}
\newcommand{\KUp}{K_{\gat[U']}}
\newcommand{\catCon}{\cat{Con}}
\newcommand{\catGAT}{\cat{GAT}}

\newcommand{\gatrule}[2]{$#1 \tstyle #2$}

\newcommand{\inlinedisplay}[1]
{
\setlength{\fboxsep}{1.5pt}
\setlength{\fboxrule}{0pt}
\fbox{$\displaystyle #1$}
}


%\iffalse
\newcommand{\Isort}{I_{sort}}
\newcommand{\Iop}{I_{op}}
\newcommand {\Ihat}{\hat{I}}
%\fi

\newcommand{\hatU}{\rule{0pt}{12pt}\hat {\gat[U]}}

% workaround when used with Rnode for size of font used under the cross
\renewcommand{\crossx}[3]{#1 \underset{\tiny #3}{\cross} #2}
\newcommand{\fonestar}   {{f_1}\kern-.15em^*}
\newcommand{\ftwostar}   {{f_2}\kern-.15em^*}
\newcommand{\fjstar}     {{f_j}\kern-.2em^*}
\newcommand{\fjpstar}    {{f_{j-1}}\kern-.25em^*}
\newcommand{\smstar}{{s_m}\kern-.25em^*}
\newcommand{\sonestar}{{s_1}\kern-.15em^*}

\newcommand{\Trule} {T-rule\ }
\newcommand{\trule} {$\in$-rule\ }
\newcommand{\Trules} {T-rules\ }
\newcommand{\trules} {$\in$-rules\ }
\newcommand{\Teqrule} {T=-rule\ }
\newcommand{\teqrule} {$\in=$-rule\ }

\newcommand{\Imapsto}{\scaleto{\mapsto}{8pt}}

\definecolor{lightergrey}{rgb}{0.9,0.9,0.9}
%\gatinterpretationdetail{label}{rulepremise}{ruleconclusion}{mapping}{justification}
\newcommand{\gatinterpretationdetail}[5]{
\refstepcounter{equation}(\theequation)\label{#1}& \gatrule{#2}{#3}&$\mapsto$&&$#4$&#5}

\newcommand{\gatinterpretationintro}[5]{
\refstepcounter{equation}(\theequation)\label{#1}& \gatrule{#2}{#3}&$\mapsto$&&\cellcolor{lightergrey}$#4$&#5}

%\gatinterpretationmapeqv{equivalentmapping}{justificaton}
\newcommand{\gatinterpretationmapeqv}[2]{&&&=&\ \ $#1$&#2}
\newcommand{\gatinterpretationmapeqvsingle}[1]{&&&=&\multicolumn{2}{l}{\ \ $#1$}}

\newcommand{\gatinterpretationaxcond}[5]{
\refstepcounter{equation}(\theequation)\label{#1}& \gatrule{#2}{#3}&$\scriptstyle iff$&&\cellcolor{lightergrey}$#4$&#5}

\newcommand{\gatinterpretationaxcondrhscontinuation}[2]{ &&&& \cellcolor{lightergrey}\hspace{0.5cm} $#1$ &{#2}}

%\gatinterpretationaxeqv{equivalentcondition}{justificaton}
\newcommand{\gatinterpretationaxeqv}[2]{&&$\scriptstyle iff$&&$#1$&#2}


\newcommand{\bigtuple}[1]{\big \langle #1 \big \rangle}


\newcommand{\highlightpara}[1]{\colorbox{highlight}{%
    \parbox{\dimexpr\linewidth-2\fboxsep}% a box with line-breaks that's just wide enough
        {#1}}
}

\newcommand{\genericcrossxproductdiagram}{
$
\begin{array}{ccccc}
\Rnode{xy}{\crossx{x}{y}{w}} &&               &&               \\[1.3cm]
\Rnode{x}{x}                 &&               && \Rnode{y}{y}  \\[1.3cm]
                             && \Rnode{w}{w}  &&                                                   
\end{array}
$
\makebox[0.2cm]{% technique to avoid throwing white space
\nccdar{xy}{x}
\blabel{p_{\crossx{x}{y}{w},x}}
\nccdar{x}{w}
\blabel{p_{x,w}}
\nccdar{y}{w}
\alabel{p_{y,w}} 
\ncaarr{q(p_{x,w},y)}{xy}{y}
}
}
\iffalse
\begin{abstract}
\commentary{Generally, I  go to lengths not to speak of `models of theories' because I prefer to use the term `model' not as logicians use it but as other theoreticians (economists, biologists, physicists etc) and data analysts and programmers use it -- I wish to speak of theories modelling the world not vice-versa.
}In these notes I describe a broad notion of model of a generalised algebraic theory by defining the notion of 
an \textit{instance of  a generalised algebraic theory \gatUw in a contextual category \catc}  which I take to be synonomous 
with \textit{internal \gatUw-structure in contextual category \catc}. 
These notes are written in response to a note on generalised algebraic theories and categories with families
 (\cite{BCDEpaper}) sent to me by Peter Dybjer. 
My reason for writing up the definition has been to 
better illustrate the tie up between generalised algebraic theories and contextual categories but from the write-up it emerges
that to every generalised algebraic theory \gatUw there is generalised algebraic theory $\hatU$ of internal \gatU-structures.
The theory $\hatU$ is an extension of the generalised algebraic theory of contextual categories
by a set of rules (introductory rules and axioms) that have  the empty context as premise -- as such it is an extension
by constants and equational identitites between closed terms. Every such extension of
the theory of contextual categories arises in this way as a $\hatU$  to some generalised algebraic theory  \gatU.  

Following the line taken in \cite{BCDEpaper} I give the theory of internal monoids and the theory of internal categories as worked examples. 
The theory of internal monoids is, as to be expected, in agreement with other descriptions such as in the book by Wells and Barr. 
\end{abstract}
\fi

\section{Introduction}
\input{introduction}



\iffalse
\section{Background regarding Generalised Algebraic Theories}
\input{GeneralisedAlgebraicTheories}

\section{Contextual Category Part One - $s$, $^*$ and $\cross$ Operators}
\input{contextualnotationpartone}

\section{Instances of Generalised Algebraic Theories in Contextual Categories}
\label{sectioninwhichinstanceisdefined}
\input{instancedefinition}

\section{Contextual Categories Part Two - Tuples and Duples}
\input{contextualnotationparttwo}

\section{Supplementary Lemma}
Using the notation just introduced we can give a modified version of lemma \ref{omegarealisationwrtQ}.
\begin{lemma}
\label{supplementarylemma}
If $I$ is an interpretation of the generalised algebraic theory \gatUw in a contextual category \catcw then
in the general situation described in lemma \ref{omegarealisationwrtQ}, the rule
\gatdisplayrule{Q}{\isT{\Delta[s_1|y_1...s_m|y_m]}} 
 is mapped by $I$ to object $\duple{f_1,...f_m}^*b$ and
the rule \gatdisplayrule{Q}{\ofT{t[s_1|y_1...s_m|y_m]}{\Delta[s_1|y_1...s_m|y_m]}} is mapped by $I$ to section   $\duple{f_1,...f_m}^*g$
\end{lemma}

\section{Examples}

In the workings of these examples references (i), (ii), (iii) etc. refer to clauses in the main definition of Instance given in section xxx.

\subsection{Internal Monoids -- instances of the Theory of Monoids within Contextual Categories}
\label{monoidsinstanceexample} 
\input{monoidsinstanceexample} 


\subsection{Internal Catgeories -- instances of the Theory of Categories within Contextual Categories}

\label{categoriesinstanceexample}
\input{categoriesinstanceexample}

\fi

%unused
%\section{Unused}
%\input{unused}

%\bibliographystyle{alpha} 
\bibliographystyle{abbrv}
\bibliography{../SharedBibliography/temp/bibliography}
\end{document}
