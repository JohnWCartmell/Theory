\documentclass[10pt,a4paper]{scrartcl}
\usepackage[margin=3cm]{geometry}
\usepackage{array}
\input{../SharedMacros/ermacros}
\input{../SharedMacros/ccategories.macros}
\input{../SharedMacros/gats.macros}
\input{../SharedMacros/metagat.macros}
\input{../SharedMacros/erdiagram}
\input{../SharedMacros/theorems.macros}
\input{../SharedMacros/general.macros}
\usepackage{tipa}
\usepackage{textcomp}
\usepackage{mnsymbol}
\usepackage{ifsym}
\usepackage{esvect}
\usepackage{float}
\usepackage[section]{placeins}
\usepackage{mathdots}


\newcommand{\ssub}{\kern-2pt^*\kern-1pt}
\renewcommand{\sub}{^*\kern-1pt}
\newcommand{\hash}{^\#}
\newcommand{\byaxiom}[1]{by axiom (\ref{#1})}
%
\newcommand{\pbar}{\bar{p}}
\newcommand{\pp}[2]{\pbar(#1,#2)}
%
\newcommand{\qbar}{\bar{q}}
\renewcommand{\qq}[2]{\qbar(#1,#2)}   %sadly I have previously used \qq for quine quote
%
\newcommand{\dsub}{^{\ast \kern-1pt \ast}\kern-2pt}

\setcounter{equation}{0}
\title{Derived Structure Notation for Contextual Categories}
\subtitle{Drafted \\ January 2022 \\}
\author{John Cartmell}
\date{}
\begin{document}
\maketitle
\bibliographystyle{plain}

\section{Introduction}
The  notion of \textit{contextual category} is introduced in  \cite{Cartmell78} and summarised in \cite{Cartmell86}. Whereas generally the objects of categories can be taken to represent types, the objects of contextual categories can be taken to represent what I have described as `types that vary' but which subsequently have become know as dependent types. Equally they can be taken to represent contexts: the algebra of contextual categories is an algebra of context.  

Here I describe some extensions to the basic notation of contextual categories by presenting a revised definition of contextual category that is equivalent to the original definition but in which the extended notation is primitive. The purpose is simply to give a way of organising the presentation of and  subsequent use of the extended structure.

%\section{Definition of Contextual Categories}

\section {Tree-Structured Categories}
\newcommand{\pbartag}[1]{$P#1$}
By a tree-structured category we mean
\begin{itemize}
\item 
a category \catcw with a tree-structure defined on its objects such that the tree of objects has a unique root object and 
\item  for every $x \leq y$ in the tree of objects  a cannonical morphism $\pp{y}{x} :y \rightarrow x$
satisfying
\item for any object $x$ of $\catcw$,
\begin{axiomtagged}{pp1}{$\pbartag{1}$}
\pp{x}{x}=id_x
\end{axiomtagged}
\item for all objects $x$, $y$ and $z$ of \catcw such that $x \leq y \leq z$
\begin{axiomtagged}{pp2}{$\pbartag{2}$}
\pp{z}{y} \circ \pp{y}{x} = \pp{z}{x}
\end{axiomtagged}
\end{itemize}

The cannonical morphisms will be distinguished in diagrams by a jagged arrows with  
a triangular heads so:

\begin{equation*}
\begin{array}{p{2cm}p{0.5cm}p{0.5cm}p{0.5cm}}
\Rnode{y}{y}& \\ [1.4cm]
\Rnode{x}{x} \\
\end{array}
\begin{arrows}
\nccdar{y}{x}
\blabel{\pp{y}{x}}[0.3]
\end{arrows}
\end{equation*}


\section{Contextual Categories}

%\subsection{Revised Definition}
The revised definition which we now give is equivalent to the original definition.

A  \term{contextual category} has the following derived structure\footnote{Note that (\ref{qq1}) to (\ref{qq5}) are extended forms of  (q1) to (q5) from the original definition.}
%\newcommand{\qbartag}[1]{$\qbar \textsl{#1}$}
%\newcommand{\qbartag}[1]{$\qbar \textsl{#1}$}
\newcommand{\qbartag}[1]{$Q \textsl{#1}$}
\begin{itemize}
\item
for all morphisms $f: x \morph y$ in \catcw and for all objects $z$ such that $y \leq z$ in \catc, 
an object $f \dsub z$ such that $x \leq f \dsub z$ and
\begin{itemize}
\item such that for all morphisms $f:x \morph y$ in \catcw 
\begin{axiomtagged}{qq0}{\qbartag{0}}
f \dsub y = x
\end{axiomtagged}
\item such that if $w$, $x$, $y$ and $z$ are objects of \catc, if $f:w \morph x$ in \catcw and $x \leq y \base z$ then $f \dsub y \base f \dsub z$ in \catc,
\end{itemize}
\item
for all morphisms $f: x \morph y$ in \catcw and for all objects $z$ such that $y \leq z$ in \catc, 
a morphism $\qq{f}{z}: f \dsub z \morph z$ such that
\begin{axiomtagged}{qq1}{\qbartag{1}}
\qq{f}{z} \circ \pp{z}{y} = \pp{f \dsub z}{x} \circ f
\end{axiomtagged}
and such that the diagram
\begin{displaymath}
\begin{array}{cp{.9cm}c}
\Rnode{fstarz}{f\dsub z} & & \Rnode{z}{z}\\ [1.2cm]
\Rnode{x}{x}         & & \Rnode{y}{y}
\end{array}
\begin{arrows}
\nccdar{fstarz}{x}
\blabel{\pp{f \dsub z}{x}}
\ncarr{x}{y}
\blabel{f}
\ncarr{fstarz}{z}
\alabel{\qq{f}{z}}
\nccdar{z}{y}
\alabel{\pp{z}{x}}
\end{arrows}
\end{displaymath}
 whose commutivity is given \byaxiom{qq1} is a pullback diagram in \catc,
\item such that  $x$ and $y$ are objects of \catcw such that $x \leq y$ then
\begin{axiomtagged}{qq2}{\qbartag{2}}
{id_x} \dsub y = y
\end{axiomtagged}
and
\begin{axiomtagged}{qq3}{\qbartag{3}}
\qq{id_x}{y} = id_y
\end{axiomtagged}
and 
\item
such that for all objects
$w$, $x$, $y$ and $z$ of \catcw such that $y \leq z$, if $f: w \morph x$ and $g:x \morph w$
in \catc, then
\begin{axiomtagged}{qq4}{\qbartag{4}}
(f \circ g)\dsub z =  f \dsub (g \dsub z)
\end{axiomtagged}
and 
\begin{axiomtagged}{qq5}{\qbartag{5}}
\bar{q}(f \circ g,z) = \bar{q}(f,g \dsub z) \circ \bar{q}(g,z)
\end{axiomtagged}
as shown in this diagram
\begin{displaymath}
\begin{array}{c p{1.3cm} c p{2.0cm} c}
                                                   &&                        &&           \\ [0.5cm] % need space for top most arc and label
\Rnode{UTL}{(f \circ g) \dsub z} \ \ \ \           &&                        &&           \\ [0.05cm]
\Rnode{TL}{=f \dsub (g \dsub z)}  && \Rnode{TC}{g \dsub z}  &   & \Rnode{TR}{z}           \\ [1.2cm]
\Rnode{BL}{w} &&\Rnode{BC}{x} &   & \Rnode{BR}{y}                                         \\ [0.5cm]
\end{array}
\begin{arrows}
% composition
\nccdar{TL}{BL}
%
\nccdar{TC}{BC}
%
\nccdar{TR}{BR}
\alabel{\pp{z}{y}}
%
% reference
\ncarr{BL}{BC}
\blabel{f}
%
\ncarr{BC}{BR}
\blabel{g}
%
\ncarr{TL}{TC}
\alabel{\qq{f}{g \dsub z}}
%
\ncarr{TC}{TR}
\alabel{\qq{g}{z}}
%
\ncarr[30]{UTL}{TR}
\alabel{\bar{q}(f \circ g,z)}
\end{arrows}
\end{displaymath}

\item such that if $w$, $x$, $y$ and $z$ are objects of \catc, if $f:w \morph x$ in \catcw and $x \leq y \leq z$ then
\begin{axiomtagged}{qq6}{\qbartag{6}}
f\dsub z = \qq{f}{y} \dsub z
\end{axiomtagged}
 and 
\begin{axiomtagged}{qq7}{\qbartag{7}}
\qq{f}{z} = \qq{\qq{f}{y}}{z}
\end{axiomtagged}
as shown in this diagram
\begin{displaymath}
\begin{array}{ccp{4.0cm}c}
%&                             &&              \\ [0.1cm]
&f\dsub z = \ \ \ \ \ \ \     &&              \\
&\Rnode{TL}{\qq{f}{y}\dsub z} && \Rnode{TR}{z}\\ [1.2cm]
&\Rnode{ML}{f \dsub y}        && \Rnode{MR}{y}\\ [1.2cm]
&\Rnode{BL}{w}                && \Rnode{BR}{x} 
\end{array}
\begin{arrows} 
%composition  
\nccdar{TL}{ML}
%
\nccdar{ML}{BL}
\nccdar{TR}{MR}
%
\nccdar{MR}{BR}
%reference
\ncarr{TL}{TR}
\alabel{\qq{f}{z}=\qq{\qq{f}{y}}{z}}
%
\ncarr{ML}{MR}
\alabel{\qq{f}{y}}
%
\ncarr{BL}{BR}
\blabel{f}
\end{arrows}
\end{displaymath}
\end{itemize}


\begin{lemma}
If $f:x \morph y$ in contextual category \catcw then $\qq{f}{y}=f$.
\end{lemma}
\begin{proof}
Use (\ref{qq0}) and (\ref{qq1}).
\end{proof}.


\bibliography{../SharedBibliography/temp/bibliography}
 
\end{document}
