
\section{Entity Types}

\mynote The word `entity' as it is used in this book is used in its most general sense,  the sense in which it just means `thing'. The entities that are being modelled in entity modelling can be just any old 'things' at all --- and so we could just as well speak of `modelling things' as `entity modelling' but that the term entity modelling
has come to mean a particular way of modelling things in which things are described by describing their types and the types of relationships between them.

\mynote There is a proviso to this. We do not set out to model types whose instances are all known from the beginning (though these types are available and relevant). Rather we set out to model types whose instances (things) are open-ended and may vary from context to context. These are the subject entity types within an entity model. The whole entity model is expected to be realised in many contexts and the instances of any given subject type are expected to vary from context to context.
 
\mynote
Conversely, things that are known from the beginning and unchanging from one context to another, things that can be said to be `universal' are excluded from being subjects of our modelling. We do not model, therefore, whole numbers, nor real numbers, nor truth values (booleans) but take these as universal givens and, generally, we do not model language characters and language character sequences (strings) with all the richness that this would require and we take these too to be universal and given. 

\mynote
In philosophy the non-universal things that are our entities are referred to as particulars and so we can say that subject entity types within an entity model represent types of things all of whose instances are particulars. 

\mynote Though entity modelling may be about just about any thing it is never about modelling everything.
An entity model serves to describe a domain of discourse. In the general case it describes the entities in this domain in relation not just to each other but to other given types which are types which serve to represent that which is universal. 

\section{Relationships}
\mynote
In this section we are going to discuss binary, ternary, and more generally n-ary, relationships and also  directional, many-many and many-one relationships. To add to this proliferation of terms, some of our many-one relationships can be very usefully described as functional relationships and the others as partial functional relationships. 	The proliferation comes about from the need for clarity --- if we are to err then we would that we err on the side of pedantry --- but also to ensure that we link up with mathematical terminology, where appropriate, and have available the intuitions that come along with this.

\mynote Strictly speaking, directional relationships are not as their name suggests, types of relationships, but are ways of looking at or considering binary relationships. Each binary relationship is a binary relationship viewed at or considered from one end or the other. Each binary relationship can be considered as a directional relationship in two different ways, see figure \ref{relationshipTerminology} for a visualisation of this.

\begin{figure}
\label{relationshipTerminology}
\input{relationshipTerminology.tex}
\caption{Every binary relationship can be thought of as consisting of a pair of directional relationships each of which is one view of the binary relationship. Directional relationships can be one-one, one-many or many-one. There are other possibilities besides as we will discuss.  }
\end{figure}

\mynote
In standard entity modelling terminology an attribute relates entity to a value but whilst they relate things they are not considered to be relationships. If you ask why not then the answer is that it is just so.
This gives us a challenge -- shall we describe attributes as certain types of relationships or should we not?
In the description below we will describe attributes as certain kinds of relationship but later we shall 
proceed as if relationships and attributes were distinct which, as we have said, is the ususal way of things. 

\mynote 
At first glance the following two dictionary entries that you can find online seem to be saying the same thing
\begin{erquote}
a relationship between two things is the way in which they are connected
\end{erquote}
and 
\begin{erquote}
a relationship is a connection, association, or involvement between two things.
\end{erquote}
These entries describe what here we call \textit{binary relationships} but
a more careful reading reveals a significant difference between the two because \textit{friendship} as an abstract thing satisfies the first definition but not the second whereas a particular friendship such as that between \textit{Don Quixote} and \textit{Sancho Panza} satisfies the second  but not the first. 
So as to distinguish the two meanings some authors use the term \textit{relationship type} for the first sense of (binary) relationship and reserve the term \textit{relationship} itself for the second. Here we will stick with the single word relationship but if we need to emphasise the second meaning we may speak of instances of relationships. 

\mynote
In another dictionary we find 
\begin{erquote}
In logic and mathematics relationship is another name for relation.
\end{erquote}
and in yet another there is a definition of mathematical relation as a subset of the cartesiona product of two sets (which is therefore in fact a definition of a binary relation).\footnote{Chambers definition here}.
 

\mynote In two cases above the dictionary is describing relationships between two kinds of things and these are the relationships we are concerned with here and which, being between two things, are called binary relationships. How do we explain what these are? It is a lot clearer if we proceed by example.

\mynote
Well, friendship,  marriage, adjacency, ownership and succession are all examples of binary relationships. There are binary relationships too  between parent and child, between teacher and student and between a planet and the star that it orbits.   
The following are also binary relationships:
being employed by, in the sense that a person might be employed by a particular employee,
managing, in the sense that an employee might manage a project. There are binary relationships too between a sales order and the customer that it is ordered by and between a debit card and  the bank that issued it. A banking transaction has binary relationships both with the account debited and with the account credited. 

\mynote The most important feature of relationships as the term is used  in this book is that the existence of a relationship instance between and two particular entities should be a matter of black and white.\footnote{we easily drawn in to speaking of binary relationships having instances and it is easy to talk about these instances as relationships which, though an overloading of the term relationship, doesn't present practical difficulties.
I think this overloading of the term relationship is already observable in the dictionary bullet points I gave above. Is this the same overloading as when we say that a pig is a type of animal but then speak of an instance of the type as a pig?} For example between any particular Jack and any particular Jill we must take it that there either is or is not a friendship between them. There can be no equivocation or matter of degree --- either the relationship is or is not. This is a point of difference, by the way, between our terminology and that of Chen --- Chen's relationships may have attributes (properties) assined to them, our relationships may not which is why they are, mathematically, binary relations. We will see that such black and white binary relationships are all we need for modelling and that many-many relationships are not needed either. 

\section{Attributes}
\mynote Though we do not set out to model types of universals and the relationships between them 
in an entity model, we do model relationships between subject entity types and types of universals. 

\mynote 
There are two kinds of relationship 
in an entity model those between entity types and those between 
entity types and  given types of universals. 
A relationship of this second kind is said to be an attribute. Such an attribute is a property of the subject entity type. 

\mynote Since relationships of the second kind are called attributes, the term relationship is reserved, in entity modelling terminology and subsequently in these pages, for relationships of the first kind.  The principle components of an entity model are its entity types and their attributes and relationships.\footnote{Some authors would say entity types, relationship types and attributes and though I have sympathy with this terminology I shall stick to relationship where others perhaps correctly have said relationship type}

\mynote
Note that the presence of attributes and therefore the involvement of given types of universals
is an optional feature of entity modelling. 

\section{On the naming of relationships}

\mynote Sometimes relationships are easy to name, sometimes not. 

\begin{center}
\begin{tabular} {| l | p{9cm} |}
\hline
parent--child & also described as the parenthood relationship\\
succeeds--succeeded-by &  the succession relationship \\
married to             &  the matrimony relationship \\
owns--owned-by         & the ownership relationship\\
references--referenced-by & the referentiality relationship?\\
composed-of--part-of   &  the composition relationship\\
                       &  the acquaintance relationship\\
\hline
\end{tabular} 
\end{center}

\mynote We might model that a bicycle is related to its front wheel and that a bicycle is related to its back wheel but we will not then need to model,  and therefore ought not to model, that the front wheel of a bicycle is related to its back wheel because though there is such a relationship it is implied by or mediated by the other two.  

\mynote 
We don't have a simple name for the relationship between a planet and the star it orbits. Instead we have  relative terms `orbits' and `orbited by' which describe each of the parties in the relationship from the point of view of the other. This dual naming of binary relationships is the way that relationships are named in an entity model. 
This is where a diagram comes in handy.

\section{Diagrams}
  
\mynote Mathematically speaking an entity model is not much more than a labelled directed graph and for this reason they are most usually presented as diagrams.

\mynote When entity models are presented in diagrams as directed graphs
they are called ER diagrams (E for entity, R for relationship) or sometimes
ERA diagrams (where the A is for attribute). 

\subsection{Diagram Styles}

\subsubsection*{Many-many Binary Relationships}
In Chen's diagrams the relationship between employees and projects (whose meaning is that
an employee is assigned to work on a project) is depicted like this.
\begin{center}
\input{project-worker.tex}
\end{center}
On this diagram there is an annotation $N$ which documents that an employee may work on many projects (we are to understand that $N >= 0$). There is also an annotation $M$ to document that
a project has many employees assigned to it, $M$ in fact, for some $M >= 0$. \\

\noindent Such a relationship is called a many-many relationship.  \\

\noindent In Barker-Ellis notation which is the basis for the notation used in this book the diamond and its two connectors is replaced by a single line. The fact that the relationship is many-many is represented in the diagram by having a crows foot at each end of the line like so:


\definecolor{lightyellow}{cmyk}{0,0,0,0}
\begin{center}
\input{employeeProjectWorker.tex}
\end{center}

\noindent Also notice that the relationship is labelled at both ends. Each text label gives the name of the relationship from the point of view of the type of entity at that end of the line.

\noindent We very infrequently use many-many relationships in entity models and never use them when modelling data. 

\subsubsection*{Many-One Binary Relationships}
By contrast the relationship between an employee and the department that they work in is shown by Chen like this:
\begin{center}
\input{department-employee.tex}
\end{center}

\noindent On this diagram the annotation $1$ indicates that every employee is in exactly one department and that each department may have many employees within it. Such a relationship is said to be 
many-one. \\

\noindent In Barker-Ellis notation the diamond is again replaced by a single line and the fact that many employees are related to a single department is represented by a single crows-foot at the employee end of the line like this:
\begin{center}
\input{departmentEmployee.tex}
\begin{itemize}
	\item 
\end{itemize}
\end{center}

\subsubsection*{Ternary Relationships}
For the sake of completeness I should mention that Chen also represents ternary relationships and gives an 
example of a ternary relationship between a project, a supplier and a part which he shows like this:
\begin{center}
\input{supp-proj-part.tex}
\end{center}

In the Barker-Ellis style there are no ternary relationships nor are any needed since ternary relationships can be represented as a combination of binary relationships and entity types. The fact that all relationships are binary and are represented by lines only rather than diamonds  is of practical importance in that more details can be fitted onto diagrams.

\subsubsection*{Complete Diagram From Chen}
\begin{figure}
\begin{center}
\input{manufacturing.tex}
\end{center}
\caption{
An entity relationship diagram in the Chen style. This example is the one given in his seminal paper in 1976.
Diamonds represent relationships and boxes represent types of entities.
}
\end{figure}