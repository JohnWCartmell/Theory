
\newcommand{\fieldingSideIntroSlide}{2}
\newcommand{\fieldingSideScopeSlide}{3}
\newcommand{\battingSideIntroSlide}{4}
\newcommand{\battingSideScopeSlide}{5}
\newcommand{\bowlerIntroSlide}{6}
\newcommand{\bowlerScopeSlide}{7}
\newcommand{\facingBatterIntroSlide}{8}
\newcommand{\facingBatterScopeSlide}{9}
\newcommand{\bulletPointSlide}{10}
\newcommand{\sideNameIntroSlide}{11}
\newcommand{\playerNameIntroSlide}{12}
\newcommand{\playerNumberIntroSlide}{13}
\newcommand{\matchIdIntroSlide}{14}
\newcommand{\sideNameIntroSlideRange}{\sideNameIntroSlide-\matchIdIntroSlide}
\newcommand{\playerNameIntroSlideRange}{\playerNameIntroSlide-\matchIdIntroSlide}
\newcommand{\playerNumberIntroSlideRange}{\playerNumberIntroSlide-\matchIdIntroSlide}
\newcommand{\matchIdIntroSlideRange}{\matchIdIntroSlide-\matchIdIntroSlide}
\newcommand{\finalSlide}{15}

\newcommand{\cricketFieldingSideScope}{
\only<\fieldingSideScopeSlide>{
specify\ that
$$\scopeTriangle{fieldingSide}{innings}{side}{match}{}{}$$
commutes.
}
}

\newcommand{\cricketBattingSideScope}{
\only<\battingSideScopeSlide>{
specify\ that
$$\scopeTriangle{battingSide}{innings}{side}{match}{}{}$$
commutes.
}}

\newcommand{\cricketBowlerScope}{
\only<\bowlerScopeSlide>{
specify\ that
$$
\ccsquareoutline{2cm}{1.0cm}{innings}{side}{over}{player}
\ccsquareacross{fieldingSide}{bowler}
\ccsquareup{}{}
$$
commutes.}
}

\newcommand{\cricketFacingBatterScope}{
\only<\facingBatterScopeSlide>{
specify\ that
$$
\begin{array}{c p{1.5cm} c}
\Rnode{innings}{innings} && \Rnode{side}{side} \\[0.75cm]
\Rnode{over}{over}    &&      \\[0.75cm]
\Rnode{delivery}{delivery} && \Rnode{player}{player} 
\end{array}
\begin{arrows}
\ncsar{delivery}{over}
\ncsar{over}{innings}
\ncsar{player}{side}
\ncarr{innings}{side}
\alabel{battingSide}
\ncarr{delivery}{player}
\blabel{facingBatter}
\end{arrows}
$$
commutes.}
}

\newcommand{\RRnode}[1]{\Rnode{#1}{#1}}

\newcommand{\cricketcategory}
{
$
\begin{array}{c p{1.5cm} c p{1.5cm} c}
\multicolumn{3}{c}{\Rnode{abs}{1}}  &&                          \\[1cm]
\multicolumn{3}{c}{\RRnode{match}}  &&                          \\[1cm]
\RRnode{innings}  && \RRnode{side}  && \onslide<\sideNameIntroSlideRange>{\RRnode{string}}              \\[1cm]
\RRnode{over}     && \RRnode{player}&& \onslide<\playerNumberIntroSlideRange>{\RRnode{positiveInteger}} \\[1cm]
\RRnode{delivery} &&  \\
\end{array}
\begin{arrows}
\ncsar{match}{abs}
\ncsar{innings}{match}
\ncsar{over}{innings}
\ncsar{delivery}{over}
\ncsar{side}{match}
\ncsar{player}{side}
\setlength{\arroffsetA}{2pt}
\setlength{\arroffsetB}{2pt}
\onslide<\fieldingSideIntroSlide->{
\ncarr{innings}{side}
\alabel{fieldingSide}
}
\setlength{\arroffsetA}{-2pt}
\setlength{\arroffsetB}{-2pt}
\onslide<\battingSideIntroSlide->{
\ncarr{innings}{side}
\blabel{battingSide}
}
\setlength{\arroffsetA}{0pt}
\setlength{\arroffsetB}{0pt}
\onslide<\bowlerIntroSlide->{
\ncarr{over}{player}
\alabel{bowler}
}
\onslide<\facingBatterIntroSlide->{
\ncarr{delivery}{player}
\blabel{facingBatter}
}
%attributes
\onslide<\matchIdIntroSlideRange>{
\ncarr{match}{string}
\alabel{id}[0.3]
}
\onslide<\sideNameIntroSlideRange>{
\ncarr{side}{string}
\alabel{name}[0.4]
}
\onslide<\playerNameIntroSlideRange>{
\ncarr{player}{string}
\alabel{name}[0.35][0.1]
}
\onslide<\playerNumberIntroSlideRange>{
\ncarr{player}{positiveInteger}
\blabel{number}
}
\end{arrows}
$}

\begin{frame}{Cricket Contextual Category}
\begin{tabular}{p{5cm} p{1cm} p{2.5cm}}
\cricketcategory & &
\parbox[c]{2.5cm}{\cricketFieldingSideScope
\cricketBattingSideScope
\cricketBowlerScope
\cricketFacingBatterScope}
\end{tabular}
\onslide<\bulletPointSlide-\matchIdIntroSlide>{
\begin{itemize}
    \item This structure can be interpreted as a data specification.
    \item Abstractly, instances are contextual functors to \cat{FinFam}.
\end{itemize}
\onslide<\finalSlide>}{}%pause for reflection
\end{frame}

\iffalse{
\begin{frame}
\erDisplayPureLogicalWithoutAttributesWithoutAnimation
\scalebox{0.75}{\input{../../SharedPictures/cricketMatch.relational}}
\end{frame}
}\fi

% I copied this whole side from cricket presentation
% Then i changed to be a EarlyStartFiveSlideAnimation
\begin{frame}{Entity-Relationship (ER) Notation \footnotesize(www.entitymodelling.org)}
\erDisplayEarlyStartFiveSlideAnimation
%\erDisplayAllWithoutAnimation
\newcommand{\logicalAnnotation}
{\begin{tabular}[b]{p{6.5cm}}
Logical or Conceptual\\
\footnotesize  
\end{tabular}
}
\newcommand{\logicalWithScopesAnnotation}
{\begin{tabular}[b]{p{6.5cm}}
Logical or Conceptual\\
\footnotesize  Add scopes for reference relationships. 
\end{tabular}
}
\newcommand{\logicalWithAttributes}
{\begin{tabular}[b]{p{6.5cm}}
Logical or Conceptual\\
\footnotesize  With core attributes added.
\end{tabular}
}
\newcommand{\hierarchicalAnnotation}
{\begin{tabular}[b]{p{6.5cm}}
Physical...Hierarchical (auto-generated)\\
\footnotesize Suitable for representation in XML or IDL.
 fk attrs added to represent horizontal reference (R) relationships.
 In this representation the (D) relationships are implemented by structural containment.
\end{tabular}
}
\newcommand{\relationalAnnotation}
{\begin{tabular}[b]{p{6.5cm}}
Physical...Relational (auto-generated)\\
\footnotesize  For representation in a relational schema.
Further fk attrs added to represent the dependency (D) relationships.
\end{tabular}
}
\begin{tabular}{l l}
\raisebox{-1.9cm}{\scalebox{0.75}{\input{../../SharedPictures/cricketMatch.relational}} }
& \kern-3cm
\onslide*<1-1>{\raisebox{-1cm}{\logicalAnnotation}}
\onslide*<2-2>{\raisebox{-1cm}{\logicalWithScopesAnnotation}}
\onslide*<3-3>{\raisebox{-1cm}{\logicalWithAttributes}}
\onslide*<4-4>{\hierarchicalAnnotation}
\onslide*<5->{\relationalAnnotation}
\end{tabular}
\end{frame}

