 \documentclass[12pt,a4paper]{article}

\newcommand{\sharedmacros}{../../SharedMacros}
\input{\sharedmacros/ccategories.macros}
\input{\sharedmacros/ermacros}
\input{\sharedmacros/erdiagram}
\input{\sharedmacros/theorems.macros}
\input{\sharedmacros/general.macros.v2}
\usepackage{mathptmx}  % This changes font to roman
\usepackage{anyfontsize}
\usepackage{mathtools}  % why have we got this?
\usepackage{alltt}    
\usepackage{mnsymbol} %used for rightpitchfork
\usepackage{cmll}
\usepackage{ulem}
\renewcommand{\ttdefault}{txtt}
\usepackage[left=1.5cm, right=4cm, marginparwidth=3cm, top=2cm, bottom=2.0cm]{geometry}
\usepackage{framed}
\usepackage[font=small]{caption}
\setlength{\captionmargin}{2cm}
\theoremstyle{remark}
\newtheorem*{lemma*}{Lemma}

\usepackage{arydshln} % vertical dashed lines between columns of an array

%\input{../macros/generalmacros.tex}
\input{../macros/othermacros.tex}
%\input{../macros/beamerclashmacros.tex}
%ENDCOPY



\begin{document}
\section{Categories with Designated Monos and Epis}
\newcommand{\pause}{}
\input{../content/categoriesWithDesignatedMonosAndEpis/common}


\begin{lemma}
\representationLemmaPartOne
\end{lemma}
\begin{proof}
There is a proof in the slides but the proof is ambiguous because it talks about an fd being represented without defining what this means. It could mean as described in this part one or it could be as described in part two. 
\end{proof}

I want to achieve representations of fds as described in this lemma but I really don't want the assumption that the underlying catagory is maximally constrained to the requirement.

There is a sublemma regarding extending a Fin valued functor that preserves monos to one that preserves monos and epis. Not obvious where this sublemma is used.   
\begin{lemma}
\representationLemmaPartTwo
\end{lemma}
\begin{proof}
My guess is that I make the additional assumption that the underlying category is maximally constrained to the requirment in order that I can then use the fact that referential inclusion depedencies are represented to inder the existence of $f_1, ... f_n$.

In daybook 17th June 2022 I have a counter example to all referential inclusion dependencies (RIDs) being represented. This counter example is circumvented if all epis are split.
This suggests to me that I should be looking for all epis being split rather than underlying category being maximally constrained.

I don't know where a proof that RIDs are represented along the lines of the proof in the category case breaks down. The breakdown should be circumvented if epis split. 
Actually I have hand written notes from today that suggests that the proof breaks down because the functor hom(a,-) does not preserve (designated) epis unless all (designated) epis are split. It will be a step forward if I can write this up. Assume designated epis split then we get RIDs represented. You might think that we could then use this proof and the extension to a catgeory in which epis split to get all RIDs represented. The counter example of 11th June 2022 might show otherwise.  
\end{proof}

\begin{example}
Suppose sketch S for a category with designated monos and epis 
has these objects and edges 
$$
\begin{array}{c c p{0.5cm}  c c}
\Rnode{s}{s} &            &&\Rnode{b}{b} &               \\[1.0cm]
             &\Rnode{a}{a}&&             & \Rnode{c}{c}
\end{array}
\begin{arrows}
\ncarr{s}{b}
\alabel{g}
\ncarr{b}{c}
\alabel{m}
\addedgebar
\ncline{->>}{s}{a}
\blabel{e}
\ncarr{a}{c}
\alabel{f}
\end{arrows}
$$ and such that this diagram is defined as a commuting diagram.
Consider the category \catcw with designated monos and epis generated by this sketch and
consider that the requirement $\reqtc$ is the category of all mono and epi preserving functors from \catcw to the category \Fin. Since all epis in \Fin are split it follows
that for any functor $F: \catc \morph \Fin$ that $(F^{-1}(e) \circ F(g)) \circ F(m) = F(f)$.

Therefore there is a referential inclusion dependency
$$
a[f] \subseteq b[m]
$$
but this referential inclusion dependency is not represented in \catc.
\end{example}

Two takeaways from this example
\begin{itemize}
	\item if $S$ is seens as a skecth for a category with designated monomorphisms and 
	designated epimoorphisms with designated splits then the  referential inclusion dependency is represented since $e_s \circ g$ will represent it where 
	$e_s$ is the spli of epimorphism $e$.
	\item alternatively we could investigate the consequences of saying that the 
	referential inclusion dependency is represented by the diagram
$
\begin{array}{c p{0.1cm} c p{0.25cm}  c }
\nudgeup{0.6cm}\Rnode{s}{s} &&            &&\Rnode{b}{b}   \\[0.75cm]
             &&\Rnode{a}{a}&&            
\end{array}
\begin{arrows}
\ncarr{s}{b}
\alabel{g}
\addedgebar
\ncline{->>}{s}{a}
\blabel{e}
\end{arrows}
$
.
We can guess straight away that we are going to have to close the definition transitively and define the representation of inclusion dependencies to be in the general case

$$
\begin{array} {c c c c c c c c c c c}
     & \makebox[1cm][c]{\Rnode{s1}{$s_1$}} && 
       \makebox[1cm][c]{\Rnode{s2}{$s_2$}}  &&&&&& 
       \makebox[1cm][c]{\Rnode{sn}{$s_n$}} & \\[0.75cm]
\Rnode{a}{a} && \Rnode{d1}{d_1} && \Rnode{d2}{d_2} && \hdots 
                      && \Rnode{dn1}{d_{n-1}} && \Rnode{b}{b} 
\end{array}
\begin{arrows}
\ncline{->>}{s1}{a}
\blabel{e_1}[0.4]
\ncline{->>}{s2}{d1}
\blabel{e_2}[0.4]
\ncline{->>}{sn}{dn1}
\blabel{e_n}[0.4]
\ncarr{s1}{d1}
\alabel{g_1}[0.4]
\ncarr{s2}{d2}
\alabel{g_1}[0.4]
\ncarr{sn}{b}
\alabel{g_n}[0.4]
\end{arrows}
$$


\end{itemize}







\end{document}

