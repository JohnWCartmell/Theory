 \documentclass[10pt,a4paper]{article}
%\input{thepreamble.tex}
\input{../SharedMacros/ccategories.macros}
\input{../SharedMacros/ermacros}
\input{../SharedMacros/erdiagram}
\input{../SharedMacros/theorems.macros}
\input{../SharedMacros/general.macros}
\usepackage{mathptmx}  % This changes font to roman
\usepackage{anyfontsize}
\usepackage{mathtools}  % why have we got this?
\usepackage{alltt}    
\usepackage{mnsymbol} %used for rightpitchfork
\usepackage{cmll}
\usepackage{ulem}
\renewcommand{\ttdefault}{txtt}
\usepackage[left=1.5cm, right=4cm, marginparwidth=3cm, top=2cm, bottom=2.0cm]{geometry}
\usepackage{framed}
\usepackage[font=small]{caption}
\setlength{\captionmargin}{2cm}
\theoremstyle{remark}
\newtheorem*{lemma*}{Lemma}


\renewcommand{\term}[1]{\textit{#1}}  %SIMPLE UNINDEXED VERSION

%ENDCOPY

\begin{document}
\title{Congruence Structures induced by Full and Faithful Functors}

% abstract here for ams

\author{John Cartmell}

\maketitle
\iffalse
\begin{center}
DRAFT
\end{center}
\fi
Bednarczyk, Borzyskowski and Pawlowski \cite{Bednarczyk1999} define a generalised congruence $\simeq$ on a category
\catcw as an equivalence relation  on the objects of the category \catcw in combination
with a partial equivalence relation
on the set of finite sequences of morphisms of \catcw such that a number of conditions are met. 
They show that each functor $F: \cat{C} \morph \cat{D}$ 
gives rise to such a generalised congruence on \catcw and that from each such generalised congruence 
$\simeq$ on a category \catc, a quotient category $\catc/\simeq$ can be constructed along with a quotient functor $Q_\simeq:\catc \morph \catc/\simeq$.  

Here, we define the notion of a \term{congruence structure} on a category \catcw corresponding to a generalised congruence induced by a functor $F$ that is full and faithful. The
quotient functor $Q_\simeq:\catc \morph \catc/\simeq$ determined by a congruence structure is full, faithful and surjective on objects from which it follows, assuming the axiom of choice, 
that it is an equivalence of categories.


 \section {Congruence structure}

\begin{definition}
If \catcw is a category  then by a \term{congruence structure} $\tuple{\sim,i}$ on \catcw we mean  a binary relation $\sim$ on objects of the category \catcw and for each pair $a, a'$ of objects of \catcw such that $a \sim a'$, a morphism $i_{a,a'}:a \morph a'$ such that
\begin{enumerate} [(i)]
\item  for all objects $a$ of \catc, $a \sim a$ and  $i_{a,a}=id_a$,
\item for all objects $a, a', a''$ of \catc, if $a \sim a'$ and $a' \sim a''$ then 
$a \sim a''$ and the diagram
\begin{equation}
\begin{array}{cp{.3cm}cp{.3cm}c}
              & & \Rnode{ap}{a'}  & &               \\ [0.6cm]
\Rnode{a}{a} & &                  & & \Rnode{app}{a''} 
\end{array}
\end{equation}
\ncarr{a}{ap}
\alabel{i_{a,a'}}
\ncarr{ap}{app}
\alabel{i_{a',a''}}
\ncarr{a}{app}
\blabel{i_{a,a''}}
commutes.
\end{enumerate} 
\end{definition}

\begin{lemma}
\llabel{iiso}
If $\tuple{\sim,i}$ is an congruence structure on a category \catcw then
for all objects $a,a'$ such that $a \sim a'$, the morphism $i_{a,a'}$ is an isomorphism with inverse $i_{a',a}$.
\end{lemma}
\begin{proof}
\begin{align*}
i_{a,a'} \circ i_{a',a} &= i_{a,a} &&\mbox{from condition (ii) of definition of congruence structure}, \\
                        &= id_a    &&\mbox{from condition (i) of definition of congruence structure}.
\end{align*}
\end{proof}

\section{Congruence structure induced by a full and faithful functor}
We show that every full and faithful functor with domain \catcw gives rise to a congruence structure on \catc.
Suppose then that $F:\catc \morph \cat{D}$ is  a full and faithful functor. 
Define a binary relation $\sim$ on objects of $\catc$ by $a \sim a'$ iff $F(a) = F(a')$. It is easy to see that $\sim$ so defined in an equivalence relation. Since $F$ is full and faithful 
whenever $a$ and $a'$ are objects of \catcw such that $a \sim a'$ then there is a unique morphism 
$f:a \morph a'$ in \catcw such that $F(f)=id_{F(a)}$. Define $i_{a,a'}$ to be this 
unique morphism. With $\sim$ and $i$ so defined it is easy to see that
$i_{a,a}=id(a)$ and that if $a \sim a' \sim a''$ then $i_{a,a'} \circ i_{a',a''}=i_{a,a''}$, as required.  

\section{The quotient category defined by a congruence structure}

Define the quotient category $Q_C$ defined by an congruence structure $\tuple{\sim,i}$ within a category \catcw to be the category
having as objects equivalence classes of objects of $\catcw$ under the relations $\sim$ 
and having as morphisms  $Hom_{Q_C}([a],[b])$ equivalence classes of the set
\begin{displaymath}
\bigcup_{a' \in [a]}\bigcup_{b' \in [b]}Hom(a',b')
\end{displaymath}
under the equivalence relation $\approx$ which is defined, for $f: a \morph b$ and $f': a' \morph b'$ in  \catcw, by
\begin{displaymath}
f \approx f' \mbox{ iff } f \circ i_{b,b'} = i_{a,a'} \circ f'.
\end{displaymath}
That $\approx$ is an equivalence relationship is established by showing it to be symmetric and transitive.
We can show that it is symmetric because 
if $f: a \morph b$ and $f': a' \morph b'$ in  \catcw and if $f \approx f'$ then 
we can show that $f' \approx f$ as follows
\begin{align*}
f' \circ i_{b',b} 
    &= i_{a',a} \circ i_{a,a'} \circ f' \circ i_{b',b} &&\mbox{by lemma \lref{iiso}},  \\
		&= i_{a',a} \circ f \circ i_{b,b'}  \circ i_{b',b} &&\mbox{by definition of $f \approx f'$},\\
	  &= i_{a',a} \circ f                                &&\mbox{by lemma \lref{iiso}}. \\
\end{align*}

We can show that $\approx$ is transitive  because 
if $f: a \morph b$, $f': a' \morph b'$ and $f'': a'' \morph b''$ in  \catcw and if $f \approx f'$ and $f' \approx f''$ then
\begin{align*}
f \circ i_{b,b''} &=  f \circ i_{b,b'} \circ i_{b',b''}  && \mbox{by condition(ii) of definition of congruence structure,} \\
                  &= i_{a,a'} \circ f' \circ i_{b',b''}  && \mbox{since $f \approx f'$}, \\
									&= i_{a,a'} \circ i_{a',a''} \circ f'' && \mbox{since $f' \approx f''$}, \\
									&= i_{a,a''} \circ f''                 && \mbox{by condition(ii) of definition of congruence structure}
\end{align*}
and  we have shown that $f \approx f''$, as required.

Define composition of morphisms in $Q_C$ as follows.  If
 $f:a \morph b$ and $g: b' \morph c$ in \catcw, then define $[f] \circ [g]$ in $Q_C$ to be $[f \circ i_{b,b'} \circ g]$.
We need show that composition is well defined.  Assume $f:a \morph b$, $g: b' \morph c$, $f':a' \morph b''$ and $g': b''' \morph c'$ in \catcw and that
$f \approx f'$ and $g \approx g'$.
Now,  
$[f] \circ [g]$ we have defined to be $[f \circ i_{b,b'} \circ g]$  and $[f']  \circ [g']$ we have defined to be $[f' \circ i_{b'',b'''} \circ g']$,
to show that composition in $Q_C$ is well defined we need to show that these are identical i.e. that $f \circ i_{b,b'} \circ g \approx f' \circ i_{b'',b'''} \circ g'$. This identity
is represented by the commutivity of the outer square in the diagram (\ref{compwelldefined}) and follows from the commutivity of the inner squares which follow respectively from the assumption that $f \approx f'$,
from the condition (ii) of definition of an congruence structure and from the assumption that $g \approx g'$.
\begin{equation}
\label{compwelldefined}
\begin{array}{cp{.9cm}cp{.9cm}cp{.9cm}c}
\Rnode{Top1}{a} & & \Rnode{Top2}{b}  & & \Rnode{Top3}{b'} && \Rnode{Top4}{c}\\ [1.2cm]
\Rnode{Bottom1}{a'} & & \Rnode{Bottom2}{b''}  & & \Rnode{Bottom3}{b'''} && \Rnode{Bottom4}{c'}
\end{array}
\end{equation}
\ncarr{Top1}{Top2}
\alabel{f}
\ncarr{Top2}{Top3}
\alabel{i_{b,b'} }
\ncarr{Top3}{Top4}
\alabel{g}
\ncarr{Top1}{Bottom1}
\blabel{i_{a,a'}}
\ncarr{Top2}{Bottom2}
\blabel{i_{b,b''} }
\ncarr{Top3}{Bottom3}
\blabel{i_{b',b'''} }
\ncarr{Top4}{Bottom4}
\alabel{i_{c,c'}}
\ncarr{Bottom1}{Bottom2}
\blabel{f'}
\ncarr{Bottom2}{Bottom3}
\blabel{i_{b'',b'''} }
\ncarr{Bottom3}{Bottom4}
\blabel{g'}

The identity morphism on object $[a]$ is defined to be $[id_a]$. If $a$ is an object of $\catcw$ then $id_{[a]}$ is a left identity since if  $a \sim a'$ and $f:a' \morph b$ then 
first note that because $\tuple{\sim,i}$ is an congruence structure then
\begin{equation}
\label{iaapfeq}
i_{a,a'} \circ f  \approx f
\end{equation}
now we have 
\begin{align*}
id_{[a]} \circ [f] 
         & = [id_a] \circ f               && \mbox{by definition of $id_{[a]}$}    \\
				 & = id_a \circ i_{a,a'} \circ f  && \mbox{be definition of $\circ$}       \\
         &= [i_{a,a'} \circ f]                                                     \\
         &= [f]                           && \mbox {by (\ref{iaapfeq}). }
\end{align*}
Similarly, $id_{[a]}$ is a right identity since if $f:a \morph b$ and $b \sim b'$  then
noting first  that because $\tuple{\sim,i}$ is an congruence structure then
\begin{equation}
\label{fibbpeq}
 f \circ i_{b,b'} \approx f
\end{equation}
now we have 
\begin{align*}
[f] \circ id_{[b']} \circ  
                 & = [f]  \circ [id_{b'}]                                     \\
                 &=  [f \circ i_{b,b'} \circ id_{b'} ]                                  \\
                 &=  [f \circ i_{b,b'} ]                                                \\
                 &=  [f]                               &&\mbox {by (\ref{fibbpeq}). }
\end{align*}


Composition is associative because if $f:a \morph b$, $g: b' \morph c$  and $h: c' \morph d$ in \catcw then
\begin{align*}
[f] \circ ([g] \circ [h]) &= [f \circ [g \circ i_{c,c'} \circ h]               \\
                          &= [f \circ i_{b,b'} \circ g \circ i_{c,c'} \circ h] \\
													&= [f \circ i_{b,b'} \circ g] \circ [h]              \\
													&= ([f] \circ [g]) \circ [h].
\end{align*}
This completes the definition of a category $Q_C$.
The functor $Q_\approx: \catc \morph Q_C$ defined by
\begin{align*}
       a & \mapsto [a] \\
			 f & \mapsto [f]
\end{align*}
The functor $Q_\approx$ is faithful because if $f,g : a \morph b$ in \catcw and $[f]=[g]$ in $Q_C$
then $f=g$ in \catcw because $f \circ i_{b,b}=i_{a,a} \circ g$ by condition (i) of the definition of congruence structure.
The functor $Q_\approx$ is full because if $f:a \morph b$ in \catcw and $a \sim a'$ and
$b \sim b'$ then $i_{a',a} \circ f \circ i_{b,b'}: a' \morph b$ in \catcw and 
$F(i_{a',a} \circ f \circ i_{b,b'})=F(f)$.  

The functor $Q_\approx$ is surjective on objects and full and faithful therefore, assuming the axiom of choice, it is an equivalence of categories. 

\section{Defining the generalised congruence corresponding to a congruence structure.}

We can define a generalised congruence determined by a congruence structure as follows,.
Suppose 
$\tuple{\fn}$ and $\tuple{\gm}$ are tuples of morphisms of category \catc. Suppose 
\foreachi, $f_i:a_i \morph a'_i$ and suppose \foreachj[m], $g_j: b_j \morph b'_j$.
Define 
$\tuple{\fn}\simeq\tuple{\gm}$ iff $dom(f_1) \sim dom(g_1)$ i.e. $a_1 \sim b_1$ and
$cod(f_n) \sim cod(g_m)$ i.e. $a_n \sim b_m$
for each $i$, $1 \leq i <n$, $cod(f_i) \sim dom(f_{i+1})$ i.e.  $a'_i \sim a_{i+1}$
and $j$, $1 \leq j < m$, $cod(g_j) \sim dom(g_{j+1})$ i.e. $b'_j= b_{j+1}$ and such that
the diagram
\begin{equation*}
\begin{array}{cp{.3cm}cp{.3cm}cp{.3cm}cp{.3cm}cp{.3cm}cp{.3cm}cp{.3cm}c}
\Rnode{a1}{a_1} && \Rnode{a1p}{a'_1} && \Rnode{a2}{a_2} && \Rnode{a2p}{a'_2} && ... 
&&\Rnode{an1p}{a'_{n-1}}&&\Rnode{an}{a_n}&&\Rnode{anp}{a'_n}         \\ [0.6cm]
\Rnode{b1}{b_1} &&  \Rnode{b1p}{b'_1} && \Rnode{b2}{b_2} && \Rnode{b2p}{b'_2} && ... 
&&\Rnode{bm1p}{b'_{m-1}}&&\Rnode{bm}{b_m}&&\Rnode{bmp}{b'_m}                 
\end{array}
\end{equation*}
\ncarr{a1}{a1p}
\alabel{f_1}
\ncarr{a1p}{a2}
\alabel{i_{a'_1,a_2}}
\ncarr{a2}{a2p}
\alabel{f_2}
\ncarr{an1p}{an}
\alabel{i_{a'_{n-1},a_n}}
\ncarr{an}{anp}
\alabel{f_n}
\ncarr{a1}{b1}
\blabel{i_{a_1,b_1}}
\ncarr{b1}{b1p}
\alabel{g_1}
\ncarr{b1p}{b2}
\alabel{i_{b'_1,b_2}}
\ncarr{b2}{b2p}
\alabel{g_2}
\ncarr{bm1p}{bm}
\alabel{i_{b'_{m-1},b_m}}
\ncarr{bm}{bmp}
\alabel{g_m}
\ncarr{bmp}{anp}
\blabel{i_{b'_m,a'_n}}
commutes.

\bibliographystyle{alpha} 
\bibliography{../SharedBibliography/temp/bibliography}
\end{document}
