\subsection{Directed Graphs}
Regarding directed graphs and reflecting a category theory mindset we will use terminology as follows:
\begin{itemize}
\item
 If $f: a \morph b$ in an edge of a directed graph $G$ then we will say that $a$ is the \term{domain} of $f$ and $b$ is the \term{codomain} of $f$.
\item
If $a$ and $b$ are nodes of a directed graph $G$ then a \term{path} through $G$ with domain $a$ and 
codomain $b$ of length $n$, where $n \geq 0$, we define to be  an n-tuple of  $n$ edges: $p_i: x_i \morph x_{i+1} $ in $G$ where $x_0=a$ and $x_n=b$. We shall write this n-tuple as $p_1 \circ p_2... \circ p_n$. 
We will use the same notation if any of the $p_i$ are edges rather than paths as we will not need distinguish  an edge from a singleton path along that edge. 
\item two paths have the same domain and the same codomain then we shall say that they are \term{commensurate}.
\end{itemize}




\subsection{Sketches}
By a  \term{sketch for a category} we shall mean a directed graph and a set specified path equivalences.
Each path equivalence consists of a pair $f_1 \circ ... \circ f_n$ and $g_1 \circ ... \circ g_m$ of commensurate paths and can be represented as a diagram so
\begin{displaymath}      
\begin{array}{cp{0.5cm}cp{0.5cm}cp{0.25cm}cp{0.25cm}cp{0.5cm}cp{0.5cm}c}
            &&               &&                &&                  &&                &&               && \\[0.1cm] % vertical space
            &&\Rnode{TL}{c_1}&&\Rnode{TIL}{c_2}&&\Rnode{TC}{\hdots}&& \Rnode{TIR}{c_{n-2}} && \Rnode{TR}{c_{n-1}} &&  \\[0.2cm]
\Rnode{a}{a}&&               &&                &&                  &&                &&               && \Rnode{b}{b} \\[0.2cm]
            &&\Rnode{BL}{d_1}&&\Rnode{BIL}{d_2}&&\Rnode{BC}{\hdots}&& \Rnode{BIR}{d_{m-2}} && \Rnode{BR}{d_{m-1}} &&  \\[0.2cm]        
\end{array}
\begin{arrows}
\ncarr{a}{TL}
\alabel{f_1}
\ncarr{TL}{TIL}
\alabel{f_2}
\ncarr{TIL}{TC}
\ncarr{TC}{TIR}
\ncarr{TIR}{TR}
\alabel{f_{n-1}}
\ncarr{TR}{b}
\alabel{f_n}
\ncarr{a}{BL}
\blabel{g_1}
\ncarr{BL}{BIL}
\blabel{g_2}
\ncarr{BIL}{BC}
\ncarr{BC}{BIR}
\ncarr{BIR}{BR}
\blabel{g_{m-1}}
\ncarr{BR}{b}
\blabel{g_n}
\end{arrows}
\end{displaymath}

For what we are here calling a sketch of a category Barr and Wells use the term \term{linear sketch} and define it as a (directed) graph plus a set of diagrams.

We define the equivalence relation $\sim_S$ of path equivalence determined by a sketch $S$ to be the closure of the set of the specified path equivalences under the following

\begin{itemize}
\item for any path $p$, $p \sim_S p$,
\item for any paths $p_1$ and $p_2$ if $p_1 \sim_S p_2$ then $p_2 \sim_S p_1$,
\item for any paths $p_1$,$p_2$ and $p_3$ if $p_1 \sim_S p_2$ and $p_2 \sim_S p_3$ then $p_1 \sim_S p_3$,
\item if \paralleldiag{a}{b}{p_1}{p_2} and $q: b \morph c$ are paths in $G$ and if $p_1 \sim_S p_2$  
then $p_1 \circ q \sim_S p_2 \circ q$,
\item if $p: a \morph b$ and \paralleldiag{b}{c}{q_1}{q_2} and $q: b \morph c$ are paths in $G$ then if $q_1 \sim_S q_2$  
then $q_1 \circ p \sim_S q_2 \circ p$.
\end{itemize}

The category generated by sketch (called the theory of the sketch in Barr and Wells) is the category with
the nodes of the directed graph of $S$ as objects and with equivalence classes of paths as morphisms.
Composition is defined from composition of representative paths and, from the definition of $\sim_S$, is well-defined.

A sketch is said to be \term{redundancy free} 
if there is no smaller sketch which generates the same category (upto isomorphism of categories).

\subsection{Instances of a Data Specification}
Whilst a sketch represents a data specification, an instance of the specification\footnote{In the case that the data specification describing a database then an instance will be a database instance i.e. a snapshot of the data content at a moment in time.} can be considered to be a set of entities for each node within the graph
along with a many-one functional relationship between the entitity sets for each edge of the graph. 
Accordingly we define an instance of a directed graph $G$ to be a mapping of $G$ to the category of finite sets and functions.
If $G$ is a directed graph and $D$ is an instance then for every node $a$ of $G$, $D(a)$ is a finite set
and for every edge $f:a \morph b$ in $G$, $F(f):D(a) \morph D(b)$ in $\Fin$. Given such an instance $D$ of 
directed graph $G$ 
we can interpret every path $p:a \morph b$ through $G$ as a function $D(p): D(a) \morph D(b)$.

we define an instance of a sketch of a category to be an instance $D$ of its directed graph such that
for each path equivalence $p_1 \sim p_2$ specified in the sketch, $D(p_1)=D(p_2)$.

An instance $D$ of a sketch $S$ that generates a category \catcw 
uniquely determines a functor $D:\catc \morph \Fin$ vice-versa. We don't distinguish much in what follows between instances of sketch $S$ and functors $D: \catc \morph Fin$. Both, equally, represent instances of the skecth considered as a data specification.

\subsection{Requirements for Data Specifications}

In what follows we need some representation of the requirement for a data specification. Ultimately it is in respect of this requirement that a data specification is good or bad. It is sufficient to 
represent this requirement as a set of required data instances. 
In what follows a \term{requirement} for a data specification $S$ 
is a set of instances of the sketch $S$ or, equivalently, is a set $R_C$ of functors where for each
$D \in R_C$, $D: \catc \morph \Fin$, where \catcw is the category generated by the sketch $S$.

Two commensurate paths $p_1$ and $p_2$ are  said to be \term{equivalent with respect to a requirement $R$}, 
written $R \models p_1 \sim p_2$, iff 
for all instances $D \in R$, $D(p1)=D(p_2)$.

The following is a trivial consequence of these definitions.
\begin{lemma}
\label{pathequivalenceinference}
If $G$ is a directed graph and if $R$ is a requirement then 
\begin{itemize}
\item if \paralleldiag{a}{b}{p_1}{p_2} and $q: b \morph c$ are paths in $G$ then if $R \models p_1 \sim p_2$  
then $R \models p_1 \circ q \sim p_2 \circ q$,
\item if $p: a \morph b$ and \paralleldiag{b}{c}{q_1}{q_2} and $q: b \morph c$ are paths in $G$ then if $R \models q_1 \sim q_2$  
then $R \models p \circ q_1 \sim p \circ q_2$.
\end{itemize}
\end{lemma}